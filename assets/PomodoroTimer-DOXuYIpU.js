import{a as o,r as e,c as t,w as a,o as l,b as s,e as n,f as i,t as r,n as u,F as c,g as d,I as v,K as m,j as k}from"./vendor-GAldOsJ5.js";import{_ as p}from"./index-vCRZDDw7.js";import"./qr-DE_AbQYC.js";const g={class:"pomodoro-timer"},b={class:"tool-header"},f={class:"tool-description"},B={class:"timer-container"},h={class:"timer-ring"},w={viewBox:"0 0 200 200"},S=["stroke-dashoffset"],y={class:"timer-content"},T={class:"timer-mode"},$={class:"timer-time"},C={class:"timer-session"},D={class:"timer-controls"},x=["disabled"],W={key:0,viewBox:"0 0 24 24",fill:"currentColor"},E={key:1,viewBox:"0 0 24 24",fill:"currentColor"},L={class:"mode-selector"},I=["onClick"],N={class:"settings-panel"},O={class:"settings-grid"},j={class:"setting-item"},M={class:"setting-input"},_=["disabled"],J=["disabled"],U={class:"setting-item"},V={class:"setting-input"},q=["disabled"],P=["disabled"],A={class:"setting-item"},F={class:"setting-input"},G=["disabled"],K=["disabled"],R={class:"setting-item"},z={class:"setting-input"},H=["disabled"],Q=["disabled"],X={class:"toggle-settings"},Y={class:"toggle-item"},Z={class:"toggle-item"},oo={class:"toggle-item"},eo={class:"toggle-item"},to={class:"stats-panel"},ao={class:"stats-grid"},lo={class:"stat-item"},so={class:"stat-value"},no={class:"stat-label"},io={class:"stat-item"},ro={class:"stat-value"},uo={class:"stat-label"},co={class:"stat-item"},vo={class:"stat-value"},mo={class:"stat-label"},ko=p(o({__name:"PomodoroTimer",setup(o){const p=["work","shortBreak","longBreak"],ko=e({workDuration:25,shortBreakDuration:5,longBreakDuration:15,sessionsBeforeLongBreak:4,soundEnabled:!0,notificationEnabled:!1,autoStartBreaks:!1,autoStartWork:!1}),po=e({completedSessions:0,totalWorkTime:0,completedCycles:0}),go=e("work"),bo=e(1),fo=e(60*ko.value.workDuration),Bo=e(!1);let ho=null;const wo=2*Math.PI*90,So=t(()=>{const o=yo(),e=fo.value/o;return wo*(1-e)});function yo(){switch(go.value){case"work":return 60*ko.value.workDuration;case"shortBreak":return 60*ko.value.shortBreakDuration;case"longBreak":return 60*ko.value.longBreakDuration}}function To(o){const e=o%60;return`${Math.floor(o/60).toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}function $o(o){const e=Math.floor(o/60),t=o%60;return e>0?`${e}h ${t}m`:`${t}m`}function Co(){Bo.value?xo():Do()}function Do(){Bo.value=!0,ho=window.setInterval(()=>{fo.value>0?fo.value--:function(){xo(),function(){if(!ko.value.soundEnabled)return;const o=new(window.AudioContext||window.webkitAudioContext),e=o.createOscillator(),t=o.createGain();e.connect(t),t.connect(o.destination),e.frequency.value=800,e.type="sine",t.gain.value=.3,e.start(),setTimeout(()=>{e.stop(),o.close()},200)}(),function(){if(!ko.value.notificationEnabled)return;if("granted"!==Notification.permission)return;const o="work"===go.value?"Work session completed!":"Break is over!",e="work"===go.value?"Time for a break!":"Ready to focus again?";new Notification(o,{body:e,icon:"/favicon.ico"})}(),"work"===go.value?(po.value.completedSessions++,po.value.totalWorkTime+=ko.value.workDuration,bo.value>=ko.value.sessionsBeforeLongBreak?(po.value.completedCycles++,bo.value=1,Lo("longBreak"),ko.value.autoStartBreaks&&Do()):(bo.value++,Lo("shortBreak"),ko.value.autoStartBreaks&&Do())):(Lo("work"),ko.value.autoStartWork&&Do());jo()}()},1e3)}function xo(){Bo.value=!1,ho&&(clearInterval(ho),ho=null)}function Wo(){xo(),fo.value=yo()}function Eo(){xo(),"work"===go.value?bo.value>=ko.value.sessionsBeforeLongBreak?(bo.value=1,Lo("longBreak")):(bo.value++,Lo("shortBreak")):Lo("work")}function Lo(o){xo(),go.value=o,fo.value=yo()}function Io(o,e){const t=ko.value[o];"number"==typeof t&&(ko.value[o]=t+e,Bo.value||(fo.value=yo()),Oo())}function No(){ko.value.notificationEnabled&&"default"===Notification.permission&&Notification.requestPermission()}function Oo(){localStorage.setItem("pomodoroSettings",JSON.stringify(ko.value))}function jo(){const o=(new Date).toDateString();localStorage.setItem("pomodoroStats",JSON.stringify({date:o,...po.value}))}function Mo(){po.value={completedSessions:0,totalWorkTime:0,completedCycles:0},jo()}return a(ko,Oo,{deep:!0}),l(()=>{!function(){const o=localStorage.getItem("pomodoroSettings");o&&(Object.assign(ko.value,JSON.parse(o)),fo.value=yo())}(),function(){const o=localStorage.getItem("pomodoroStats");if(o){const e=JSON.parse(o),t=(new Date).toDateString();e.date===t&&(po.value.completedSessions=e.completedSessions||0,po.value.totalWorkTime=e.totalWorkTime||0,po.value.completedCycles=e.completedCycles||0)}}()}),s(()=>{ho&&clearInterval(ho)}),(o,e)=>(k(),n("div",g,[i("div",b,[i("h1",null,r(o.$t("tools.pomodoroTimer.title")),1),i("p",f,r(o.$t("tools.pomodoroTimer.description")),1)]),i("div",B,[i("div",{class:u(["timer-display",go.value])},[i("div",h,[(k(),n("svg",w,[e[12]||(e[12]=i("circle",{class:"timer-ring-bg",cx:"100",cy:"100",r:"90",fill:"none","stroke-width":"8"},null,-1)),i("circle",{class:"timer-ring-progress",cx:"100",cy:"100",r:"90",fill:"none","stroke-width":"8","stroke-dasharray":wo,"stroke-dashoffset":So.value},null,8,S)])),i("div",y,[i("div",T,r(o.$t(`tools.pomodoroTimer.modes.${go.value}`)),1),i("div",$,r(To(fo.value)),1),i("div",C,r(o.$t("tools.pomodoroTimer.session"))+" "+r(bo.value)+"/"+r(ko.value.sessionsBeforeLongBreak),1)])])],2),i("div",D,[i("button",{class:"control-btn secondary",disabled:!Bo.value&&fo.value===yo(),onClick:Wo},[...e[13]||(e[13]=[i("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[i("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),i("path",{d:"M3 3v5h5"})],-1)])],8,x),i("button",{class:"control-btn primary",onClick:Co},[Bo.value?(k(),n("svg",E,[...e[15]||(e[15]=[i("rect",{x:"6",y:"4",width:"4",height:"16"},null,-1),i("rect",{x:"14",y:"4",width:"4",height:"16"},null,-1)])])):(k(),n("svg",W,[...e[14]||(e[14]=[i("polygon",{points:"5,3 19,12 5,21"},null,-1)])]))]),i("button",{class:"control-btn secondary",onClick:Eo},[...e[16]||(e[16]=[i("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[i("polygon",{points:"5,4 15,12 5,20"}),i("rect",{x:"15",y:"4",width:"4",height:"16"})],-1)])])]),i("div",L,[(k(),n(c,null,d(p,e=>i("button",{key:e,class:u(["mode-btn",{active:go.value===e}]),onClick:o=>Lo(e)},r(o.$t(`tools.pomodoroTimer.modes.${e}`)),11,I)),64))])]),i("div",N,[i("h3",null,r(o.$t("tools.pomodoroTimer.settings")),1),i("div",O,[i("div",j,[i("label",null,r(o.$t("tools.pomodoroTimer.workDuration")),1),i("div",M,[i("button",{disabled:ko.value.workDuration<=5,onClick:e[0]||(e[0]=o=>Io("workDuration",-5))}," - ",8,_),i("span",null,r(ko.value.workDuration)+" "+r(o.$t("tools.pomodoroTimer.minutes")),1),i("button",{disabled:ko.value.workDuration>=60,onClick:e[1]||(e[1]=o=>Io("workDuration",5))}," + ",8,J)])]),i("div",U,[i("label",null,r(o.$t("tools.pomodoroTimer.shortBreak")),1),i("div",V,[i("button",{disabled:ko.value.shortBreakDuration<=1,onClick:e[2]||(e[2]=o=>Io("shortBreakDuration",-1))}," - ",8,q),i("span",null,r(ko.value.shortBreakDuration)+" "+r(o.$t("tools.pomodoroTimer.minutes")),1),i("button",{disabled:ko.value.shortBreakDuration>=15,onClick:e[3]||(e[3]=o=>Io("shortBreakDuration",1))}," + ",8,P)])]),i("div",A,[i("label",null,r(o.$t("tools.pomodoroTimer.longBreak")),1),i("div",F,[i("button",{disabled:ko.value.longBreakDuration<=10,onClick:e[4]||(e[4]=o=>Io("longBreakDuration",-5))}," - ",8,G),i("span",null,r(ko.value.longBreakDuration)+" "+r(o.$t("tools.pomodoroTimer.minutes")),1),i("button",{disabled:ko.value.longBreakDuration>=30,onClick:e[5]||(e[5]=o=>Io("longBreakDuration",5))}," + ",8,K)])]),i("div",R,[i("label",null,r(o.$t("tools.pomodoroTimer.sessionsBeforeLongBreak")),1),i("div",z,[i("button",{disabled:ko.value.sessionsBeforeLongBreak<=2,onClick:e[6]||(e[6]=o=>Io("sessionsBeforeLongBreak",-1))}," - ",8,H),i("span",null,r(ko.value.sessionsBeforeLongBreak),1),i("button",{disabled:ko.value.sessionsBeforeLongBreak>=8,onClick:e[7]||(e[7]=o=>Io("sessionsBeforeLongBreak",1))}," + ",8,Q)])])]),i("div",X,[i("label",Y,[v(i("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>ko.value.soundEnabled=o),type:"checkbox"},null,512),[[m,ko.value.soundEnabled]]),i("span",null,r(o.$t("tools.pomodoroTimer.soundEnabled")),1)]),i("label",Z,[v(i("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>ko.value.notificationEnabled=o),type:"checkbox",onChange:No},null,544),[[m,ko.value.notificationEnabled]]),i("span",null,r(o.$t("tools.pomodoroTimer.notificationEnabled")),1)]),i("label",oo,[v(i("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>ko.value.autoStartBreaks=o),type:"checkbox"},null,512),[[m,ko.value.autoStartBreaks]]),i("span",null,r(o.$t("tools.pomodoroTimer.autoStartBreaks")),1)]),i("label",eo,[v(i("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>ko.value.autoStartWork=o),type:"checkbox"},null,512),[[m,ko.value.autoStartWork]]),i("span",null,r(o.$t("tools.pomodoroTimer.autoStartWork")),1)])])]),i("div",to,[i("h3",null,r(o.$t("tools.pomodoroTimer.todayStats")),1),i("div",ao,[i("div",lo,[i("div",so,r(po.value.completedSessions),1),i("div",no,r(o.$t("tools.pomodoroTimer.completedSessions")),1)]),i("div",io,[i("div",ro,r($o(po.value.totalWorkTime)),1),i("div",uo,r(o.$t("tools.pomodoroTimer.totalWorkTime")),1)]),i("div",co,[i("div",vo,r(po.value.completedCycles),1),i("div",mo,r(o.$t("tools.pomodoroTimer.completedCycles")),1)])]),i("button",{class:"reset-stats-btn",onClick:Mo},r(o.$t("tools.pomodoroTimer.resetStats")),1)])]))}}),[["__scopeId","data-v-46613d23"]]);export{ko as default};
