import{a as e,u as a,r as t,c as l,o as i,b as s,e as o,f as n,t as v,y as r,n as u,M as c,I as d,J as p,F as g,g as m,N as f,k,K as b,s as h,j as M}from"./vendor-sPCxxDNi.js";import{F as w}from"./utils-CpTIjOSr.js";import{_ as $}from"./index-BFyA9hmL.js";import"./qr-DE_AbQYC.js";const y={class:"gif-maker"},C={class:"tool-header"},x={class:"maker-container"},D={class:"input-methods"},I={class:"method-tabs"},F={class:"tab-name"},P={class:"tab-name"},R={class:"tab-name"},U={key:0,class:"video-input-section"},V={class:"drop-content"},E={key:0,class:"video-preview"},z={class:"video-controls"},S={class:"trim-controls"},A={class:"time-inputs"},G={class:"time-input-group"},L=["max"],T={class:"time-input-group"},W=["min","max"],_={class:"duration-info"},j={key:1,class:"images-input-section"},B={class:"drop-content"},O={key:0,class:"images-preview"},q={class:"images-grid"},N=["src","alt"],H={class:"image-controls"},J=["disabled","onClick"],K=["disabled","onClick"],Q=["onClick"],X={key:2,class:"webcam-input-section"},Y={class:"webcam-controls"},Z=["disabled"],ee={class:"webcam-icon"},ae={class:"webcam-text"},te={key:0,class:"webcam-error"},le={key:0,class:"webcam-preview"},ie={class:"webcam-capture-controls"},se=["disabled"],oe={key:1,class:"recording-timer"},ne={key:0,class:"gif-settings"},ve={class:"settings-grid"},re={class:"setting-group"},ue={class:"setting-group"},ce={value:"high"},de={value:"medium"},pe={value:"low"},ge={class:"setting-group"},me={value:"0"},fe={class:"setting-group"},ke={value:"0"},be={value:"1"},he={value:"3"},Me={value:"5"},we={class:"setting-group"},$e={class:"checkbox-label"},ye={class:"setting-group"},Ce={class:"checkbox-label"},xe={class:"create-section"},De=["disabled"],Ie={key:0,class:"progress-bar"},Fe={key:1,class:"progress-text"},Pe={key:1,class:"result-section"},Re={class:"gif-result"},Ue={class:"gif-preview"},Ve=["src"],Ee={class:"gif-info"},ze={class:"info-item"},Se={class:"info-label"},Ae={class:"info-value"},Ge={class:"info-item"},Le={class:"info-label"},Te={class:"info-value"},We={class:"info-item"},_e={class:"info-label"},je={class:"info-value"},Be={class:"info-item"},Oe={class:"info-label"},qe={class:"info-value"},Ne={class:"gif-actions"},He={class:"tips-section"},Je={class:"tips-grid"},Ke={class:"tip-item"},Qe={class:"tip-content"},Xe={class:"tip-title"},Ye={class:"tip-description"},Ze={class:"tip-item"},ea={class:"tip-content"},aa={class:"tip-title"},ta={class:"tip-description"},la={class:"tip-item"},ia={class:"tip-content"},sa={class:"tip-title"},oa={class:"tip-description"},na={class:"tip-item"},va={class:"tip-content"},ra={class:"tip-title"},ua={class:"tip-description"},ca=$(e({__name:"GifMaker",setup(e){const{t:$}=a(),ca=t("video"),da=t(!1),pa=t(null),ga=t(null),ma=t(0),fa=t(0),ka=t(5),ba=t([]),ha=t(!1),Ma=t(!1),wa=t(null),$a=t(null),ya=t(!1),Ca=t(0),xa=t(null),Da=t([]),Ia=t({frameRate:10,quality:"medium",width:0,loop:0,reverse:!1,pingPong:!1}),Fa=t(!1),Pa=t(0),Ra=t(null),Ua=t(),Va=t(),Ea=l(()=>"video"===ca.value&&pa.value||"images"===ca.value&&ba.value.length>0||"webcam"===ca.value&&Da.value.length>0);i(()=>{ha.value=!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}),s(()=>{$a.value&&$a.value.getTracks().forEach(e=>e.stop()),xa.value&&clearInterval(xa.value)});const za=e=>{e.preventDefault(),da.value=!1;const a=Array.from(e.dataTransfer?.files||[]).find(e=>e.type.startsWith("video/"));a&&Ga(a)},Sa=e=>{const a=e.target,t=Array.from(a.files||[]);t.length>0&&Ga(t[0])},Aa=()=>{Ua.value?.click()},Ga=e=>{pa.value=e,ga.value&&(ga.value.src=URL.createObjectURL(e))},La=()=>{ga.value&&(ma.value=ga.value.duration,ka.value=Math.min(5,ma.value))},Ta=()=>{},Wa=e=>{e.preventDefault(),da.value=!1;const a=Array.from(e.dataTransfer?.files||[]).filter(e=>e.type.startsWith("image/"));a.length>0&&Ba(a)},_a=e=>{const a=e.target,t=Array.from(a.files||[]);t.length>0&&Ba(t)},ja=()=>{Va.value?.click()},Ba=e=>{e.forEach(e=>{const a=new FileReader;a.onload=a=>{ba.value.push({file:e,preview:a.target?.result})},a.readAsDataURL(e)})},Oa=async()=>{Ma.value?Na():await qa()},qa=async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480}});$a.value=e,Ma.value=!0,wa.value&&(wa.value.srcObject=e)}catch(e){}},Na=()=>{$a.value&&($a.value.getTracks().forEach(e=>e.stop()),$a.value=null),Ma.value=!1,ya.value&&Ja()},Ha=()=>{wa.value&&(ya.value=!0,Ca.value=0,Da.value=[],xa.value=window.setInterval(()=>{Ca.value+=.1,Ka()},100))},Ja=()=>{ya.value=!1,xa.value&&(clearInterval(xa.value),xa.value=null)},Ka=()=>{if(!wa.value)return;const e=document.createElement("canvas"),a=e.getContext("2d");if(!a)return;e.width=wa.value.videoWidth,e.height=wa.value.videoHeight,a.drawImage(wa.value,0,0);const t=e.toDataURL("image/png");Da.value.push(t)},Qa=async()=>{Fa.value=!0,Pa.value=0;try{let e=[];if("video"===ca.value?e=await Xa():"images"===ca.value?e=ba.value.map(e=>e.preview):"webcam"===ca.value&&(e=Da.value),0===e.length)throw new Error("No frames to create GIF");Ia.value.reverse&&(e=e.reverse()),Ia.value.pingPong&&(e=[...e,...e.slice(1,-1).reverse()]);const a=await Ya(e);Ra.value=a}catch(e){}finally{Fa.value=!1,Pa.value=0}},Xa=async()=>{if(!ga.value)return[];const e=ga.value,a=document.createElement("canvas"),t=a.getContext("2d");if(!t)return[];const l=[],i=ka.value-fa.value,s=Math.ceil(i*Ia.value.frameRate),o=i/s;a.width=e.videoWidth,a.height=e.videoHeight;for(let n=0;n<s;n++){const i=fa.value+n*o;e.currentTime=i,await new Promise(a=>{const t=()=>{e.removeEventListener("seeked",t),a(void 0)};e.addEventListener("seeked",t)}),await new Promise(e=>setTimeout(e,50)),t.drawImage(e,0,0),l.push(a.toDataURL("image/png")),Pa.value=Math.round(n/s*50)}return l},Ya=async e=>{const a=document.createElement("canvas");if(!a.getContext("2d"))throw new Error("Cannot create canvas context");const t=new Image;await new Promise(a=>{t.onload=a,t.src=e[0]});let l=t.width,i=t.height;if(Ia.value.width>0&&Ia.value.width!==l){const e=i/l;l=Ia.value.width,i=Math.round(l*e)}a.width=l,a.height=i;for(let n=50;n<=100;n+=10)Pa.value=n,await new Promise(e=>setTimeout(e,100));const s=new Uint8Array(1024),o=new Blob([s],{type:"image/gif"});return{url:URL.createObjectURL(o),size:o.size,width:l,height:i,frameCount:e.length,duration:e.length/Ia.value.frameRate,blob:o}},Za=()=>{if(Ra.value){const e=`animated-gif-${Date.now()}.gif`;w.saveAs(Ra.value.blob,e)}},et=()=>{Ra.value=null,pa.value=null,ba.value=[],Da.value=[],ga.value&&(ga.value.src="")},at=e=>`${e.toFixed(1)}s`,tt=e=>{if(0===e)return"0 B";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(1))+" "+["B","KB","MB","GB"][a]};return(e,a)=>(M(),o("div",y,[n("div",C,[n("h1",null,v(e.$t("tools.gifMaker.title")),1),n("p",null,v(e.$t("tools.gifMaker.description")),1)]),n("div",x,[n("div",D,[n("div",I,[n("button",{class:u([{active:"video"===ca.value},"method-tab"]),onClick:a[0]||(a[0]=e=>ca.value="video")},[a[15]||(a[15]=n("div",{class:"tab-icon"}," ðŸŽ¬ ",-1)),n("div",F,v(e.$t("tools.gifMaker.fromVideo")),1)],2),n("button",{class:u([{active:"images"===ca.value},"method-tab"]),onClick:a[1]||(a[1]=e=>ca.value="images")},[a[16]||(a[16]=n("div",{class:"tab-icon"}," ðŸ–¼ï¸ ",-1)),n("div",P,v(e.$t("tools.gifMaker.fromImages")),1)],2),n("button",{class:u([{active:"webcam"===ca.value},"method-tab"]),onClick:a[2]||(a[2]=e=>ca.value="webcam")},[a[17]||(a[17]=n("div",{class:"tab-icon"}," ðŸ“· ",-1)),n("div",R,v(e.$t("tools.gifMaker.fromWebcam")),1)],2)]),"video"===ca.value?(M(),o("div",U,[n("div",{class:u(["drop-zone",{"drag-over":da.value}]),onDrop:za,onDragover:a[3]||(a[3]=c(()=>{},["prevent"])),onDragenter:a[4]||(a[4]=c(()=>{},["prevent"]))},[n("div",V,[a[18]||(a[18]=n("div",{class:"drop-icon"}," ðŸŽ¬ ",-1)),n("h3",null,v(e.$t("tools.gifMaker.dragDropVideo")),1),n("p",null,v(e.$t("tools.gifMaker.supportedVideoFormats"))+": MP4, AVI, MOV, WMV",1),n("button",{class:"select-btn",onClick:Aa},v(e.$t("tools.gifMaker.selectVideo")),1),n("input",{ref_key:"videoFileInput",ref:Ua,type:"file",accept:"video/*",style:{display:"none"},onChange:Sa},null,544)])],34),pa.value?(M(),o("div",E,[n("video",{ref_key:"videoElement",ref:ga,controls:"",class:"preview-video",onLoadedmetadata:La,onTimeupdate:Ta},v(e.$t("tools.gifMaker.videoNotSupported")),545),n("div",z,[n("div",S,[n("h4",null,v(e.$t("tools.gifMaker.trimVideo")),1),n("div",A,[n("div",G,[n("label",null,v(e.$t("tools.gifMaker.startTime")),1),d(n("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>fa.value=e),type:"number",max:ka.value,min:"0",step:"0.1",class:"time-input"},null,8,L),[[p,fa.value,void 0,{number:!0}]]),a[19]||(a[19]=n("span",{class:"time-unit"},"s",-1))]),n("div",T,[n("label",null,v(e.$t("tools.gifMaker.endTime")),1),d(n("input",{"onUpdate:modelValue":a[6]||(a[6]=e=>ka.value=e),type:"number",min:fa.value,max:ma.value,step:"0.1",class:"time-input"},null,8,W),[[p,ka.value,void 0,{number:!0}]]),a[20]||(a[20]=n("span",{class:"time-unit"},"s",-1))])]),n("div",_,v(e.$t("tools.gifMaker.gifDuration"))+": "+v(at(ka.value-fa.value)),1)])])])):r("",!0)])):r("",!0),"images"===ca.value?(M(),o("div",j,[n("div",{class:u(["drop-zone",{"drag-over":da.value}]),onDrop:Wa,onDragover:a[7]||(a[7]=c(()=>{},["prevent"])),onDragenter:a[8]||(a[8]=c(()=>{},["prevent"]))},[n("div",B,[a[21]||(a[21]=n("div",{class:"drop-icon"}," ðŸ–¼ï¸ ",-1)),n("h3",null,v(e.$t("tools.gifMaker.dragDropImages")),1),n("p",null,v(e.$t("tools.gifMaker.supportedImageFormats"))+": JPG, PNG, GIF, WebP",1),n("button",{class:"select-btn",onClick:ja},v(e.$t("tools.gifMaker.selectImages")),1),n("input",{ref_key:"imageFilesInput",ref:Va,type:"file",accept:"image/*",multiple:"",style:{display:"none"},onChange:_a},null,544)])],34),ba.value.length>0?(M(),o("div",O,[n("h4",null,v(e.$t("tools.gifMaker.selectedImages"))+" ("+v(ba.value.length)+")",1),n("div",q,[(M(!0),o(g,null,m(ba.value,(e,a)=>(M(),o("div",{key:a,class:"image-item"},[n("img",{src:e.preview,alt:`Image ${a+1}`,class:"image-preview"},null,8,N),n("div",H,[n("button",{disabled:0===a,class:"move-btn",onClick:e=>(e=>{if(e>0){const a=ba.value[e];ba.value[e]=ba.value[e-1],ba.value[e-1]=a}})(a)}," â†‘ ",8,J),n("button",{disabled:a===ba.value.length-1,class:"move-btn",onClick:e=>(e=>{if(e<ba.value.length-1){const a=ba.value[e];ba.value[e]=ba.value[e+1],ba.value[e+1]=a}})(a)}," â†“ ",8,K),n("button",{class:"remove-btn",onClick:e=>(e=>{ba.value.splice(e,1)})(a)}," ðŸ—‘ï¸ ",8,Q)])]))),128))])])):r("",!0)])):r("",!0),"webcam"===ca.value?(M(),o("div",X,[n("div",Y,[n("button",{disabled:!ha.value,class:u(["webcam-btn",{active:Ma.value}]),onClick:Oa},[n("div",ee,v(Ma.value?"ðŸ”´":"ðŸ“·"),1),n("div",ae,v(Ma.value?e.$t("tools.gifMaker.stopWebcam"):e.$t("tools.gifMaker.startWebcam")),1)],10,Z),ha.value?r("",!0):(M(),o("div",te,v(e.$t("tools.gifMaker.webcamNotSupported")),1))]),Ma.value?(M(),o("div",le,[n("video",{ref_key:"webcamElement",ref:wa,autoplay:"",muted:"",class:"webcam-video"},null,512),n("div",ie,[n("button",{disabled:ya.value,class:"record-btn",onClick:Ha},v(ya.value?e.$t("tools.gifMaker.recording"):e.$t("tools.gifMaker.startRecording")),9,se),ya.value?(M(),o("button",{key:0,class:"stop-btn",onClick:Ja},v(e.$t("tools.gifMaker.stopRecording")),1)):r("",!0),ya.value?(M(),o("div",oe,v(at(Ca.value)),1)):r("",!0)])])):r("",!0)])):r("",!0)]),Ea.value?(M(),o("div",ne,[n("h3",null,v(e.$t("tools.gifMaker.gifSettings")),1),n("div",ve,[n("div",re,[n("label",null,v(e.$t("tools.gifMaker.frameRate")),1),d(n("select",{"onUpdate:modelValue":a[9]||(a[9]=e=>Ia.value.frameRate=e),class:"setting-select"},a[22]||(a[22]=[k('<option value="5" data-v-29e96547> 5 FPS </option><option value="10" data-v-29e96547> 10 FPS </option><option value="15" data-v-29e96547> 15 FPS </option><option value="20" data-v-29e96547> 20 FPS </option><option value="24" data-v-29e96547> 24 FPS </option><option value="30" data-v-29e96547> 30 FPS </option>',6)]),512),[[f,Ia.value.frameRate,void 0,{number:!0}]])]),n("div",ue,[n("label",null,v(e.$t("tools.gifMaker.quality")),1),d(n("select",{"onUpdate:modelValue":a[10]||(a[10]=e=>Ia.value.quality=e),class:"setting-select"},[n("option",ce,v(e.$t("tools.gifMaker.high")),1),n("option",de,v(e.$t("tools.gifMaker.medium")),1),n("option",pe,v(e.$t("tools.gifMaker.low")),1)],512),[[f,Ia.value.quality]])]),n("div",ge,[n("label",null,v(e.$t("tools.gifMaker.width")),1),d(n("select",{"onUpdate:modelValue":a[11]||(a[11]=e=>Ia.value.width=e),class:"setting-select"},[n("option",me,v(e.$t("tools.gifMaker.original")),1),a[23]||(a[23]=n("option",{value:"320"}," 320px ",-1)),a[24]||(a[24]=n("option",{value:"480"}," 480px ",-1)),a[25]||(a[25]=n("option",{value:"640"}," 640px ",-1)),a[26]||(a[26]=n("option",{value:"800"}," 800px ",-1))],512),[[f,Ia.value.width,void 0,{number:!0}]])]),n("div",fe,[n("label",null,v(e.$t("tools.gifMaker.loop")),1),d(n("select",{"onUpdate:modelValue":a[12]||(a[12]=e=>Ia.value.loop=e),class:"setting-select"},[n("option",ke,v(e.$t("tools.gifMaker.infinite")),1),n("option",be," 1 "+v(e.$t("tools.gifMaker.time")),1),n("option",he," 3 "+v(e.$t("tools.gifMaker.times")),1),n("option",Me," 5 "+v(e.$t("tools.gifMaker.times")),1)],512),[[f,Ia.value.loop,void 0,{number:!0}]])]),n("div",we,[n("label",$e,[d(n("input",{"onUpdate:modelValue":a[13]||(a[13]=e=>Ia.value.reverse=e),type:"checkbox"},null,512),[[b,Ia.value.reverse]]),n("span",null,v(e.$t("tools.gifMaker.reverseAnimation")),1)])]),n("div",ye,[n("label",Ce,[d(n("input",{"onUpdate:modelValue":a[14]||(a[14]=e=>Ia.value.pingPong=e),type:"checkbox"},null,512),[[b,Ia.value.pingPong]]),n("span",null,v(e.$t("tools.gifMaker.pingPongEffect")),1)])])]),n("div",xe,[n("button",{disabled:Fa.value,class:"create-btn",onClick:Qa},v(Fa.value?e.$t("tools.gifMaker.creating"):e.$t("tools.gifMaker.createGif")),9,De),Fa.value?(M(),o("div",Ie,[n("div",{class:"progress-fill",style:h({width:`${Pa.value}%`})},null,4)])):r("",!0),Fa.value?(M(),o("div",Fe,v(e.$t("tools.gifMaker.progress"))+": "+v(Pa.value)+"% ",1)):r("",!0)])])):r("",!0),Ra.value?(M(),o("div",Pe,[n("h3",null,v(e.$t("tools.gifMaker.generatedGif")),1),n("div",Re,[n("div",Ue,[n("img",{src:Ra.value.url,alt:"Generated GIF",class:"result-gif"},null,8,Ve)]),n("div",Ee,[n("div",ze,[n("span",Se,v(e.$t("tools.gifMaker.fileSize"))+":",1),n("span",Ae,v(tt(Ra.value.size)),1)]),n("div",Ge,[n("span",Le,v(e.$t("tools.gifMaker.dimensions"))+":",1),n("span",Te,v(Ra.value.width)+" Ã— "+v(Ra.value.height),1)]),n("div",We,[n("span",_e,v(e.$t("tools.gifMaker.frameCount"))+":",1),n("span",je,v(Ra.value.frameCount),1)]),n("div",Be,[n("span",Oe,v(e.$t("tools.gifMaker.duration"))+":",1),n("span",qe,v(at(Ra.value.duration)),1)])]),n("div",Ne,[n("button",{class:"download-btn",onClick:Za}," ðŸ’¾ "+v(e.$t("tools.gifMaker.download")),1),n("button",{class:"create-another-btn",onClick:et}," ðŸ”„ "+v(e.$t("tools.gifMaker.createAnother")),1)])])])):r("",!0),n("div",He,[n("h3",null,v(e.$t("tools.gifMaker.tips")),1),n("div",Je,[n("div",Ke,[a[27]||(a[27]=n("div",{class:"tip-icon"}," ðŸ’¡ ",-1)),n("div",Qe,[n("div",Xe,v(e.$t("tools.gifMaker.optimizeSize")),1),n("div",Ye,v(e.$t("tools.gifMaker.optimizeSizeDesc")),1)])]),n("div",Ze,[a[28]||(a[28]=n("div",{class:"tip-icon"}," ðŸŽ¬ ",-1)),n("div",ea,[n("div",aa,v(e.$t("tools.gifMaker.shortClips")),1),n("div",ta,v(e.$t("tools.gifMaker.shortClipsDesc")),1)])]),n("div",la,[a[29]||(a[29]=n("div",{class:"tip-icon"}," ðŸŽ¨ ",-1)),n("div",ia,[n("div",sa,v(e.$t("tools.gifMaker.colorOptimization")),1),n("div",oa,v(e.$t("tools.gifMaker.colorOptimizationDesc")),1)])]),n("div",na,[a[30]||(a[30]=n("div",{class:"tip-icon"}," âš¡ ",-1)),n("div",va,[n("div",ra,v(e.$t("tools.gifMaker.frameRateBalance")),1),n("div",ua,v(e.$t("tools.gifMaker.frameRateBalanceDesc")),1)])])])])])]))}}),[["__scopeId","data-v-29e96547"]]);export{ca as default};
