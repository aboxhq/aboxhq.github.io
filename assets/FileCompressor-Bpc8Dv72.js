import{_ as e}from"./qr-DE_AbQYC.js";import{a as t,u as r,r as n,c as i,b as o,e as a,f as s,t as l,y as c,M as f,n as u,k as h,F as d,g as p,I as m,N as g,j as v}from"./vendor-GAldOsJ5.js";import{F as b}from"./utils-CpTIjOSr.js";import{g as w,z as y}from"./browser-ti7604_i.js";import{s as A}from"./toast-NJcpvA0I.js";import{_ as U}from"./index-CE9ZUSgX.js";function F(e,t){return new Promise(function(r,n){let i;return C(e).then(function(e){try{return i=e,r(new Blob([t.slice(0,2),i,t.slice(2)],{type:"image/jpeg"}))}catch(o){return n(o)}},n)})}const C=e=>new Promise((t,r)=>{const n=new FileReader;n.addEventListener("load",({target:{result:e}})=>{const n=new DataView(e);let i=0;if(65496!==n.getUint16(i))return r("not a valid JPEG");for(i+=2;;){const o=n.getUint16(i);if(65498===o)break;const a=n.getUint16(i+2);if(65505===o&&1165519206===n.getUint32(i+4)){const o=i+10;let s;switch(n.getUint16(o)){case 18761:s=!0;break;case 19789:s=!1;break;default:return r("TIFF header contains invalid endian")}if(42!==n.getUint16(o+2,s))return r("TIFF header contains invalid version");const l=n.getUint32(o+4,s),c=o+l+2+12*n.getUint16(o+l,s);for(let e=o+l+2;e<c;e+=12)if(274==n.getUint16(e,s)){if(3!==n.getUint16(e+2,s))return r("Orientation data type is invalid");if(1!==n.getUint32(e+4,s))return r("Orientation data count is invalid");n.setUint16(e+8,1,s);break}return t(e.slice(i,i+2+a))}i+=2+a}return t(new Blob)}),n.readAsArrayBuffer(e)});var E,B,M,x={},T={get exports(){return x},set exports(e){x=e}};M={},T.exports=M,M.parse=function(e,t){for(var r=M.bin.readUshort,n=M.bin.readUint,i=0,o={},a=new Uint8Array(e),s=a.length-4;101010256!=n(a,s);)s--;i=s,i+=4;var l=r(a,i+=4);r(a,i+=2);var c=n(a,i+=2),f=n(a,i+=4);i+=4,i=f;for(var u=0;u<l;u++){n(a,i),i+=4,i+=4,i+=4,n(a,i+=4),c=n(a,i+=4);var h=n(a,i+=4),d=r(a,i+=4),p=r(a,i+2),m=r(a,i+4);i+=6;var g=n(a,i+=8);i+=4,i+=d+p+m,M._readLocal(a,g,o,c,h,t)}return o},M._readLocal=function(e,t,r,n,i,o){var a=M.bin.readUshort,s=M.bin.readUint;s(e,t),a(e,t+=4),a(e,t+=2);var l=a(e,t+=2);s(e,t+=2),s(e,t+=4),t+=4;var c=a(e,t+=8),f=a(e,t+=2);t+=2;var u=M.bin.readUTF8(e,t,c);if(t+=c,t+=f,o)r[u]={size:i,csize:n};else{var h=new Uint8Array(e.buffer,t);if(0==l)r[u]=new Uint8Array(h.buffer.slice(t,t+n));else{if(8!=l)throw"unknown compression method: "+l;var d=new Uint8Array(i);M.inflateRaw(h,d),r[u]=d}}},M.inflateRaw=function(e,t){return M.F.inflate(e,t)},M.inflate=function(e,t){return e[0],e[1],M.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},M.deflate=function(e,t){null==t&&(t={level:6});var r=0,n=new Uint8Array(50+Math.floor(1.1*e.length));n[r]=120,n[r+1]=156,r+=2,r=M.F.deflateRaw(e,n,r,t.level);var i=M.adler(e,0,e.length);return n[r+0]=i>>>24&255,n[r+1]=i>>>16&255,n[r+2]=i>>>8&255,n[r+3]=i>>>0&255,new Uint8Array(n.buffer,0,r+4)},M.deflateRaw=function(e,t){null==t&&(t={level:6});var r=new Uint8Array(50+Math.floor(1.1*e.length)),n=M.F.deflateRaw(e,r,n,t.level);return new Uint8Array(r.buffer,0,n)},M.encode=function(e,t){null==t&&(t=!1);var r=0,n=M.bin.writeUint,i=M.bin.writeUshort,o={};for(var a in e){var s=!M._noNeed(a)&&!t,l=e[a],c=M.crc.crc(l,0,l.length);o[a]={cpr:s,usize:l.length,crc:c,file:s?M.deflateRaw(l):l}}for(var a in o)r+=o[a].file.length+30+46+2*M.bin.sizeUTF8(a);r+=22;var f=new Uint8Array(r),u=0,h=[];for(var a in o){var d=o[a];h.push(u),u=M._writeHeader(f,u,a,d,0)}var p=0,m=u;for(var a in o)d=o[a],h.push(u),u=M._writeHeader(f,u,a,d,1,h[p++]);var g=u-m;return n(f,u,101010256),u+=4,i(f,u+=4,p),i(f,u+=2,p),n(f,u+=2,g),n(f,u+=4,m),u+=4,u+=2,f.buffer},M._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return-1!="png,jpg,jpeg,zip".indexOf(t)},M._writeHeader=function(e,t,r,n,i,o){var a=M.bin.writeUint,s=M.bin.writeUshort,l=n.file;return a(e,t,0==i?67324752:33639248),t+=4,1==i&&(t+=2),s(e,t,20),s(e,t+=2,0),s(e,t+=2,n.cpr?8:0),a(e,t+=2,0),a(e,t+=4,n.crc),a(e,t+=4,l.length),a(e,t+=4,n.usize),s(e,t+=4,M.bin.sizeUTF8(r)),s(e,t+=2,0),t+=2,1==i&&(t+=2,t+=2,a(e,t+=6,o),t+=4),t+=M.bin.writeUTF8(e,t,r),0==i&&(e.set(l,t),t+=l.length),t},M.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var r=t,n=0;n<8;n++)1&r?r=3988292384^r>>>1:r>>>=1;e[t]=r}return e}(),update:function(e,t,r,n){for(var i=0;i<n;i++)e=M.crc.table[255&(e^t[r+i])]^e>>>8;return e},crc:function(e,t,r){return 4294967295^M.crc.update(4294967295,e,t,r)}},M.adler=function(e,t,r){for(var n=1,i=0,o=t,a=t+r;o<a;){for(var s=Math.min(o+5552,a);o<s;)i+=n+=e[o++];n%=65521,i%=65521}return i<<16|n},M.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,r){e[t]=255&r,e[t+1]=r>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,r){e[t]=255&r,e[t+1]=r>>8&255,e[t+2]=r>>16&255,e[t+3]=r>>24&255},readASCII:function(e,t,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(e[t+i]);return n},writeASCII:function(e,t,r){for(var n=0;n<r.length;n++)e[t+n]=r.charCodeAt(n)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,r){for(var n,i="",o=0;o<r;o++)i+="%"+M.bin.pad(e[t+o].toString(16));try{n=decodeURIComponent(i)}catch(a){return M.bin.readASCII(e,t,r)}return n},writeUTF8:function(e,t,r){for(var n=r.length,i=0,o=0;o<n;o++){var a=r.charCodeAt(o);if(4294967168&a)if(4294965248&a)if(4294901760&a){if(4292870144&a)throw"e";e[t+i]=240|a>>18,e[t+i+1]=128|a>>12&63,e[t+i+2]=128|a>>6&63,e[t+i+3]=128|63&a,i+=4}else e[t+i]=224|a>>12,e[t+i+1]=128|a>>6&63,e[t+i+2]=128|63&a,i+=3;else e[t+i]=192|a>>6,e[t+i+1]=128|63&a,i+=2;else e[t+i]=a,i++}return i},sizeUTF8:function(e){for(var t=e.length,r=0,n=0;n<t;n++){var i=e.charCodeAt(n);if(4294967168&i)if(4294965248&i)if(4294901760&i){if(4292870144&i)throw"e";r+=4}else r+=3;else r+=2;else r++}return r}},M.F={},M.F.deflateRaw=function(e,t,r,n){var i=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][n],o=M.F.U,a=M.F._goodIndex;M.F._hash;var s=M.F._putsE,l=0,c=r<<3,f=0,u=e.length;if(0==n){for(;l<u;)s(t,c,l+(F=Math.min(65535,u-l))==u?1:0),c=M.F._copyExact(e,l,F,t,c+8),l+=F;return c>>>3}var h=o.lits,d=o.strt,p=o.prev,m=0,g=0,v=0,b=0,w=0,y=0;for(u>2&&(d[y=M.F._hash(e,0)]=0),l=0;l<u;l++){if(w=y,l+1<u-2){y=M.F._hash(e,l+1);var A=l+1&32767;p[A]=d[y],d[y]=A}if(f<=l){(m>14e3||g>26697)&&u-l>100&&(f<l&&(h[m]=l-f,m+=2,f=l),c=M.F._writeBlock(l==u-1||f==u?1:0,h,m,b,e,v,l-v,t,c),m=g=b=0,v=l);var U=0;l<u-2&&(U=M.F._bestMatch(e,l,p,w,Math.min(i[2],u-l),i[3]));var F=U>>>16,C=65535&U;if(0!=U){C=65535&U;var E=a(F=U>>>16,o.of0);o.lhst[257+E]++;var B=a(C,o.df0);o.dhst[B]++,b+=o.exb[E]+o.dxb[B],h[m]=F<<23|l-f,h[m+1]=C<<16|E<<8|B,m+=2,f=l+F}else o.lhst[e[l]]++;g++}}for(v==l&&0!=e.length||(f<l&&(h[m]=l-f,m+=2,f=l),c=M.F._writeBlock(1,h,m,b,e,v,l-v,t,c),m=0,g=0,m=g=b=0,v=l);7&c;)c++;return c>>>3},M.F._bestMatch=function(e,t,r,n,i,o){var a=32767&t,s=r[a],l=a-s+32768&32767;if(s==a||n!=M.F._hash(e,t-l))return 0;for(var c=0,f=0,u=Math.min(32767,t);l<=u&&0!=--o&&s!=a;){if(0==c||e[t+c]==e[t+c-l]){var h=M.F._howLong(e,t,l);if(h>c){if(f=l,(c=h)>=i)break;l+2<h&&(h=l+2);for(var d=0,p=0;p<h-2;p++){var m=t-l+p+32768&32767,g=m-r[m]+32768&32767;g>d&&(d=g,s=m)}}}l+=(a=s)-(s=r[a])+32768&32767}return c<<16|f},M.F._howLong=function(e,t,r){if(e[t]!=e[t-r]||e[t+1]!=e[t+1-r]||e[t+2]!=e[t+2-r])return 0;var n=t,i=Math.min(e.length,t+258);for(t+=3;t<i&&e[t]==e[t-r];)t++;return t-n},M.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},M.saved=0,M.F._writeBlock=function(e,t,r,n,i,o,a,s,l){var c,f,u,h,d,p,m,g,v,b=M.F.U,w=M.F._putsF,y=M.F._putsE;b.lhst[256]++,f=(c=M.F.getTrees())[0],u=c[1],h=c[2],d=c[3],p=c[4],m=c[5],g=c[6],v=c[7];var A=32+(l+3&7?8-(l+3&7):0)+(a<<3),U=n+M.F.contSize(b.fltree,b.lhst)+M.F.contSize(b.fdtree,b.dhst),F=n+M.F.contSize(b.ltree,b.lhst)+M.F.contSize(b.dtree,b.dhst);F+=14+3*m+M.F.contSize(b.itree,b.ihst)+(2*b.ihst[16]+3*b.ihst[17]+7*b.ihst[18]);for(var C=0;C<286;C++)b.lhst[C]=0;for(C=0;C<30;C++)b.dhst[C]=0;for(C=0;C<19;C++)b.ihst[C]=0;var E=A<U&&A<F?0:U<F?1:2;if(w(s,l,e),w(s,l+1,E),l+=3,0==E){for(;7&l;)l++;l=M.F._copyExact(i,o,a,s,l)}else{var B,x;if(1==E&&(B=b.fltree,x=b.fdtree),2==E){M.F.makeCodes(b.ltree,f),M.F.revCodes(b.ltree,f),M.F.makeCodes(b.dtree,u),M.F.revCodes(b.dtree,u),M.F.makeCodes(b.itree,h),M.F.revCodes(b.itree,h),B=b.ltree,x=b.dtree,y(s,l,d-257),y(s,l+=5,p-1),y(s,l+=5,m-4),l+=4;for(var T=0;T<m;T++)y(s,l+3*T,b.itree[1+(b.ordr[T]<<1)]);l+=3*m,l=M.F._codeTiny(g,b.itree,s,l),l=M.F._codeTiny(v,b.itree,s,l)}for(var z=o,I=0;I<r;I+=2){for(var _=t[I],S=_>>>23,R=z+(8388607&_);z<R;)l=M.F._writeLit(i[z++],B,s,l);if(0!=S){var k=t[I+1],O=k>>16,P=k>>8&255,D=255&k;y(s,l=M.F._writeLit(257+P,B,s,l),S-b.of0[P]),l+=b.exb[P],w(s,l=M.F._writeLit(D,x,s,l),O-b.df0[D]),l+=b.dxb[D],z+=S}}l=M.F._writeLit(256,B,s,l)}return l},M.F._copyExact=function(e,t,r,n,i){var o=i>>>3;return n[o]=r,n[o+1]=r>>>8,n[o+2]=255-n[o],n[o+3]=255-n[o+1],o+=4,n.set(new Uint8Array(e.buffer,t,r),o),i+(r+4<<3)},M.F.getTrees=function(){for(var e=M.F.U,t=M.F._hufTree(e.lhst,e.ltree,15),r=M.F._hufTree(e.dhst,e.dtree,15),n=[],i=M.F._lenCodes(e.ltree,n),o=[],a=M.F._lenCodes(e.dtree,o),s=0;s<n.length;s+=2)e.ihst[n[s]]++;for(s=0;s<o.length;s+=2)e.ihst[o[s]]++;for(var l=M.F._hufTree(e.ihst,e.itree,7),c=19;c>4&&0==e.itree[1+(e.ordr[c-1]<<1)];)c--;return[t,r,l,i,a,c,n,o]},M.F.getSecond=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(e[r+1]);return t},M.F.nonZero=function(e){for(var t="",r=0;r<e.length;r+=2)0!=e[r+1]&&(t+=(r>>1)+",");return t},M.F.contSize=function(e,t){for(var r=0,n=0;n<t.length;n++)r+=t[n]*e[1+(n<<1)];return r},M.F._codeTiny=function(e,t,r,n){for(var i=0;i<e.length;i+=2){var o=e[i],a=e[i+1];n=M.F._writeLit(o,t,r,n);var s=16==o?2:17==o?3:7;o>15&&(M.F._putsE(r,n,a,s),n+=s)}return n},M.F._lenCodes=function(e,t){for(var r=e.length;2!=r&&0==e[r-1];)r-=2;for(var n=0;n<r;n+=2){var i=e[n+1],o=n+3<r?e[n+3]:-1,a=n+5<r?e[n+5]:-1,s=0==n?-1:e[n-1];if(0==i&&o==i&&a==i){for(var l=n+5;l+2<r&&e[l+2]==i;)l+=2;(c=Math.min(l+1-n>>>1,138))<11?t.push(17,c-3):t.push(18,c-11),n+=2*c-2}else if(i==s&&o==i&&a==i){for(l=n+5;l+2<r&&e[l+2]==i;)l+=2;var c=Math.min(l+1-n>>>1,6);t.push(16,c-3),n+=2*c-2}else t.push(i,0)}return r>>>1},M.F._hufTree=function(e,t,r){var n=[],i=e.length,o=t.length,a=0;for(a=0;a<o;a+=2)t[a]=0,t[a+1]=0;for(a=0;a<i;a++)0!=e[a]&&n.push({lit:a,f:e[a]});var s=n.length,l=n.slice(0);if(0==s)return 0;if(1==s){var c=n[0].lit;return l=0==c?1:0,t[1+(c<<1)]=1,t[1+(l<<1)]=1,1}n.sort(function(e,t){return e.f-t.f});var f=n[0],u=n[1],h=0,d=1,p=2;for(n[0]={lit:-1,f:f.f+u.f,l:f,r:u,d:0};d!=s-1;)f=h!=d&&(p==s||n[h].f<n[p].f)?n[h++]:n[p++],u=h!=d&&(p==s||n[h].f<n[p].f)?n[h++]:n[p++],n[d++]={lit:-1,f:f.f+u.f,l:f,r:u};var m=M.F.setDepth(n[d-1],0);for(m>r&&(M.F.restrictDepth(l,r,m),m=r),a=0;a<s;a++)t[1+(l[a].lit<<1)]=l[a].d;return m},M.F.setDepth=function(e,t){return-1!=e.lit?(e.d=t,t):Math.max(M.F.setDepth(e.l,t+1),M.F.setDepth(e.r,t+1))},M.F.restrictDepth=function(e,t,r){var n=0,i=1<<r-t,o=0;for(e.sort(function(e,t){return t.d==e.d?e.f-t.f:t.d-e.d}),n=0;n<e.length&&e[n].d>t;n++){var a=e[n].d;e[n].d=t,o+=i-(1<<r-a)}for(o>>>=r-t;o>0;)(a=e[n].d)<t?(e[n].d++,o-=1<<t-a-1):n++;for(;n>=0;n--)e[n].d==t&&o<0&&(e[n].d--,o++)},M.F._goodIndex=function(e,t){var r=0;return t[16|r]<=e&&(r|=16),t[8|r]<=e&&(r|=8),t[4|r]<=e&&(r|=4),t[2|r]<=e&&(r|=2),t[1|r]<=e&&(r|=1),r},M.F._writeLit=function(e,t,r,n){return M.F._putsF(r,n,t[e<<1]),n+t[1+(e<<1)]},M.F.inflate=function(e,t){var r=Uint8Array;if(3==e[0]&&0==e[1])return t||new r(0);var n=M.F,i=n._bitsF,o=n._bitsE,a=n._decodeTiny,s=n.makeCodes,l=n.codes2map,c=n._get17,f=n.U,u=null==t;u&&(t=new r(e.length>>>2<<3));for(var h,d,p=0,m=0,g=0,v=0,b=0,w=0,y=0,A=0,U=0;0==p;)if(p=i(e,U,1),m=i(e,U+1,2),U+=3,0!=m){if(u&&(t=M.F._check(t,A+(1<<17))),1==m&&(h=f.flmap,d=f.fdmap,w=511,y=31),2==m){g=o(e,U,5)+257,v=o(e,U+5,5)+1,b=o(e,U+10,4)+4,U+=14;for(var F=0;F<38;F+=2)f.itree[F]=0,f.itree[F+1]=0;var C=1;for(F=0;F<b;F++){var E=o(e,U+3*F,3);f.itree[1+(f.ordr[F]<<1)]=E,E>C&&(C=E)}U+=3*b,s(f.itree,C),l(f.itree,C,f.imap),h=f.lmap,d=f.dmap,U=a(f.imap,(1<<C)-1,g+v,e,U,f.ttree);var B=n._copyOut(f.ttree,0,g,f.ltree);w=(1<<B)-1;var x=n._copyOut(f.ttree,g,v,f.dtree);y=(1<<x)-1,s(f.ltree,B),l(f.ltree,B,h),s(f.dtree,x),l(f.dtree,x,d)}for(;;){var T=h[c(e,U)&w];U+=15&T;var z=T>>>4;if(z>>>8==0)t[A++]=z;else{if(256==z)break;var I=A+z-254;if(z>264){var _=f.ldef[z-257];I=A+(_>>>3)+o(e,U,7&_),U+=7&_}var S=d[c(e,U)&y];U+=15&S;var R=S>>>4,k=f.ddef[R],O=(k>>>4)+i(e,U,15&k);for(U+=15&k,u&&(t=M.F._check(t,A+(1<<17)));A<I;)t[A]=t[A++-O],t[A]=t[A++-O],t[A]=t[A++-O],t[A]=t[A++-O];A=I}}}else{7&U&&(U+=8-(7&U));var P=4+(U>>>3),D=e[P-4]|e[P-3]<<8;u&&(t=M.F._check(t,A+D)),t.set(new r(e.buffer,e.byteOffset+P,D),A),U=P+D<<3,A+=D}return t.length==A?t:t.slice(0,A)},M.F._check=function(e,t){var r=e.length;if(t<=r)return e;var n=new Uint8Array(Math.max(r<<1,t));return n.set(e,0),n},M.F._decodeTiny=function(e,t,r,n,i,o){for(var a=M.F._bitsE,s=M.F._get17,l=0;l<r;){var c=e[s(n,i)&t];i+=15&c;var f=c>>>4;if(f<=15)o[l]=f,l++;else{var u=0,h=0;16==f?(h=3+a(n,i,2),i+=2,u=o[l-1]):17==f?(h=3+a(n,i,3),i+=3):18==f&&(h=11+a(n,i,7),i+=7);for(var d=l+h;l<d;)o[l]=u,l++}}return i},M.F._copyOut=function(e,t,r,n){for(var i=0,o=0,a=n.length>>>1;o<r;){var s=e[o+t];n[o<<1]=0,n[1+(o<<1)]=s,s>i&&(i=s),o++}for(;o<a;)n[o<<1]=0,n[1+(o<<1)]=0,o++;return i},M.F.makeCodes=function(e,t){for(var r,n,i,o,a=M.F.U,s=e.length,l=a.bl_count,c=0;c<=t;c++)l[c]=0;for(c=1;c<s;c+=2)l[e[c]]++;var f=a.next_code;for(r=0,l[0]=0,n=1;n<=t;n++)r=r+l[n-1]<<1,f[n]=r;for(i=0;i<s;i+=2)0!=(o=e[i+1])&&(e[i]=f[o],f[o]++)},M.F.codes2map=function(e,t,r){for(var n=e.length,i=M.F.U.rev15,o=0;o<n;o+=2)if(0!=e[o+1])for(var a=o>>1,s=e[o+1],l=a<<4|s,c=t-s,f=e[o]<<c,u=f+(1<<c);f!=u;)r[i[f]>>>15-t]=l,f++},M.F.revCodes=function(e,t){for(var r=M.F.U.rev15,n=15-t,i=0;i<e.length;i+=2){var o=e[i]<<t-e[i+1];e[i]=r[o]>>>n}},M.F._putsE=function(e,t,r){r<<=7&t;var n=t>>>3;e[n]|=r,e[n+1]|=r>>>8},M.F._putsF=function(e,t,r){r<<=7&t;var n=t>>>3;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},M.F._bitsE=function(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<r)-1},M.F._bitsF=function(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<r)-1},M.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},M.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},M.F.U=(E=Uint16Array,B=Uint32Array,{next_code:new E(16),bl_count:new E(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new E(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new B(32),flmap:new E(512),fltree:[],fdmap:new E(32),fdtree:[],lmap:new E(32768),ltree:[],ttree:[],dmap:new E(32768),dtree:[],imap:new E(512),itree:[],rev15:new E(32768),lhst:new B(286),dhst:new B(30),ihst:new B(19),lits:new B(15e3),strt:new E(65536),prev:new E(32768)}),function(){for(var e=M.F.U,t=0;t<32768;t++){var r=t;r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,e.rev15[t]=(r>>>16|r<<16)>>>17}function n(e,t,r){for(;0!=t--;)e.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];n(e.fltree,144,8),n(e.fltree,112,9),n(e.fltree,24,7),n(e.fltree,8,8),M.F.makeCodes(e.fltree,9),M.F.codes2map(e.fltree,9,e.flmap),M.F.revCodes(e.fltree,9),n(e.fdtree,32,5),M.F.makeCodes(e.fdtree,5),M.F.codes2map(e.fdtree,5,e.fdmap),M.F.revCodes(e.fdtree,5),n(e.itree,19,0),n(e.ltree,286,0),n(e.dtree,30,0),n(e.ttree,320,0)}();var z,I=(z={__proto__:null,default:x},[x].forEach(function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach(function(t){if("default"!==t&&!(t in z)){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(z,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}})}),Object.freeze(z));const _=function(){var e={nextZero(e,t){for(;0!=e[t];)t++;return t},readUshort:(e,t)=>e[t]<<8|e[t+1],writeUshort(e,t,r){e[t]=r>>8&255,e[t+1]=255&r},readUint:(e,t)=>16777216*e[t]+(e[t+1]<<16|e[t+2]<<8|e[t+3]),writeUint(e,t,r){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},readASCII(e,t,r){let n="";for(let i=0;i<r;i++)n+=String.fromCharCode(e[t+i]);return n},writeASCII(e,t,r){for(let n=0;n<r.length;n++)e[t+n]=r.charCodeAt(n)},readBytes(e,t,r){const n=[];for(let i=0;i<r;i++)n.push(e[t+i]);return n},pad:e=>e.length<2?`0${e}`:e,readUTF8(t,r,n){let i,o="";for(let s=0;s<n;s++)o+=`%${e.pad(t[r+s].toString(16))}`;try{i=decodeURIComponent(o)}catch(a){return e.readASCII(t,r,n)}return i}};function t(t,r,n,i){const a=r*n,s=o(i),l=Math.ceil(r*s/8),c=new Uint8Array(4*a),f=new Uint32Array(c.buffer),{ctype:u}=i,{depth:h}=i,d=e.readUshort;if(6==u){const e=a<<2;if(8==h)for(var p=0;p<e;p+=4)c[p]=t[p],c[p+1]=t[p+1],c[p+2]=t[p+2],c[p+3]=t[p+3];if(16==h)for(p=0;p<e;p++)c[p]=t[p<<1]}else if(2==u){const e=i.tabs.tRNS;if(null==e){if(8==h)for(p=0;p<a;p++){var m=3*p;f[p]=255<<24|t[m+2]<<16|t[m+1]<<8|t[m]}if(16==h)for(p=0;p<a;p++)m=6*p,f[p]=255<<24|t[m+4]<<16|t[m+2]<<8|t[m]}else{var g=e[0];const r=e[1],n=e[2];if(8==h)for(p=0;p<a;p++){var v=p<<2;m=3*p,f[p]=255<<24|t[m+2]<<16|t[m+1]<<8|t[m],t[m]==g&&t[m+1]==r&&t[m+2]==n&&(c[v+3]=0)}if(16==h)for(p=0;p<a;p++)v=p<<2,m=6*p,f[p]=255<<24|t[m+4]<<16|t[m+2]<<8|t[m],d(t,m)==g&&d(t,m+2)==r&&d(t,m+4)==n&&(c[v+3]=0)}}else if(3==u){const e=i.tabs.PLTE,o=i.tabs.tRNS,s=o?o.length:0;if(1==h)for(var b=0;b<n;b++){var w=b*l,y=b*r;for(p=0;p<r;p++){v=y+p<<2;var A=3*(U=t[w+(p>>3)]>>7-(7&p)&1);c[v]=e[A],c[v+1]=e[A+1],c[v+2]=e[A+2],c[v+3]=U<s?o[U]:255}}if(2==h)for(b=0;b<n;b++)for(w=b*l,y=b*r,p=0;p<r;p++)v=y+p<<2,A=3*(U=t[w+(p>>2)]>>6-((3&p)<<1)&3),c[v]=e[A],c[v+1]=e[A+1],c[v+2]=e[A+2],c[v+3]=U<s?o[U]:255;if(4==h)for(b=0;b<n;b++)for(w=b*l,y=b*r,p=0;p<r;p++)v=y+p<<2,A=3*(U=t[w+(p>>1)]>>4-((1&p)<<2)&15),c[v]=e[A],c[v+1]=e[A+1],c[v+2]=e[A+2],c[v+3]=U<s?o[U]:255;if(8==h)for(p=0;p<a;p++){var U;v=p<<2,A=3*(U=t[p]),c[v]=e[A],c[v+1]=e[A+1],c[v+2]=e[A+2],c[v+3]=U<s?o[U]:255}}else if(4==u){if(8==h)for(p=0;p<a;p++){v=p<<2;var F=t[C=p<<1];c[v]=F,c[v+1]=F,c[v+2]=F,c[v+3]=t[C+1]}if(16==h)for(p=0;p<a;p++){var C;v=p<<2,F=t[C=p<<2],c[v]=F,c[v+1]=F,c[v+2]=F,c[v+3]=t[C+2]}}else if(0==u)for(g=i.tabs.tRNS?i.tabs.tRNS:-1,b=0;b<n;b++){const e=b*l,n=b*r;if(1==h)for(var E=0;E<r;E++){var B=(F=255*(t[e+(E>>>3)]>>>7-(7&E)&1))==255*g?0:255;f[n+E]=B<<24|F<<16|F<<8|F}else if(2==h)for(E=0;E<r;E++)B=(F=85*(t[e+(E>>>2)]>>>6-((3&E)<<1)&3))==85*g?0:255,f[n+E]=B<<24|F<<16|F<<8|F;else if(4==h)for(E=0;E<r;E++)B=(F=17*(t[e+(E>>>1)]>>>4-((1&E)<<2)&15))==17*g?0:255,f[n+E]=B<<24|F<<16|F<<8|F;else if(8==h)for(E=0;E<r;E++)B=(F=t[e+E])==g?0:255,f[n+E]=B<<24|F<<16|F<<8|F;else if(16==h)for(E=0;E<r;E++)F=t[e+(E<<1)],B=d(t,e+(E<<1))==g?0:255,f[n+E]=B<<24|F<<16|F<<8|F}return c}function r(e,t,r,s){const l=o(e),c=Math.ceil(r*l/8),f=new Uint8Array((c+1+e.interlace)*s);return t=e.tabs.CgBI?i(t,f):n(t,f),0==e.interlace?t=a(t,e,0,r,s):1==e.interlace&&(t=function(e,t){const r=t.width,n=t.height,i=o(t),s=i>>3,l=Math.ceil(r*i/8),c=new Uint8Array(n*l);let f=0;const u=[0,0,4,0,2,0,1],h=[0,4,0,2,0,1,0],d=[8,8,8,4,4,2,2],p=[8,8,4,4,2,2,1];let m=0;for(;m<7;){const o=d[m],v=p[m];let b=0,w=0,y=u[m];for(;y<n;)y+=o,w++;let A=h[m];for(;A<r;)A+=v,b++;const U=Math.ceil(b*i/8);a(e,t,f,b,w);let F=0,C=u[m];for(;C<n;){let t=h[m],n=f+F*U<<3;for(;t<r;){var g;if(1==i&&(g=(g=e[n>>3])>>7-(7&n)&1,c[C*l+(t>>3)]|=g<<7-(7&t)),2==i&&(g=(g=e[n>>3])>>6-(7&n)&3,c[C*l+(t>>2)]|=g<<6-((3&t)<<1)),4==i&&(g=(g=e[n>>3])>>4-(7&n)&15,c[C*l+(t>>1)]|=g<<4-((1&t)<<2)),i>=8){const r=C*l+t*s;for(let t=0;t<s;t++)c[r+t]=e[(n>>3)+t]}n+=i,t+=v}F++,C+=o}b*w!=0&&(f+=w*(1+U)),m+=1}return c}(t,e)),t}function n(e,t){return i(new Uint8Array(e.buffer,2,e.length-6),t)}var i=function(){const e={H:{}};return e.H.N=function(t,r){const n=Uint8Array;let i,o,a=0,s=0,l=0,c=0,f=0,u=0,h=0,d=0,p=0;if(3==t[0]&&0==t[1])return r||new n(0);const m=e.H,g=m.b,v=m.e,b=m.R,w=m.n,y=m.A,A=m.Z,U=m.m,F=null==r;for(F&&(r=new n(t.length>>>2<<5));0==a;)if(a=g(t,p,1),s=g(t,p+1,2),p+=3,0!=s){if(F&&(r=e.H.W(r,d+(1<<17))),1==s&&(i=U.J,o=U.h,u=511,h=31),2==s){l=v(t,p,5)+257,c=v(t,p+5,5)+1,f=v(t,p+10,4)+4,p+=14;let e=1;for(var C=0;C<38;C+=2)U.Q[C]=0,U.Q[C+1]=0;for(C=0;C<f;C++){const r=v(t,p+3*C,3);U.Q[1+(U.X[C]<<1)]=r,r>e&&(e=r)}p+=3*f,w(U.Q,e),y(U.Q,e,U.u),i=U.w,o=U.d,p=b(U.u,(1<<e)-1,l+c,t,p,U.v);const r=m.V(U.v,0,l,U.C);u=(1<<r)-1;const n=m.V(U.v,l,c,U.D);h=(1<<n)-1,w(U.C,r),y(U.C,r,i),w(U.D,n),y(U.D,n,o)}for(;;){const e=i[A(t,p)&u];p+=15&e;const n=e>>>4;if(n>>>8==0)r[d++]=n;else{if(256==n)break;{let e=d+n-254;if(n>264){const r=U.q[n-257];e=d+(r>>>3)+v(t,p,7&r),p+=7&r}const i=o[A(t,p)&h];p+=15&i;const a=i>>>4,s=U.c[a],l=(s>>>4)+g(t,p,15&s);for(p+=15&s;d<e;)r[d]=r[d++-l],r[d]=r[d++-l],r[d]=r[d++-l],r[d]=r[d++-l];d=e}}}}else{7&p&&(p+=8-(7&p));const i=4+(p>>>3),o=t[i-4]|t[i-3]<<8;F&&(r=e.H.W(r,d+o)),r.set(new n(t.buffer,t.byteOffset+i,o),d),p=i+o<<3,d+=o}return r.length==d?r:r.slice(0,d)},e.H.W=function(e,t){const r=e.length;if(t<=r)return e;const n=new Uint8Array(r<<1);return n.set(e,0),n},e.H.R=function(t,r,n,i,o,a){const s=e.H.e,l=e.H.Z;let c=0;for(;c<n;){const e=t[l(i,o)&r];o+=15&e;const n=e>>>4;if(n<=15)a[c]=n,c++;else{let e=0,t=0;16==n?(t=3+s(i,o,2),o+=2,e=a[c-1]):17==n?(t=3+s(i,o,3),o+=3):18==n&&(t=11+s(i,o,7),o+=7);const r=c+t;for(;c<r;)a[c]=e,c++}}return o},e.H.V=function(e,t,r,n){let i=0,o=0;const a=n.length>>>1;for(;o<r;){const r=e[o+t];n[o<<1]=0,n[1+(o<<1)]=r,r>i&&(i=r),o++}for(;o<a;)n[o<<1]=0,n[1+(o<<1)]=0,o++;return i},e.H.n=function(t,r){const n=e.H.m,i=t.length;let o,a,s,l;const c=n.j;for(var f=0;f<=r;f++)c[f]=0;for(f=1;f<i;f+=2)c[t[f]]++;const u=n.K;for(o=0,c[0]=0,a=1;a<=r;a++)o=o+c[a-1]<<1,u[a]=o;for(s=0;s<i;s+=2)l=t[s+1],0!=l&&(t[s]=u[l],u[l]++)},e.H.A=function(t,r,n){const i=t.length,o=e.H.m.r;for(let e=0;e<i;e+=2)if(0!=t[e+1]){const i=e>>1,a=t[e+1],s=i<<4|a,l=r-a;let c=t[e]<<l;const f=c+(1<<l);for(;c!=f;)n[o[c]>>>15-r]=s,c++}},e.H.l=function(t,r){const n=e.H.m.r,i=15-r;for(let e=0;e<t.length;e+=2){const o=t[e]<<r-t[e+1];t[e]=n[o]>>>i}},e.H.M=function(e,t,r){r<<=7&t;const n=t>>>3;e[n]|=r,e[n+1]|=r>>>8},e.H.I=function(e,t,r){r<<=7&t;const n=t>>>3;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},e.H.e=function(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<r)-1},e.H.b=function(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<r)-1},e.H.Z=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},e.H.i=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},e.H.m=function(){const e=Uint16Array,t=Uint32Array;return{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new t(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new t(286),Y:new t(30),a:new t(19),t:new t(15e3),k:new e(65536),g:new e(32768)}}(),function(){const t=e.H.m;for(var r=0;r<32768;r++){let e=r;e=(2863311530&e)>>>1|(1431655765&e)<<1,e=(3435973836&e)>>>2|(858993459&e)<<2,e=(4042322160&e)>>>4|(252645135&e)<<4,e=(4278255360&e)>>>8|(16711935&e)<<8,t.r[r]=(e>>>16|e<<16)>>>17}function n(e,t,r){for(;0!=t--;)e.push(0,r)}for(r=0;r<32;r++)t.q[r]=t.S[r]<<3|t.T[r],t.c[r]=t.p[r]<<4|t.z[r];n(t._,144,8),n(t._,112,9),n(t._,24,7),n(t._,8,8),e.H.n(t._,9),e.H.A(t._,9,t.J),e.H.l(t._,9),n(t.$,32,5),e.H.n(t.$,5),e.H.A(t.$,5,t.h),e.H.l(t.$,5),n(t.Q,19,0),n(t.C,286,0),n(t.D,30,0),n(t.v,320,0)}(),e.H.N}();function o(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth}function a(e,t,r,n,i){let a=o(t);const l=Math.ceil(n*a/8);let c,f;a=Math.ceil(a/8);let u=e[r],h=0;if(u>1&&(e[r]=[0,0,1][u-2]),3==u)for(h=a;h<l;h++)e[h+1]=e[h+1]+(e[h+1-a]>>>1)&255;for(let o=0;o<i;o++)if(c=r+o*l,f=c+o+1,u=e[f-1],h=0,0==u)for(;h<l;h++)e[c+h]=e[f+h];else if(1==u){for(;h<a;h++)e[c+h]=e[f+h];for(;h<l;h++)e[c+h]=e[f+h]+e[c+h-a]}else if(2==u)for(;h<l;h++)e[c+h]=e[f+h]+e[c+h-l];else if(3==u){for(;h<a;h++)e[c+h]=e[f+h]+(e[c+h-l]>>>1);for(;h<l;h++)e[c+h]=e[f+h]+(e[c+h-l]+e[c+h-a]>>>1)}else{for(;h<a;h++)e[c+h]=e[f+h]+s(0,e[c+h-l],0);for(;h<l;h++)e[c+h]=e[f+h]+s(e[c+h-a],e[c+h-l],e[c+h-a-l])}return e}function s(e,t,r){const n=e+t-r,i=n-e,o=n-t,a=n-r;return i*i<=o*o&&i*i<=a*a?e:o*o<=a*a?t:r}function l(t,r,n){n.width=e.readUint(t,r),r+=4,n.height=e.readUint(t,r),r+=4,n.depth=t[r],r++,n.ctype=t[r],r++,n.compress=t[r],r++,n.filter=t[r],r++,n.interlace=t[r],r++}function c(e,t,r,n,i,o,a,s,l){const c=Math.min(t,i),f=Math.min(r,o);let u=0,h=0;for(let A=0;A<f;A++)for(let r=0;r<c;r++)if(a>=0&&s>=0?(u=A*t+r<<2,h=(s+A)*i+a+r<<2):(u=(-s+A)*t-a+r<<2,h=A*i+r<<2),0==l)n[h]=e[u],n[h+1]=e[u+1],n[h+2]=e[u+2],n[h+3]=e[u+3];else if(1==l){var d=e[u+3]*(1/255),p=e[u]*d,m=e[u+1]*d,g=e[u+2]*d,v=n[h+3]*(1/255),b=n[h]*v,w=n[h+1]*v,y=n[h+2]*v;const t=1-d,r=d+v*t,i=0==r?0:1/r;n[h+3]=255*r,n[h+0]=(p+b*t)*i,n[h+1]=(m+w*t)*i,n[h+2]=(g+y*t)*i}else if(2==l)d=e[u+3],p=e[u],m=e[u+1],g=e[u+2],v=n[h+3],b=n[h],w=n[h+1],y=n[h+2],d==v&&p==b&&m==w&&g==y?(n[h]=0,n[h+1]=0,n[h+2]=0,n[h+3]=0):(n[h]=p,n[h+1]=m,n[h+2]=g,n[h+3]=d);else if(3==l){if(d=e[u+3],p=e[u],m=e[u+1],g=e[u+2],v=n[h+3],b=n[h],w=n[h+1],y=n[h+2],d==v&&p==b&&m==w&&g==y)continue;if(d<220&&v>20)return!1}return!0}return{decode:function(t){const o=new Uint8Array(t);let a=8;const s=e,c=s.readUshort,f=s.readUint,u={tabs:{},frames:[]},h=new Uint8Array(o.length);let d,p=0,m=0;const g=[137,80,78,71,13,10,26,10];for(var v=0;v<8;v++)if(o[v]!=g[v])throw"The input is not a PNG file!";for(;a<o.length;){const e=s.readUint(o,a);a+=4;const t=s.readASCII(o,a,4);if(a+=4,"IHDR"==t)l(o,a,u);else if("iCCP"==t){for(var b=a;0!=o[b];)b++;s.readASCII(o,a,b-a),o[b+1];const r=o.slice(b+2,a+e);let l=null;try{l=n(r)}catch(E){l=i(r)}u.tabs[t]=l}else if("CgBI"==t)u.tabs[t]=o.slice(a,a+4);else if("IDAT"==t){for(v=0;v<e;v++)h[p+v]=o[a+v];p+=e}else if("acTL"==t)u.tabs[t]={num_frames:f(o,a),num_plays:f(o,a+4)},d=new Uint8Array(o.length);else if("fcTL"==t){0!=m&&((C=u.frames[u.frames.length-1]).data=r(u,d.slice(0,m),C.rect.width,C.rect.height),m=0);const e={x:f(o,a+12),y:f(o,a+16),width:f(o,a+4),height:f(o,a+8)};let t=c(o,a+22);t=c(o,a+20)/(0==t?100:t);const n={rect:e,delay:Math.round(1e3*t),dispose:o[a+24],blend:o[a+25]};u.frames.push(n)}else if("fdAT"==t){for(v=0;v<e-4;v++)d[m+v]=o[a+v+4];m+=e-4}else if("pHYs"==t)u.tabs[t]=[s.readUint(o,a),s.readUint(o,a+4),o[a+8]];else if("cHRM"==t)for(u.tabs[t]=[],v=0;v<8;v++)u.tabs[t].push(s.readUint(o,a+4*v));else if("tEXt"==t||"zTXt"==t){null==u.tabs[t]&&(u.tabs[t]={});var w=s.nextZero(o,a),y=s.readASCII(o,a,w-a),A=a+e-w-1;if("tEXt"==t)F=s.readASCII(o,w+1,A);else{var U=n(o.slice(w+2,w+2+A));F=s.readUTF8(U,0,U.length)}u.tabs[t][y]=F}else if("iTXt"==t){null==u.tabs[t]&&(u.tabs[t]={}),w=0,b=a,w=s.nextZero(o,b),y=s.readASCII(o,b,w-b);const r=o[b=w+1];var F;o[b+1],b+=2,w=s.nextZero(o,b),s.readASCII(o,b,w-b),b=w+1,w=s.nextZero(o,b),s.readUTF8(o,b,w-b),A=e-((b=w+1)-a),0==r?F=s.readUTF8(o,b,A):(U=n(o.slice(b,b+A)),F=s.readUTF8(U,0,U.length)),u.tabs[t][y]=F}else if("PLTE"==t)u.tabs[t]=s.readBytes(o,a,e);else if("hIST"==t){const e=u.tabs.PLTE.length/3;for(u.tabs[t]=[],v=0;v<e;v++)u.tabs[t].push(c(o,a+2*v))}else if("tRNS"==t)3==u.ctype?u.tabs[t]=s.readBytes(o,a,e):0==u.ctype?u.tabs[t]=c(o,a):2==u.ctype&&(u.tabs[t]=[c(o,a),c(o,a+2),c(o,a+4)]);else if("gAMA"==t)u.tabs[t]=s.readUint(o,a)/1e5;else if("sRGB"==t)u.tabs[t]=o[a];else if("bKGD"==t)0==u.ctype||4==u.ctype?u.tabs[t]=[c(o,a)]:2==u.ctype||6==u.ctype?u.tabs[t]=[c(o,a),c(o,a+2),c(o,a+4)]:3==u.ctype&&(u.tabs[t]=o[a]);else if("IEND"==t)break;a+=e,s.readUint(o,a),a+=4}var C;return 0!=m&&((C=u.frames[u.frames.length-1]).data=r(u,d.slice(0,m),C.rect.width,C.rect.height)),u.data=r(u,h,u.width,u.height),delete u.compress,delete u.interlace,delete u.filter,u},toRGBA8:function(e){const r=e.width,n=e.height;if(null==e.tabs.acTL)return[t(e.data,r,n,e).buffer];const i=[];null==e.frames[0].data&&(e.frames[0].data=e.data);const o=r*n*4,a=new Uint8Array(o),s=new Uint8Array(o),l=new Uint8Array(o);for(let u=0;u<e.frames.length;u++){const h=e.frames[u],d=h.rect.x,p=h.rect.y,m=h.rect.width,g=h.rect.height,v=t(h.data,m,g,e);if(0!=u)for(var f=0;f<o;f++)l[f]=a[f];if(0==h.blend?c(v,m,g,a,r,n,d,p,0):1==h.blend&&c(v,m,g,a,r,n,d,p,1),i.push(a.buffer.slice(0)),0==h.dispose);else if(1==h.dispose)c(s,m,g,a,r,n,d,p,0);else if(2==h.dispose)for(f=0;f<o;f++)a[f]=l[f]}return i},_paeth:s,_copyTile:c,_bin:e}}();!function(){const{_copyTile:e}=_,{_bin:t}=_,r=_._paeth;var n={table:function(){const e=new Uint32Array(256);for(let t=0;t<256;t++){let r=t;for(let e=0;e<8;e++)1&r?r=3988292384^r>>>1:r>>>=1;e[t]=r}return e}(),update(e,t,r,i){for(let o=0;o<i;o++)e=n.table[255&(e^t[r+o])]^e>>>8;return e},crc:(e,t,r)=>4294967295^n.update(4294967295,e,t,r)};function i(e,t,r,n){t[r]+=e[0]*n>>4,t[r+1]+=e[1]*n>>4,t[r+2]+=e[2]*n>>4,t[r+3]+=e[3]*n>>4}function o(e){return Math.max(0,Math.min(255,e))}function a(e,t){const r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+i*i+o*o}function s(e,t,r,n,s,l,c){null==c&&(c=1);const f=n.length,u=[];for(var h=0;h<f;h++){const e=n[h];u.push([e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255])}for(h=0;h<f;h++){let e=4294967295;for(var d=0,p=0;p<f;p++){var m=a(u[h],u[p]);p!=h&&m<e&&(e=m,d=p)}}const g=new Uint32Array(s.buffer),v=new Int16Array(t*r*4),b=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(h=0;h<b.length;h++)b[h]=255*((b[h]+.5)/16-.5);for(let y=0;y<r;y++)for(let s=0;s<t;s++){var w;h=4*(y*t+s),2!=c?w=[o(e[h]+v[h]),o(e[h+1]+v[h+1]),o(e[h+2]+v[h+2]),o(e[h+3]+v[h+3])]:(m=b[4*(3&y)+(3&s)],w=[o(e[h]+m),o(e[h+1]+m),o(e[h+2]+m),o(e[h+3]+m)]),d=0;let A=16777215;for(p=0;p<f;p++){const e=a(w,u[p]);e<A&&(A=e,d=p)}const U=u[d],F=[w[0]-U[0],w[1]-U[1],w[2]-U[2],w[3]-U[3]];1==c&&(s!=t-1&&i(F,v,h+4,7),y!=r-1&&(0!=s&&i(F,v,h+4*t-4,3),i(F,v,h+4*t,5),s!=t-1&&i(F,v,h+4*t+4,1))),l[h>>2]=d,g[h>>2]=n[d]}}function l(e,r,i,o,a){null==a&&(a={});const{crc:s}=n,l=t.writeUint,c=t.writeUshort,f=t.writeASCII;let u=8;const h=e.frames.length>1;let d,p=!1,m=33+(h?20:0);if(null!=a.sRGB&&(m+=13),null!=a.pHYs&&(m+=21),null!=a.iCCP&&(d=pako.deflate(a.iCCP),m+=21+d.length+4),3==e.ctype){for(var g=e.plte.length,v=0;v<g;v++)e.plte[v]>>>24!=255&&(p=!0);m+=8+3*g+4+(p?8+1*g+4:0)}for(var b=0;b<e.frames.length;b++)h&&(m+=38),m+=(U=e.frames[b]).cimg.length+12,0!=b&&(m+=4);m+=12;const w=new Uint8Array(m),y=[137,80,78,71,13,10,26,10];for(v=0;v<8;v++)w[v]=y[v];if(l(w,u,13),u+=4,f(w,u,"IHDR"),u+=4,l(w,u,r),u+=4,l(w,u,i),u+=4,w[u]=e.depth,u++,w[u]=e.ctype,u++,w[u]=0,u++,w[u]=0,u++,w[u]=0,u++,l(w,u,s(w,u-17,17)),u+=4,null!=a.sRGB&&(l(w,u,1),u+=4,f(w,u,"sRGB"),u+=4,w[u]=a.sRGB,u++,l(w,u,s(w,u-5,5)),u+=4),null!=a.iCCP){const e=13+d.length;l(w,u,e),u+=4,f(w,u,"iCCP"),u+=4,f(w,u,"ICC profile"),u+=11,u+=2,w.set(d,u),u+=d.length,l(w,u,s(w,u-(e+4),e+4)),u+=4}if(null!=a.pHYs&&(l(w,u,9),u+=4,f(w,u,"pHYs"),u+=4,l(w,u,a.pHYs[0]),u+=4,l(w,u,a.pHYs[1]),u+=4,w[u]=a.pHYs[2],u++,l(w,u,s(w,u-13,13)),u+=4),h&&(l(w,u,8),u+=4,f(w,u,"acTL"),u+=4,l(w,u,e.frames.length),u+=4,l(w,u,null!=a.loop?a.loop:0),u+=4,l(w,u,s(w,u-12,12)),u+=4),3==e.ctype){for(l(w,u,3*(g=e.plte.length)),u+=4,f(w,u,"PLTE"),u+=4,v=0;v<g;v++){const t=3*v,r=e.plte[v],n=255&r,i=r>>>8&255,o=r>>>16&255;w[u+t+0]=n,w[u+t+1]=i,w[u+t+2]=o}if(u+=3*g,l(w,u,s(w,u-3*g-4,3*g+4)),u+=4,p){for(l(w,u,g),u+=4,f(w,u,"tRNS"),u+=4,v=0;v<g;v++)w[u+v]=e.plte[v]>>>24&255;u+=g,l(w,u,s(w,u-g-4,g+4)),u+=4}}let A=0;for(b=0;b<e.frames.length;b++){var U=e.frames[b];h&&(l(w,u,26),u+=4,f(w,u,"fcTL"),u+=4,l(w,u,A++),u+=4,l(w,u,U.rect.width),u+=4,l(w,u,U.rect.height),u+=4,l(w,u,U.rect.x),u+=4,l(w,u,U.rect.y),u+=4,c(w,u,o[b]),u+=2,c(w,u,1e3),u+=2,w[u]=U.dispose,u++,w[u]=U.blend,u++,l(w,u,s(w,u-30,30)),u+=4);const t=U.cimg;l(w,u,(g=t.length)+(0==b?0:4)),u+=4;const r=u;f(w,u,0==b?"IDAT":"fdAT"),u+=4,0!=b&&(l(w,u,A++),u+=4),w.set(t,u),u+=g,l(w,u,s(w,r,u-r)),u+=4}return l(w,u,0),u+=4,f(w,u,"IEND"),u+=4,l(w,u,s(w,u-4,4)),u+=4,w.buffer}function c(e,t,r){for(let n=0;n<e.frames.length;n++){const i=e.frames[n];i.rect.width;const o=i.rect.height,a=new Uint8Array(o*i.bpl+o);i.cimg=d(i.img,o,i.bpp,i.bpl,a,t,r)}}function f(t,r,n,i,o){const a=o[0],l=o[1],c=o[2],f=o[3],d=o[4],p=o[5];let g=6,v=8,b=255;for(var w=0;w<t.length;w++){const e=new Uint8Array(t[w]);for(var y=e.length,A=0;A<y;A+=4)b&=e[A+3]}const U=255!=b,F=function(t,r,n,i,o,a){const s=[];for(var l=0;l<t.length;l++){const u=new Uint8Array(t[l]),d=new Uint32Array(u.buffer);var c;let m=0,g=0,v=r,b=n,w=i?1:0;if(0!=l){const y=a||i||1==l||0!=s[l-2].dispose?1:2;let A=0,U=1e9;for(let e=0;e<y;e++){var f=new Uint8Array(t[l-1-e]);const i=new Uint32Array(t[l-1-e]);let a=r,s=n,c=-1,u=-1;for(let e=0;e<n;e++)for(let t=0;t<r;t++)d[p=e*r+t]!=i[p]&&(t<a&&(a=t),t>c&&(c=t),e<s&&(s=e),e>u&&(u=e));-1==c&&(a=s=c=u=0),o&&(!(1&~a)&&a--,!(1&~s)&&s--);const h=(c-a+1)*(u-s+1);h<U&&(U=h,A=e,m=a,g=s,v=c-a+1,b=u-s+1)}f=new Uint8Array(t[l-1-A]),1==A&&(s[l-1].dispose=2),c=new Uint8Array(v*b*4),e(f,r,n,c,v,b,-m,-g,0),w=e(u,r,n,c,v,b,-m,-g,3)?1:0,1==w?h(u,r,n,c,{x:m,y:g,width:v,height:b}):e(u,r,n,c,v,b,-m,-g,0)}else c=u.slice(0);s.push({rect:{x:m,y:g,width:v,height:b},img:c,blend:w,dispose:0})}if(i)for(l=0;l<s.length;l++){if(1==(m=s[l]).blend)continue;const e=m.rect,i=s[l-1].rect,a=Math.min(e.x,i.x),c=Math.min(e.y,i.y),f={x:a,y:c,width:Math.max(e.x+e.width,i.x+i.width)-a,height:Math.max(e.y+e.height,i.y+i.height)-c};s[l-1].dispose=1,l-1!=0&&u(t,r,n,s,l-1,f,o),u(t,r,n,s,l,f,o)}let d=0;if(1!=t.length)for(var p=0;p<s.length;p++){var m;d+=(m=s[p]).rect.width*m.rect.height}return s}(t,r,n,a,l,c),C={},E=[],B=[];if(0!=i){const e=[];for(A=0;A<F.length;A++)e.push(F[A].img.buffer);const t=m(function(e){let t=0;for(var r=0;r<e.length;r++)t+=e[r].byteLength;const n=new Uint8Array(t);let i=0;for(r=0;r<e.length;r++){const t=new Uint8Array(e[r]),o=t.length;for(let e=0;e<o;e+=4){let r=t[e],o=t[e+1],a=t[e+2];const s=t[e+3];0==s&&(r=o=a=0),n[i+e]=r,n[i+e+1]=o,n[i+e+2]=a,n[i+e+3]=s}i+=o}return n.buffer}(e),i);for(A=0;A<t.plte.length;A++)E.push(t.plte[A].est.rgba);let r=0;for(A=0;A<F.length;A++){const e=(x=F[A]).img.length;var M=new Uint8Array(t.inds.buffer,r>>2,e>>2);B.push(M);const n=new Uint8Array(t.abuf,r,e);p&&s(x.img,x.rect.width,x.rect.height,E,n,M),x.img.set(n),r+=e}}else for(w=0;w<F.length;w++){var x=F[w];const e=new Uint32Array(x.img.buffer);var T=x.rect.width;for(y=e.length,M=new Uint8Array(y),B.push(M),A=0;A<y;A++){const t=e[A];if(0!=A&&t==e[A-1])M[A]=M[A-1];else if(A>T&&t==e[A-T])M[A]=M[A-T];else{let e=C[t];if(null==e&&(C[t]=e=E.length,E.push(t),E.length>=300))break;M[A]=e}}}const z=E.length;for(z<=256&&0==d&&(v=z<=2?1:z<=4?2:z<=16?4:8,v=Math.max(v,f)),w=0;w<F.length;w++){(x=F[w]).rect.x,x.rect.y,T=x.rect.width;const e=x.rect.height;let t=x.img;new Uint32Array(t.buffer);let r=4*T,n=4;if(z<=256&&0==d){r=Math.ceil(v*T/8);var I=new Uint8Array(r*e);const i=B[w];for(let t=0;t<e;t++){A=t*r;const e=t*T;if(8==v)for(var _=0;_<T;_++)I[A+_]=i[e+_];else if(4==v)for(_=0;_<T;_++)I[A+(_>>1)]|=i[e+_]<<4-4*(1&_);else if(2==v)for(_=0;_<T;_++)I[A+(_>>2)]|=i[e+_]<<6-2*(3&_);else if(1==v)for(_=0;_<T;_++)I[A+(_>>3)]|=i[e+_]<<7-1*(7&_)}t=I,g=3,n=1}else if(0==U&&1==F.length){I=new Uint8Array(T*e*3);const i=T*e;for(A=0;A<i;A++){const e=3*A,r=4*A;I[e]=t[r],I[e+1]=t[r+1],I[e+2]=t[r+2]}t=I,g=2,n=3,r=3*T}x.img=t,x.bpl=r,x.bpp=n}return{ctype:g,depth:v,plte:E,frames:F}}function u(t,r,n,i,o,a,s){const l=Uint8Array,c=Uint32Array,f=new l(t[o-1]),u=new c(t[o-1]),d=o+1<t.length?new l(t[o+1]):null,p=new l(t[o]),m=new c(p.buffer);let g=r,v=n,b=-1,w=-1;for(let e=0;e<a.height;e++)for(let t=0;t<a.width;t++){const n=a.x+t,s=a.y+e,l=s*r+n,c=m[l];0==c||0==i[o-1].dispose&&u[l]==c&&(null==d||0!=d[4*l+3])||(n<g&&(g=n),n>b&&(b=n),s<v&&(v=s),s>w&&(w=s))}-1==b&&(g=v=b=w=0),s&&(!(1&~g)&&g--,!(1&~v)&&v--),a={x:g,y:v,width:b-g+1,height:w-v+1};const y=i[o];y.rect=a,y.blend=1,y.img=new Uint8Array(a.width*a.height*4),0==i[o-1].dispose?(e(f,r,n,y.img,a.width,a.height,-a.x,-a.y,0),h(p,r,n,y.img,a)):e(p,r,n,y.img,a.width,a.height,-a.x,-a.y,0)}function h(t,r,n,i,o){e(t,r,n,i,o.width,o.height,-o.x,-o.y,2)}function d(e,t,r,n,i,o,a){const s=[];let l,c=[0,1,2,3,4];-1!=o?c=[o]:(t*n>5e5||1==r)&&(c=[0]),a&&(l={level:0});const f=I;for(var u=0;u<c.length;u++){for(let o=0;o<t;o++)p(i,e,o,n,r,c[u]);s.push(f.deflate(i,l))}let h,d=1e9;for(u=0;u<s.length;u++)s[u].length<d&&(h=u,d=s[u].length);return s[h]}function p(e,t,n,i,o,a){const s=n*i;let l=s+n;if(e[l]=a,l++,0==a)if(i<500)for(var c=0;c<i;c++)e[l+c]=t[s+c];else e.set(new Uint8Array(t.buffer,s,i),l);else if(1==a){for(c=0;c<o;c++)e[l+c]=t[s+c];for(c=o;c<i;c++)e[l+c]=t[s+c]-t[s+c-o]+256&255}else if(0==n){for(c=0;c<o;c++)e[l+c]=t[s+c];if(2==a)for(c=o;c<i;c++)e[l+c]=t[s+c];if(3==a)for(c=o;c<i;c++)e[l+c]=t[s+c]-(t[s+c-o]>>1)+256&255;if(4==a)for(c=o;c<i;c++)e[l+c]=t[s+c]-r(t[s+c-o],0,0)+256&255}else{if(2==a)for(c=0;c<i;c++)e[l+c]=t[s+c]+256-t[s+c-i]&255;if(3==a){for(c=0;c<o;c++)e[l+c]=t[s+c]+256-(t[s+c-i]>>1)&255;for(c=o;c<i;c++)e[l+c]=t[s+c]+256-(t[s+c-i]+t[s+c-o]>>1)&255}if(4==a){for(c=0;c<o;c++)e[l+c]=t[s+c]+256-r(0,t[s+c-i],0)&255;for(c=o;c<i;c++)e[l+c]=t[s+c]+256-r(t[s+c-o],t[s+c-i],t[s+c-o-i])&255}}}function m(e,t){const r=new Uint8Array(e),n=r.slice(0),i=new Uint32Array(n.buffer),o=g(n,t),a=o[0],s=o[1],l=r.length,c=new Uint8Array(l>>2);let f;if(r.length<2e7)for(var u=0;u<l;u+=4)f=v(a,h=r[u]*(1/255),d=r[u+1]*(1/255),p=r[u+2]*(1/255),m=r[u+3]*(1/255)),c[u>>2]=f.ind,i[u>>2]=f.est.rgba;else for(u=0;u<l;u+=4){var h=r[u]*(1/255),d=r[u+1]*(1/255),p=r[u+2]*(1/255),m=r[u+3]*(1/255);for(f=a;f.left;)f=b(f.est,h,d,p,m)<=0?f.left:f.right;c[u>>2]=f.ind,i[u>>2]=f.est.rgba}return{abuf:n.buffer,inds:c,plte:s}}function g(e,t,r){null==r&&(r=1e-4);const n=new Uint32Array(e.buffer),i={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};i.bst=A(e,i.i0,i.i1),i.est=U(i.bst);const o=[i];for(;o.length<t;){let t=0,i=0;for(var a=0;a<o.length;a++)o[a].est.L>t&&(t=o[a].est.L,i=a);if(t<r)break;const s=o[i],l=w(e,n,s.i0,s.i1,s.est.e,s.est.eMq255);if(s.i0>=l||s.i1<=l){s.est.L=0;continue}const c={i0:s.i0,i1:l,bst:null,est:null,tdst:0,left:null,right:null};c.bst=A(e,c.i0,c.i1),c.est=U(c.bst);const f={i0:l,i1:s.i1,bst:null,est:null,tdst:0,left:null,right:null};for(f.bst={R:[],m:[],N:s.bst.N-c.bst.N},a=0;a<16;a++)f.bst.R[a]=s.bst.R[a]-c.bst.R[a];for(a=0;a<4;a++)f.bst.m[a]=s.bst.m[a]-c.bst.m[a];f.est=U(f.bst),s.left=c,s.right=f,o[i]=c,o.push(f)}for(o.sort((e,t)=>t.bst.N-e.bst.N),a=0;a<o.length;a++)o[a].ind=a;return[i,o]}function v(e,t,r,n,i){if(null==e.left)return e.tdst=function(e,t,r,n,i){const o=t-e[0],a=r-e[1],s=n-e[2],l=i-e[3];return o*o+a*a+s*s+l*l}(e.est.q,t,r,n,i),e;const o=b(e.est,t,r,n,i);let a=e.left,s=e.right;o>0&&(a=e.right,s=e.left);const l=v(a,t,r,n,i);if(l.tdst<=o*o)return l;const c=v(s,t,r,n,i);return c.tdst<l.tdst?c:l}function b(e,t,r,n,i){const{e:o}=e;return o[0]*t+o[1]*r+o[2]*n+o[3]*i-e.eMq}function w(e,t,r,n,i,o){for(n-=4;r<n;){for(;y(e,r,i)<=o;)r+=4;for(;y(e,n,i)>o;)n-=4;if(r>=n)break;const a=t[r>>2];t[r>>2]=t[n>>2],t[n>>2]=a,r+=4,n-=4}for(;y(e,r,i)>o;)r-=4;return r+4}function y(e,t,r){return e[t]*r[0]+e[t+1]*r[1]+e[t+2]*r[2]+e[t+3]*r[3]}function A(e,t,r){const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],o=r-t>>2;for(let a=t;a<r;a+=4){const t=e[a]*(1/255),r=e[a+1]*(1/255),o=e[a+2]*(1/255),s=e[a+3]*(1/255);i[0]+=t,i[1]+=r,i[2]+=o,i[3]+=s,n[0]+=t*t,n[1]+=t*r,n[2]+=t*o,n[3]+=t*s,n[5]+=r*r,n[6]+=r*o,n[7]+=r*s,n[10]+=o*o,n[11]+=o*s,n[15]+=s*s}return n[4]=n[1],n[8]=n[2],n[9]=n[6],n[12]=n[3],n[13]=n[7],n[14]=n[11],{R:n,m:i,N:o}}function U(e){const{R:t}=e,{m:r}=e,{N:n}=e,i=r[0],o=r[1],a=r[2],s=r[3],l=0==n?0:1/n,c=[t[0]-i*i*l,t[1]-i*o*l,t[2]-i*a*l,t[3]-i*s*l,t[4]-o*i*l,t[5]-o*o*l,t[6]-o*a*l,t[7]-o*s*l,t[8]-a*i*l,t[9]-a*o*l,t[10]-a*a*l,t[11]-a*s*l,t[12]-s*i*l,t[13]-s*o*l,t[14]-s*a*l,t[15]-s*s*l],f=c,u=F;let h=[Math.random(),Math.random(),Math.random(),Math.random()],d=0,p=0;if(0!=n)for(let g=0;g<16&&(h=u.multVec(f,h),p=Math.sqrt(u.dot(h,h)),h=u.sml(1/p,h),!(0!=g&&Math.abs(p-d)<1e-9));g++)d=p;const m=[i*l,o*l,a*l,s*l];return{Cov:c,q:m,e:h,L:d,eMq255:u.dot(u.sml(255,m),h),eMq:u.dot(h,m),rgba:(Math.round(255*m[3])<<24|Math.round(255*m[2])<<16|Math.round(255*m[1])<<8|Math.round(255*m[0]))>>>0}}var F={multVec:(e,t)=>[e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],e[4]*t[0]+e[5]*t[1]+e[6]*t[2]+e[7]*t[3],e[8]*t[0]+e[9]*t[1]+e[10]*t[2]+e[11]*t[3],e[12]*t[0]+e[13]*t[1]+e[14]*t[2]+e[15]*t[3]],dot:(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],sml:(e,t)=>[e*t[0],e*t[1],e*t[2],e*t[3]]};_.encode=function(e,t,r,n,i,o,a){null==n&&(n=0),null==a&&(a=!1);const s=f(e,t,r,n,[!1,!1,!1,0,a,!1]);return c(s,-1),l(s,t,r,i,o)},_.encodeLL=function(e,t,r,n,i,o,a,s){const f={ctype:0+(1==n?0:2)+(0==i?0:4),depth:o,frames:[]},u=(n+i)*o,h=u*t;for(let l=0;l<e.length;l++)f.frames.push({rect:{x:0,y:0,width:t,height:r},img:new Uint8Array(e[l]),blend:0,dispose:1,bpp:Math.ceil(u/8),bpl:Math.ceil(h/8)});return c(f,0,!0),l(f,t,r,a,s)},_.encode.compress=f,_.encode.dither=s,_.quantize=m,_.quantize.getKDtree=g,_.quantize.getNearest=v}();const S={toArrayBuffer(e,t){const r=e.width,n=e.height,i=r<<2,o=e.getContext("2d").getImageData(0,0,r,n),a=new Uint32Array(o.data.buffer),s=(32*r+31)/32<<2,l=s*n,c=122+l,f=new ArrayBuffer(c),u=new DataView(f),h=1<<20;let d,p,m,g,v=h,b=0,w=0,y=0;function A(e){u.setUint16(w,e,!0),w+=2}function U(e){u.setUint32(w,e,!0),w+=4}function F(e){w+=e}A(19778),U(c),F(4),U(122),U(108),U(r),U(-n>>>0),A(1),A(32),U(3),U(l),U(2835),U(2835),F(8),U(16711680),U(65280),U(255),U(4278190080),U(1466527264),function e(){for(;b<n&&v>0;){for(g=122+b*s,d=0;d<i;)v--,p=a[y++],m=p>>>24,u.setUint32(g+d,p<<8|m),d+=4;b++}y<a.length?(v=h,setTimeout(e,S._dly)):t(f)}()},toBlob(e,t){this.toArrayBuffer(e,e=>{t(new Blob([e],{type:"image/bmp"}))})},_dly:9};var R={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},k={[R.CHROME]:16384,[R.FIREFOX]:11180,[R.DESKTOP_SAFARI]:16384,[R.IE]:8192,[R.IOS]:4096,[R.ETC]:8192};const O="undefined"!=typeof window,P="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,D=O&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),L=(O||P)&&(D&&D.getOriginalSymbol(window,"File")||"undefined"!=typeof File&&File),W=(O||P)&&(D&&D.getOriginalSymbol(window,"FileReader")||"undefined"!=typeof FileReader&&FileReader);function H(e,t,r=Date.now()){return new Promise(n=>{const i=e.split(","),o=i[0].match(/:(.*?);/)[1],a=globalThis.atob(i[1]);let s=a.length;const l=new Uint8Array(s);for(;s--;)l[s]=a.charCodeAt(s);const c=new Blob([l],{type:o});c.name=t,c.lastModified=r,n(c)})}function j(e){return new Promise((t,r)=>{const n=new W;n.onload=()=>t(n.result),n.onerror=e=>r(e),n.readAsDataURL(e)})}function Q(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>t(n),n.onerror=e=>r(e),n.src=e})}function $(){if(void 0!==$.cachedResult)return $.cachedResult;let e=R.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=R.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=R.IOS:/Safari/i.test(t)?e=R.DESKTOP_SAFARI:/Firefox/i.test(t)?e=R.FIREFOX:(/MSIE/i.test(t)||1==!!document.documentMode)&&(e=R.IE),$.cachedResult=e,$.cachedResult}function q(e,t){const r=$(),n=k[r];let i=e,o=t,a=i*o;const s=i>o?o/i:i/o;for(;a>n*n;){const e=(n+i)/2,t=(n+o)/2;e<t?(o=t,i=t*s):(o=e*s,i=e),a=i*o}return{width:i,height:o}}function N(e,t){let r,n;try{if(r=new OffscreenCanvas(e,t),n=r.getContext("2d"),null===n)throw new Error("getContext of OffscreenCanvas returns null")}catch(i){r=document.createElement("canvas"),n=r.getContext("2d")}return r.width=e,r.height=t,[r,n]}function G(e,t){const{width:r,height:n}=q(e.width,e.height),[i,o]=N(r,n);return t&&/jpe?g/.test(t)&&(o.fillStyle="white",o.fillRect(0,0,i.width,i.height)),o.drawImage(e,0,0,i.width,i.height),i}function V(){return void 0!==V.cachedResult||(V.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"undefined"!=typeof document&&"ontouchend"in document),V.cachedResult}function K(e,t={}){return new Promise(function(r,n){let i,o;var a=function(){try{return o=G(i,t.fileType||e.type),r([i,o])}catch(a){return n(a)}},s=function(t){try{var r=function(e){try{throw e}catch(t){return n(t)}};try{let t;return j(e).then(function(e){try{return t=e,Q(t).then(function(e){try{return i=e,function(){try{return a()}catch(e){return n(e)}}()}catch(t){return r(t)}},r)}catch(o){return r(o)}},r)}catch(o){r(o)}}catch(o){return n(o)}};try{if(V()||[R.DESKTOP_SAFARI,R.MOBILE_SAFARI].includes($()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then(function(e){try{return i=e,a()}catch(t){return s()}},s)}catch(l){s()}})}function Z(e,t,r,n,i=1){return new Promise(function(o,a){let s;if("image/png"===t){let o,a,c;return o=e.getContext("2d"),({data:a}=o.getImageData(0,0,e.width,e.height)),c=_.encode([a.buffer],e.width,e.height,4096*i),s=new Blob([c],{type:t}),s.name=r,s.lastModified=n,l.call(this)}{let o=function(){return l.call(this)};if("image/bmp"===t)return new Promise(t=>S.toBlob(e,t)).then(function(e){try{return s=e,s.name=r,s.lastModified=n,o.call(this)}catch(t){return a(t)}}.bind(this),a);{let l=function(){return o.call(this)};if("function"==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:i}).then(function(e){try{return s=e,s.name=r,s.lastModified=n,l.call(this)}catch(t){return a(t)}}.bind(this),a);{let o;return o=e.toDataURL(t,i),H(o,r,n).then(function(e){try{return s=e,l.call(this)}catch(t){return a(t)}}.bind(this),a)}}}function l(){return o(s)}})}function X(e){e.width=0,e.height=0}function Y(){return new Promise(function(e,t){let r,n,i,o;return void 0!==Y.cachedResult?e(Y.cachedResult):H("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(a){try{return r=a,K(r).then(function(a){try{return n=a[1],Z(n,r.type,r.name,r.lastModified).then(function(r){try{return i=r,X(n),K(i).then(function(r){try{return o=r[0],Y.cachedResult=1===o.width&&2===o.height,e(Y.cachedResult)}catch(n){return t(n)}},t)}catch(a){return t(a)}},t)}catch(s){return t(s)}},t)}catch(s){return t(s)}},t)})}function J(e){return new Promise((t,r)=>{const n=new W;n.onload=e=>{const r=new DataView(e.target.result);if(65496!=r.getUint16(0,!1))return t(-2);const n=r.byteLength;let i=2;for(;i<n;){if(r.getUint16(i+2,!1)<=8)return t(-1);const e=r.getUint16(i,!1);if(i+=2,65505==e){if(1165519206!=r.getUint32(i+=2,!1))return t(-1);const e=18761==r.getUint16(i+=6,!1);i+=r.getUint32(i+4,e);const n=r.getUint16(i,e);i+=2;for(let o=0;o<n;o++)if(274==r.getUint16(i+12*o,e))return t(r.getUint16(i+12*o+8,e))}else{if(65280&~e)break;i+=r.getUint16(i,!1)}}return t(-1)},n.onerror=e=>r(e),n.readAsArrayBuffer(e)})}function ee(e,t){const{width:r}=e,{height:n}=e,{maxWidthOrHeight:i}=t;let o,a=e;return isFinite(i)&&(r>i||n>i)&&([a,o]=N(r,n),r>n?(a.width=i,a.height=n/r*i):(a.width=r/n*i,a.height=i),o.drawImage(e,0,0,a.width,a.height),X(e)),a}function te(e,t){const{width:r}=e,{height:n}=e,[i,o]=N(r,n);switch(t>4&&t<9?(i.width=n,i.height=r):(i.width=r,i.height=n),t){case 2:o.transform(-1,0,0,1,r,0);break;case 3:o.transform(-1,0,0,-1,r,n);break;case 4:o.transform(1,0,0,-1,0,n);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,n,0);break;case 7:o.transform(0,-1,-1,0,n,r);break;case 8:o.transform(0,-1,1,0,0,r)}return o.drawImage(e,0,0,r,n),X(e),i}function re(e,t,r=0){return new Promise(function(n,i){let o,a,s,l,c,f,u,h,d,p,m,g,v,b,w,y,A,U,F,C;function E(e=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;o+=e,t.onProgress(Math.min(o,100))}function B(e){if(t.signal&&t.signal.aborted)throw t.signal.reason;o=Math.min(Math.max(e,o),100),t.onProgress(o)}return o=r,a=t.maxIteration||10,s=1024*t.maxSizeMB*1024,E(),K(e,t).then(function(r){try{return[,l]=r,E(),c=ee(l,t),E(),new Promise(function(r,n){var i;if(!(i=t.exifOrientation))return J(e).then(function(e){try{return i=e,o.call(this)}catch(t){return n(t)}}.bind(this),n);function o(){return r(i)}return o.call(this)}).then(function(r){try{return f=r,E(),Y().then(function(r){try{return u=r?c:te(c,f),E(),h=t.initialQuality||1,d=t.fileType||e.type,Z(u,d,e.name,e.lastModified,h).then(function(r){try{{let f=function(){if(a--&&(w>s||w>v)){let t,r;return t=C?.95*F.width:F.width,r=C?.95*F.height:F.height,[A,U]=N(t,r),U.drawImage(F,0,0,t,r),h*="image/png"===d?.85:.95,Z(A,d,e.name,e.lastModified,h).then(function(e){try{return y=e,X(F),F=A,w=y.size,B(Math.min(99,Math.floor((b-w)/(b-s)*100))),f}catch(t){return i(t)}},i)}return[1]},M=function(){return X(F),X(A),X(c),X(u),X(l),B(100),n(y)};return p=r,E(),m=p.size>s,g=p.size>e.size,m||g?(v=e.size,b=p.size,w=b,F=u,C=!t.alwaysKeepResolution&&m,(o=function(e){for(;e;){if(e.then)return void e.then(o,i);try{if(e.pop){if(e.length)return e.pop()?M.call(this):e;e=f}else e=e.call(this)}catch(t){return i(t)}}}.bind(this))(f)):(B(100),n(p));var o}}catch(f){return i(f)}}.bind(this),i)}catch(o){return i(o)}}.bind(this),i)}catch(o){return i(o)}}.bind(this),i)}catch(o){return i(o)}}.bind(this),i)})}let ne;function ie(e,t){return new Promise(function(r,n){let i,o,a,s,l,c;if(i={...t},a=0,({onProgress:s}=i),i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l="boolean"!=typeof i.useWebWorker||i.useWebWorker,delete i.useWebWorker,i.onProgress=e=>{a=e,"function"==typeof s&&s(a)},!(e instanceof Blob||e instanceof L))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return n(new Error("The file given is not an image"));if(c="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!l||"function"!=typeof Worker||c)return re(e,i).then(function(e){try{return o=e,h.call(this)}catch(t){return n(t)}}.bind(this),n);var f=function(){try{return h.call(this)}catch(e){return n(e)}}.bind(this),u=function(t){try{return re(e,i).then(function(e){try{return o=e,f()}catch(t){return n(t)}},n)}catch(r){return n(r)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",function(e,t){return new Promise((r,n)=>{ne||(ne=function(e){const t=[];return t.push(e),URL.createObjectURL(new Blob(t))}("\nlet scriptImported = false\nself.addEventListener('message', async (e) => {\n  const { file, id, imageCompressionLibUrl, options } = e.data\n  options.onProgress = (progress) => self.postMessage({ progress, id })\n  try {\n    if (!scriptImported) {\n      // console.log('[worker] importScripts', imageCompressionLibUrl)\n      self.importScripts(imageCompressionLibUrl)\n      scriptImported = true\n    }\n    // console.log('[worker] self', self)\n    const compressedFile = await imageCompression(file, options)\n    self.postMessage({ file: compressedFile, id })\n  } catch (e) {\n    // console.error('[worker] error', e)\n    self.postMessage({ error: e.message + '\\n' + e.stack, id })\n  }\n})\n"));const i=new Worker(ne);i.addEventListener("message",function(e){if(t.signal&&t.signal.aborted)i.terminate();else if(void 0===e.data.progress){if(e.data.error)return n(new Error(e.data.error)),void i.terminate();r(e.data.file),i.terminate()}else t.onProgress(e.data.progress)}),i.addEventListener("error",n),t.signal&&t.signal.addEventListener("abort",()=>{n(t.signal.reason),i.terminate()}),i.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})})}(e,i).then(function(e){try{return o=e,f()}catch(t){return u()}},u)}catch(d){u()}function h(){try{o.name=e.name,o.lastModified=e.lastModified}catch(d){}try{i.preserveExif&&"image/jpeg"===e.type&&(!i.fileType||i.fileType&&i.fileType===e.type)&&(o=F(e,o))}catch(d){}return r(o)}})}
/*!
 * Compressor.js v1.2.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-02-28T14:09:41.732Z
 */
function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach(function(t){le(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fe(n.key),n)}}function le(e,t,r){return(t=fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ce.apply(this,arguments)}function fe(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}ie.getDataUrlFromFile=j,ie.getFilefromDataUrl=H,ie.loadImage=Q,ie.drawImageInCanvas=G,ie.drawFileInCanvas=K,ie.canvasToFile=Z,ie.getExifOrientation=J,ie.handleMaxWidthOrHeight=ee,ie.followExifOrientation=te,ie.cleanupCanvasMemory=X,ie.isAutoOrientationInBrowser=Y,ie.approximateBelowMaximumCanvasSizeOfBrowser=q,ie.copyExifWithoutOrientation=F,ie.getBrowserName=$,ie.version="2.0.2";var ue,he={exports:{}};ue=he,"undefined"!=typeof window&&function(e){var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,r=e.Blob&&function(){try{return Boolean(new Blob)}catch(x){return!1}}(),n=r&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(x){return!1}}(),i=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,o=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,a=(r||i)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,a,s,l,c,f,u,h,d;if(!(t=e.match(o)))throw new Error("invalid data URI");for(a=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),s=!!t[4],l=e.slice(t[0].length),c=s?atob(l):decodeURIComponent(l),f=new ArrayBuffer(c.length),u=new Uint8Array(f),h=0;h<c.length;h+=1)u[h]=c.charCodeAt(h);return r?new Blob([n?u:f],{type:a}):((d=new i).append(f),d.getBlob(a))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,r,n){var i=this;setTimeout(function(){n&&t.toDataURL&&a?e(a(i.toDataURL(r,n))):e(i.mozGetAsFile("blob",r))})}:t.toDataURL&&a&&(t.msToBlob?t.toBlob=function(e,r,n){var i=this;setTimeout(function(){(r&&"image/png"!==r||n)&&t.toDataURL&&a?e(a(i.toDataURL(r,n))):e(i.msToBlob(r))})}:t.toBlob=function(e,t,r){var n=this;setTimeout(function(){e(a(n.toDataURL(t,r)))})})),ue.exports?ue.exports=a:e.dataURLtoBlob=a}(window);var de=he.exports,pe={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},me="undefined"!=typeof window&&void 0!==window.document?window:{},ge=function(e){return e>0&&e<1/0},ve=Array.prototype.slice;function be(e){return Array.from?Array.from(e):ve.call(e)}var we=/^image\/.+$/;function ye(e){return we.test(e)}var Ae=String.fromCharCode;var Ue=me.btoa;function Fe(e,t){for(var r=[],n=new Uint8Array(e);n.length>0;)r.push(Ae.apply(null,be(n.subarray(0,8192)))),n=n.subarray(8192);return"data:".concat(t,";base64,").concat(Ue(r.join("")))}function Ce(e){var t,r=new DataView(e);try{var n,i,o;if(255===r.getUint8(0)&&216===r.getUint8(1))for(var a=r.byteLength,s=2;s+1<a;){if(255===r.getUint8(s)&&225===r.getUint8(s+1)){i=s;break}s+=1}if(i){var l=i+10;if("Exif"===function(e,t,r){var n,i="";for(r+=t,n=t;n<r;n+=1)i+=Ae(e.getUint8(n));return i}(r,i+4,4)){var c=r.getUint16(l);if(((n=18761===c)||19789===c)&&42===r.getUint16(l+2,n)){var f=r.getUint32(l+4,n);f>=8&&(o=l+f)}}}if(o){var u,h,d=r.getUint16(o,n);for(h=0;h<d;h+=1)if(u=o+12*h+2,274===r.getUint16(u,n)){u+=8,t=r.getUint16(u,n),r.setUint16(u,1,n);break}}}catch(x){t=1}return t}var Ee=/\.\d*(?:0|9){12}\d*$/;function Be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return Ee.test(e)?Math.round(e*t)/t:e}function Me(e){var t=e.aspectRatio,r=e.height,n=e.width,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",o=ge(n),a=ge(r);if(o&&a){var s=r*t;("contain"===i||"none"===i)&&s>n||"cover"===i&&s<n?r=n/t:n=r*t}else o?r=n/t:a&&(n=r*t);return{width:n,height:r}}var xe=me.ArrayBuffer,Te=me.FileReader,ze=me.URL||me.webkitURL,Ie=/\.\w+$/,_e=me.Compressor,Se=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.file=t,this.exif=[],this.image=new Image,this.options=ae(ae({},pe),r),this.aborted=!1,this.result=null,this.init()}var t,r,n;return t=e,n=[{key:"noConflict",value:function(){return window.Compressor=_e,e}},{key:"setDefaults",value:function(e){ce(pe,e)}}],(r=[{key:"init",value:function(){var e=this,t=this.file,r=this.options;if(n=t,"undefined"!=typeof Blob&&(n instanceof Blob||"[object Blob]"===Object.prototype.toString.call(n))){var n,i=t.type;if(ye(i))if(ze&&Te){xe||(r.checkOrientation=!1,r.retainExif=!1);var o="image/jpeg"===i,a=o&&r.checkOrientation,s=o&&r.retainExif;if(!ze||a||s){var l=new Te;this.reader=l,l.onload=function(r){var n=r.target.result,o={},l=1;a&&(l=Ce(n))>1&&ce(o,function(e){var t=0,r=1,n=1;switch(e){case 2:r=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,r=-1;break;case 8:t=-90}return{rotate:t,scaleX:r,scaleY:n}}(l)),s&&(e.exif=function(e){for(var t=be(new Uint8Array(e)),r=t.length,n=[],i=0;i+3<r;){var o=t[i],a=t[i+1];if(255===o&&218===a)break;if(255===o&&216===a)i+=2;else{var s=i+(256*t[i+2]+t[i+3])+2,l=t.slice(i,s);n.push(l),i=s}}return n.reduce(function(e,t){return 255===t[0]&&225===t[1]?e.concat(t):e},[])}(n)),o.url=a||s?!ze||l>1?Fe(n,i):ze.createObjectURL(t):n,e.load(o)},l.onabort=function(){e.fail(new Error("Aborted to read the image with FileReader."))},l.onerror=function(){e.fail(new Error("Failed to read the image with FileReader."))},l.onloadend=function(){e.reader=null},a||s?l.readAsArrayBuffer(t):l.readAsDataURL(t)}else this.load({url:ze.createObjectURL(t)})}else this.fail(new Error("The current browser does not support image compression."));else this.fail(new Error("The first argument must be an image File or Blob object."))}else this.fail(new Error("The first argument must be a File or Blob object."))}},{key:"load",value:function(e){var t=this,r=this.file,n=this.image;n.onload=function(){t.draw(ae(ae({},e),{},{naturalWidth:n.naturalWidth,naturalHeight:n.naturalHeight}))},n.onabort=function(){t.fail(new Error("Aborted to load the image."))},n.onerror=function(){t.fail(new Error("Failed to load the image."))},me.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(me.navigator.userAgent)&&(n.crossOrigin="anonymous"),n.alt=r.name,n.src=e.url}},{key:"draw",value:function(e){var t=this,r=e.naturalWidth,n=e.naturalHeight,i=e.rotate,o=void 0===i?0:i,a=e.scaleX,s=void 0===a?1:a,l=e.scaleY,c=void 0===l?1:l,f=this.file,u=this.image,h=this.options,d=document.createElement("canvas"),p=d.getContext("2d"),m=Math.abs(o)%180==90,g=("contain"===h.resize||"cover"===h.resize)&&ge(h.width)&&ge(h.height),v=Math.max(h.maxWidth,0)||1/0,b=Math.max(h.maxHeight,0)||1/0,w=Math.max(h.minWidth,0)||0,y=Math.max(h.minHeight,0)||0,A=r/n,U=h.width,F=h.height;if(m){var C=[b,v];v=C[0],b=C[1];var E=[y,w];w=E[0],y=E[1];var B=[F,U];U=B[0],F=B[1]}g&&(A=U/F);var M=Me({aspectRatio:A,width:v,height:b},"contain");v=M.width,b=M.height;var x=Me({aspectRatio:A,width:w,height:y},"cover");if(w=x.width,y=x.height,g){var T=Me({aspectRatio:A,width:U,height:F},h.resize);U=T.width,F=T.height}else{var z=Me({aspectRatio:A,width:U,height:F}),I=z.width;U=void 0===I?r:I;var _=z.height;F=void 0===_?n:_}var S=-(U=Math.floor(Be(Math.min(Math.max(U,w),v))))/2,R=-(F=Math.floor(Be(Math.min(Math.max(F,y),b))))/2,k=U,O=F,P=[];if(g){var D,L,W,H,j=Me({aspectRatio:A,width:r,height:n},{contain:"cover",cover:"contain"}[h.resize]);W=j.width,H=j.height,D=(r-W)/2,L=(n-H)/2,P.push(D,L,W,H)}if(P.push(S,R,k,O),m){var Q=[F,U];U=Q[0],F=Q[1]}d.width=U,d.height=F,ye(h.mimeType)||(h.mimeType=f.type);var $="transparent";f.size>h.convertSize&&h.convertTypes.indexOf(h.mimeType)>=0&&(h.mimeType="image/jpeg");var q="image/jpeg"===h.mimeType;if(q&&($="#fff"),p.fillStyle=$,p.fillRect(0,0,U,F),h.beforeDraw&&h.beforeDraw.call(this,p,d),!this.aborted&&(p.save(),p.translate(U/2,F/2),p.rotate(o*Math.PI/180),p.scale(s,c),p.drawImage.apply(p,[u].concat(P)),p.restore(),h.drew&&h.drew.call(this,p,d),!this.aborted)){var N=function(e){if(!t.aborted){var i=function(e){return t.done({naturalWidth:r,naturalHeight:n,result:e})};if(e&&q&&h.retainExif&&t.exif&&t.exif.length>0){var o=function(e){return i(de(Fe(function(e,t){var r=be(new Uint8Array(e));if(255!==r[2]||224!==r[3])return e;var n=256*r[4]+r[5],i=[255,216].concat(t,r.slice(4+n));return new Uint8Array(i)}(e,t.exif),h.mimeType)))};if(e.arrayBuffer)e.arrayBuffer().then(o).catch(function(){t.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var a=new Te;t.reader=a,a.onload=function(e){var t=e.target;o(t.result)},a.onabort=function(){t.fail(new Error("Aborted to read the compressed image with FileReader."))},a.onerror=function(){t.fail(new Error("Failed to read the compressed image with FileReader."))},a.onloadend=function(){t.reader=null},a.readAsArrayBuffer(e)}}else i(e)}};d.toBlob?d.toBlob(N,h.mimeType,h.quality):N(de(d.toDataURL(h.mimeType,h.quality)))}}},{key:"done",value:function(e){var t,r,n=e.naturalWidth,i=e.naturalHeight,o=e.result,a=this.file,s=this.image,l=this.options;if(ze&&0===s.src.indexOf("blob:")&&ze.revokeObjectURL(s.src),o)if(l.strict&&!l.retainExif&&o.size>a.size&&l.mimeType===a.type&&!(l.width>n||l.height>i||l.minWidth>n||l.minHeight>i||l.maxWidth<n||l.maxHeight<i))o=a;else{var c=new Date;o.lastModified=c.getTime(),o.lastModifiedDate=c,o.name=a.name,o.name&&o.type!==a.type&&(o.name=o.name.replace(Ie,(t=o.type,"jpeg"===(r=ye(t)?t.substr(6):"")&&(r="jpg"),".".concat(r))))}else o=a;this.result=o,l.success&&l.success.call(this,o)}},{key:"fail",value:function(e){var t=this.options;if(!t.error)throw e;t.error.call(this,e)}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}])&&se(t.prototype,r),n&&se(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Re=new class{constructor(){}async compressImage(e,t){const r=performance.now();try{const n={maxSizeMB:1,maxWidthOrHeight:t.maxWidth||1920,useWebWorker:!0,quality:t.quality/100,fileType:t.format?`image/${t.format}`:void 0},i=await ie(e,n),o=performance.now()-r,a=e.size,s=i.size,l=a-s;return{blob:i,originalSize:a,compressedSize:s,savings:l,savingsPercentage:Math.round(l/a*100),compressionTime:o}}catch(n){return this.compressImageWithCompressor(e,t,r)}}async compressImageWithCompressor(e,t,r){return new Promise((n,i)=>{new Se(e,{quality:t.quality/100,maxWidth:t.maxWidth,maxHeight:t.maxWidth,convertTypes:t.format?[`image/${t.format}`]:void 0,success:t=>{const i=performance.now()-r,o=e.size,a=t.size,s=o-a,l=Math.round(s/o*100);n({blob:t,originalSize:o,compressedSize:a,savings:s,savingsPercentage:l,compressionTime:i})},error:e=>{i(e)}})})}async compressFile(e,t){const r=performance.now();try{const n=await e.arrayBuffer(),i=new Uint8Array(n);let o,a="application/octet-stream";switch(t.algorithm){case"gzip":default:o=w(i,{level:this.getCompressionLevel(t.quality)}),a="application/gzip";break;case"zip":o=await this.compressWithZip(e.name,i),a="application/zip"}const s=new Blob([o],{type:a}),l=performance.now()-r,c=e.size,f=s.size,u=c-f;return{blob:s,originalSize:c,compressedSize:f,savings:u,savingsPercentage:Math.round(u/c*100),compressionTime:l}}catch(n){const e=n instanceof Error?n.message:"Unknown error";throw new Error(`File compression failed: ${e}`)}}async compressWithZip(e,t){return new Promise((r,n)=>{y({[e]:t},{level:6},(e,t)=>{e?n(e):r(t)})})}getCompressionLevel(e){return Math.max(1,Math.min(9,Math.round((100-e)/11)))}async compressWithFallback(e,t){try{return e.type.startsWith("image/")?await this.compressImage(e,t):await this.compressFile(e,t)}catch(r){return this.fallbackCompression(e,t)}}async fallbackCompression(e,t){const r=performance.now();try{if(!e.type.startsWith("image/")){const n=await e.arrayBuffer(),i=new Uint8Array(n),o=w(i,{level:this.getCompressionLevel(t.quality)}),a=new Blob([o],{type:"application/gzip"}),s=performance.now()-r,l=e.size,c=a.size,f=l-c;return{blob:a,originalSize:l,compressedSize:c,savings:f,savingsPercentage:Math.round(f/l*100),compressionTime:s}}}catch(i){}const n=performance.now()-r;return{blob:e,originalSize:e.size,compressedSize:e.size,savings:0,savingsPercentage:0,compressionTime:n}}destroy(){}},ke={class:"file-compressor"},Oe={class:"tool-header"},Pe={class:"compressor-container"},De={class:"upload-section"},Le={class:"drop-content"},We={class:"supported-formats"},He={key:0,class:"files-section"},je={class:"section-header"},Qe={class:"header-actions"},$e=["disabled"],qe={class:"files-list"},Ne={class:"file-info"},Ge={class:"file-icon"},Ve={class:"file-details"},Ke={class:"file-name"},Ze={class:"file-meta"},Xe={class:"file-size"},Ye={class:"file-type"},Je={class:"compression-settings"},et={class:"setting-group"},tt=["onUpdate:modelValue"],rt={value:"high"},nt={value:"medium"},it={value:"low"},ot={key:0,class:"setting-group"},at=["onUpdate:modelValue"],st={value:"original"},lt={class:"file-actions"},ct=["onClick"],ft={class:"compression-summary"},ut={class:"summary-item"},ht={class:"summary-label"},dt={class:"summary-value"},pt={class:"summary-item"},mt={class:"summary-label"},gt={class:"summary-value"},vt={key:0,class:"summary-item"},bt={class:"summary-label"},wt={class:"summary-value"},yt={key:1,class:"summary-item"},At={class:"summary-label"},Ut={class:"summary-value savings"},Ft={key:1,class:"results-section"},Ct={class:"results-list"},Et={class:"result-info"},Bt={class:"file-icon"},Mt={class:"result-details"},xt={class:"result-name"},Tt={class:"result-stats"},zt={class:"original-size"},It={class:"compressed-size"},_t={key:0,class:"result-meta"},St={key:0,class:"compression-method"},Rt={key:1,class:"compression-time"},kt={key:2,class:"compression-format"},Ot={class:"result-actions"},Pt=["onClick"],Dt={class:"batch-actions"},Lt={class:"compression-tips"},Wt={class:"tips-grid"},Ht={class:"tip-item"},jt={class:"tip-content"},Qt={class:"tip-title"},$t={class:"tip-description"},qt={class:"tip-item"},Nt={class:"tip-content"},Gt={class:"tip-title"},Vt={class:"tip-description"},Kt={class:"tip-item"},Zt={class:"tip-content"},Xt={class:"tip-title"},Yt={class:"tip-description"},Jt={class:"tip-item"},er={class:"tip-content"},tr={class:"tip-title"},rr={class:"tip-description"},nr=t({__name:"FileCompressor",setup(t){const{t:w}=r(),y=n(!1),U=n(!1),F=n([]),C=n([]),E=n(),B=i(()=>F.value.reduce((e,t)=>e+t.size,0)),M=i(()=>F.value.reduce((e,t)=>{const r=D(t.type,t.quality);return e+t.size*r},0)),x=i(()=>B.value-M.value),T=i(()=>0===B.value?0:Math.round(x.value/B.value*100)),z=e=>{e.preventDefault(),y.value=!1;const t=Array.from(e.dataTransfer?.files||[]);S(t)},I=e=>{const t=e.target,r=Array.from(t.files||[]);S(r)},_=()=>{E.value?.click()},S=e=>{e.forEach(e=>{const t={file:e,name:e.name,size:e.size,type:e.type,quality:"medium",maxWidth:"original"};F.value.push(t)})},R=()=>{F.value=[]},k=()=>{C.value=[]},O=e=>e.startsWith("image/")?"":e.startsWith("video/")?"":e.startsWith("audio/")?"":e.includes("pdf")?"":e.includes("zip")||e.includes("rar")?"":e.includes("text")?"":"",P=e=>e.startsWith("image/");o(()=>{Re.destroy()});const D=(e,t)=>{const r={high:.8,medium:.6,low:.4};return e.startsWith("image/")?r[t]:e.startsWith("video/")?.5*r[t]:e.startsWith("audio/")?.7*r[t]:.9},L=async()=>{U.value=!0,C.value=[];try{for(const e of F.value){const t=await W(e);C.value.push(t)}}catch(e){A.error(w("tools.fileCompressor.compressionError"))}finally{U.value=!1}},W=async t=>{try{const e={quality:H(t.quality),maxWidth:"original"===t.maxWidth?void 0:parseInt(t.maxWidth),format:j(t.type),algorithm:Q(t.type)},r=await Re.compressWithFallback(t.file,e);return{name:t.name,originalSize:r.originalSize,compressedSize:r.compressedSize,savings:r.savings,savingsPercentage:r.savingsPercentage,originalType:t.type,blob:r.blob,compressionTime:r.compressionTime,compressionMethod:t.type.startsWith("image/")?"WASM Image":"WASM Generic"}}catch(r){try{if(!t.type.startsWith("image/")){const r=await t.file.arrayBuffer(),n=new Uint8Array(r),{gzip:i}=await e(async()=>{const{gzip:e}=await import("./browser-ti7604_i.js").then(e=>e.p);return{gzip:e}},[]),o=i(n,{level:6}),a=new Blob([o],{type:"application/gzip"}),s=t.size-a.size,l=Math.round(s/t.size*100);return{name:t.name,originalSize:t.size,compressedSize:a.size,savings:s,savingsPercentage:l,originalType:t.type,blob:a,compressionTime:0,compressionMethod:"Basic Gzip"}}}catch(n){}return{name:t.name,originalSize:t.size,compressedSize:t.size,savings:0,savingsPercentage:0,originalType:t.type,blob:t.file,compressionTime:0,compressionMethod:"No Compression"}}},H=e=>{switch(e){case"high":return 90;case"medium":default:return 70;case"low":return 50}},j=e=>e.includes("webp")?"webp":e.includes("png")?"png":"jpeg",Q=e=>e.includes("zip")||e.includes("archive")?"zip":"gzip",$=e=>{let t=`compressed_${e.name}`;e.compressionMethod?.includes("Gzip")||"application/gzip"===e.blob.type?t+=".gz":"application/zip"===e.blob.type&&(t+=".zip"),b.saveAs(e.blob,t)},q=()=>{C.value.forEach(e=>{$(e)})},N=e=>{if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KB","MB","GB"][t]};return(e,t)=>(v(),a("div",ke,[s("div",Oe,[s("h1",null,l(e.$t("tools.fileCompressor.title")),1),s("p",null,l(e.$t("tools.fileCompressor.description")),1)]),s("div",Pe,[s("div",De,[s("div",{class:u(["drop-zone",{"drag-over":y.value}]),onDrop:z,onDragover:t[0]||(t[0]=f(()=>{},["prevent"])),onDragenter:t[1]||(t[1]=f(()=>{},["prevent"]))},[s("div",Le,[t[2]||(t[2]=s("div",{class:"drop-icon"},"  ",-1)),s("h3",null,l(e.$t("tools.fileCompressor.dragDrop")),1),s("p",null,l(e.$t("tools.fileCompressor.or")),1),s("button",{class:"select-btn",onClick:_},l(e.$t("tools.fileCompressor.selectFiles")),1),s("input",{ref_key:"fileInput",ref:E,type:"file",multiple:"",style:{display:"none"},onChange:I},null,544)])],34),s("div",We,[s("h4",null,l(e.$t("tools.fileCompressor.supportedFormats")),1),t[3]||(t[3]=h('<div class="format-tags" data-v-ab8f76df><span class="format-tag" data-v-ab8f76df>Images (JPG, PNG, GIF, WebP)</span><span class="format-tag" data-v-ab8f76df>Documents (PDF, DOC, TXT)</span><span class="format-tag" data-v-ab8f76df>Archives (ZIP, RAR)</span><span class="format-tag" data-v-ab8f76df>Videos (MP4, AVI, MOV)</span><span class="format-tag" data-v-ab8f76df>Audio (MP3, WAV, FLAC)</span></div>',1))])]),F.value.length>0?(v(),a("div",He,[s("div",je,[s("h3",null,l(e.$t("tools.fileCompressor.selectedFiles"))+" ("+l(F.value.length)+")",1),s("div",Qe,[s("button",{class:"clear-btn",onClick:R},l(e.$t("tools.fileCompressor.clearAll")),1),s("button",{disabled:U.value,class:"compress-btn",onClick:L},l(U.value?e.$t("tools.fileCompressor.compressing"):e.$t("tools.fileCompressor.compress")),9,$e)])]),s("div",qe,[(v(!0),a(d,null,p(F.value,(r,n)=>{return v(),a("div",{key:n,class:"file-item"},[s("div",Ne,[s("div",Ge,l(O(r.type)),1),s("div",Ve,[s("div",Ke,l(r.name),1),s("div",Ze,[s("span",Xe,l(N(r.size)),1),s("span",Ye,l((i=r.type,i.split("/")[1]?.toUpperCase()||"FILE")),1)])])]),s("div",Je,[s("div",et,[s("label",null,l(e.$t("tools.fileCompressor.quality")),1),m(s("select",{"onUpdate:modelValue":e=>r.quality=e,class:"quality-select"},[s("option",rt,l(e.$t("tools.fileCompressor.high"))+" (90%) ",1),s("option",nt,l(e.$t("tools.fileCompressor.medium"))+" (70%) ",1),s("option",it,l(e.$t("tools.fileCompressor.low"))+" (50%) ",1)],8,tt),[[g,r.quality]])]),P(r.type)?(v(),a("div",ot,[s("label",null,l(e.$t("tools.fileCompressor.maxWidth")),1),m(s("select",{"onUpdate:modelValue":e=>r.maxWidth=e,class:"size-select"},[s("option",st,l(e.$t("tools.fileCompressor.original")),1),t[4]||(t[4]=s("option",{value:"1920"}," 1920px ",-1)),t[5]||(t[5]=s("option",{value:"1280"}," 1280px ",-1)),t[6]||(t[6]=s("option",{value:"800"}," 800px ",-1))],8,at),[[g,r.maxWidth]])])):c("",!0)]),s("div",lt,[s("button",{class:"remove-btn",onClick:e=>(e=>{F.value.splice(e,1)})(n)},"  ",8,ct)])]);var i}),128))]),s("div",ft,[s("div",ut,[s("span",ht,l(e.$t("tools.fileCompressor.totalFiles"))+":",1),s("span",dt,l(F.value.length),1)]),s("div",pt,[s("span",mt,l(e.$t("tools.fileCompressor.totalSize"))+":",1),s("span",gt,l(N(B.value)),1)]),M.value>0?(v(),a("div",vt,[s("span",bt,l(e.$t("tools.fileCompressor.estimatedSize"))+":",1),s("span",wt,l(N(M.value)),1)])):c("",!0),x.value>0?(v(),a("div",yt,[s("span",At,l(e.$t("tools.fileCompressor.estimatedSavings"))+":",1),s("span",Ut,l(N(x.value))+" ("+l(T.value)+"%)",1)])):c("",!0)])])):c("",!0),C.value.length>0?(v(),a("div",Ft,[s("h3",null,l(e.$t("tools.fileCompressor.compressionResults")),1),s("div",Ct,[(v(!0),a(d,null,p(C.value,(t,r)=>{return v(),a("div",{key:r,class:"result-item"},[s("div",Et,[s("div",Bt,l(O(t.originalType)),1),s("div",Mt,[s("div",xt,l(t.name),1),s("div",Tt,[s("span",zt,l(e.$t("tools.fileCompressor.original"))+": "+l(N(t.originalSize)),1),s("span",It,l(e.$t("tools.fileCompressor.compressed"))+": "+l(N(t.compressedSize)),1),s("span",{class:u(["savings",{positive:t.savings>0}])},l(t.savings>0?"-":"+")+l(N(Math.abs(t.savings)))+" ("+l(Math.abs(t.savingsPercentage))+"%) ",3)]),t.compressionMethod||t.compressionTime?(v(),a("div",_t,[t.compressionMethod?(v(),a("span",St,l(e.$t("tools.fileCompressor.method"))+": "+l(t.compressionMethod),1)):c("",!0),t.compressionTime?(v(),a("span",Rt,l(e.$t("tools.fileCompressor.time"))+": "+l(Math.round(t.compressionTime))+"ms ",1)):c("",!0),t.blob.type!==t.originalType?(v(),a("span",kt,l(e.$t("tools.fileCompressor.format"))+": "+l((n=t.blob.type,"application/gzip"===n?"GZIP":"application/zip"===n?"ZIP":n.startsWith("image/")?n.split("/")[1].toUpperCase():n.split("/")[1]?.toUpperCase()||"UNKNOWN")),1)):c("",!0)])):c("",!0)])]),s("div",Ot,[s("button",{class:"download-btn",onClick:e=>$(t)},l(e.$t("tools.fileCompressor.download")),9,Pt)])]);var n}),128))]),s("div",Dt,[s("button",{class:"download-all-btn",onClick:q},l(e.$t("tools.fileCompressor.downloadAll")),1),s("button",{class:"clear-results-btn",onClick:k},l(e.$t("tools.fileCompressor.clearResults")),1)])])):c("",!0),s("div",Lt,[s("h3",null,l(e.$t("tools.fileCompressor.compressionTips")),1),s("div",Wt,[s("div",Ht,[t[7]||(t[7]=s("div",{class:"tip-icon"},"  ",-1)),s("div",jt,[s("div",Qt,l(e.$t("tools.fileCompressor.imageOptimization")),1),s("div",$t,l(e.$t("tools.fileCompressor.imageOptimizationDesc")),1)])]),s("div",qt,[t[8]||(t[8]=s("div",{class:"tip-icon"},"  ",-1)),s("div",Nt,[s("div",Gt,l(e.$t("tools.fileCompressor.documentCompression")),1),s("div",Vt,l(e.$t("tools.fileCompressor.documentCompressionDesc")),1)])]),s("div",Kt,[t[9]||(t[9]=s("div",{class:"tip-icon"},"  ",-1)),s("div",Zt,[s("div",Xt,l(e.$t("tools.fileCompressor.audioCompression")),1),s("div",Yt,l(e.$t("tools.fileCompressor.audioCompressionDesc")),1)])]),s("div",Jt,[t[10]||(t[10]=s("div",{class:"tip-icon"},"  ",-1)),s("div",er,[s("div",tr,l(e.$t("tools.fileCompressor.videoCompression")),1),s("div",rr,l(e.$t("tools.fileCompressor.videoCompressionDesc")),1)])])])])])]))}}),ir=U(nr,[["__scopeId","data-v-ab8f76df"]]);export{ir as default};
