import{a as l,u as e,r as a,e as o,f as s,t,y as n,F as i,g as p,n as r,x as c,q as u,G as d,H as v,M as f,I as m,O as y,J as g,N as b,j as h}from"./vendor-GAldOsJ5.js";import{s as k}from"./toast-NJcpvA0I.js";import{P as T}from"./PDFButton-CqQYl2ho.js";import{F as $}from"./utils-CpTIjOSr.js";import{_ as w}from"./index-CE9ZUSgX.js";import"./qr-DE_AbQYC.js";const C={class:"tool-container"},B={class:"tool-header"},M={class:"tool-content"},x={class:"tabs"},D=["onClick"],H={key:0,class:"tab-content"},A={class:"upload-section"},P={class:"upload-content"},V={key:0,class:"file-list"},_={class:"file-items"},F={class:"file-info"},j={class:"file-details"},I={class:"file-name"},N={class:"file-size"},q={class:"file-actions"},U=["disabled","onClick"],z=["disabled","onClick"],L=["onClick"],E={class:"merge-actions"},G=["disabled"],O={key:0,class:"loading-spinner"},R={key:1,class:"tab-content"},Z={class:"upload-section"},J={class:"upload-content"},K={key:0,class:"split-options"},S={class:"option-group"},Q={class:"radio-label"},W={key:0,class:"page-input"},X=["placeholder"],Y={class:"option-group"},ll={class:"radio-label"},el={class:"split-actions"},al=["disabled"],ol={key:0,class:"loading-spinner"},sl={key:2,class:"tab-content"},tl={class:"upload-section"},nl={class:"upload-content"},il={key:0,class:"compress-options"},pl={class:"option-group"},rl={value:"low"},cl={value:"medium"},ul={value:"high"},dl={class:"compress-actions"},vl=["disabled"],fl={key:0,class:"loading-spinner"},ml=w(l({__name:"PDFTool",setup(l){const{t:w}=e(),ml=a("merge"),yl=a(!1),gl=[{key:"merge",icon:()=>v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[v("path",{d:"M8 7h12m-12 5h12m-12 5h12M4 7h1m-1 5h1m-1 5h1"})])},{key:"split",icon:()=>v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[v("path",{d:"M21 7H3m18 5H3m18 5H3"})])},{key:"compress",icon:()=>v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[v("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),v("polyline",{points:"3.29 7 12 12 20.71 7"}),v("line",{x1:"12",y1:"22",x2:"12",y2:"12"})])}],bl=a(null),hl=a([]),kl=l=>{const e=l.target;if(e.files){const l=Array.from(e.files);hl.value=[...hl.value,...l]}},Tl=l=>{if(l.preventDefault(),l.dataTransfer?.files){const e=Array.from(l.dataTransfer.files).filter(l=>"application/pdf"===l.type);hl.value=[...hl.value,...e]}},$l=l=>{if(0===l)return"0 Bytes";const e=Math.floor(Math.log(l)/Math.log(1024));return parseFloat((l/Math.pow(1024,e)).toFixed(2))+" "+["Bytes","KB","MB","GB"][e]},wl=()=>{hl.value=[],bl.value&&(bl.value.value="")},Cl=async()=>{if(!(hl.value.length<2)){yl.value=!0;try{const l=await T.create();for(const o of hl.value){const e=await o.arrayBuffer(),a=await T.load(e);(await l.copyPages(a,a.getPageIndices())).forEach(e=>l.addPage(e))}const e=await l.save(),a=new Blob([e],{type:"application/pdf"});$.saveAs(a,"merged.pdf")}catch(l){k.error(w("tools.pdfTool.merge.errorMessage"))}finally{yl.value=!1}}},Bl=a(null),Ml=a(null),xl=a("pages"),Dl=a("1-3, 4-6"),Hl=l=>{const e=l.target;e.files&&e.files.length>0&&(Ml.value=e.files[0])},Al=l=>{if(l.preventDefault(),l.dataTransfer?.files&&l.dataTransfer.files.length>0){const e=l.dataTransfer.files[0];"application/pdf"===e.type&&(Ml.value=e)}},Pl=()=>{Ml.value=null,Bl.value&&(Bl.value.value="")},Vl=async()=>{if(Ml.value){yl.value=!0;try{const l=await Ml.value.arrayBuffer(),e=await T.load(l),a=e.getPageCount();if("single"===xl.value)for(let o=0;o<a;o++){const l=await T.create(),[a]=await l.copyPages(e,[o]);l.addPage(a);const s=await l.save(),t=new Blob([s],{type:"application/pdf"});$.saveAs(t,`page_${o+1}.pdf`)}else{const l=((l,e)=>{const a=[],o=l.split(",").map(l=>l.trim());for(const s of o)if(s.includes("-")){const[l,o]=s.split("-").map(l=>parseInt(l.trim()));!isNaN(l)&&!isNaN(o)&&l>0&&o<=e&&l<=o&&a.push([l-1,o-1])}else{const l=parseInt(s);!isNaN(l)&&l>0&&l<=e&&a.push([l-1,l-1])}return a})(Dl.value,a);for(let a=0;a<l.length;a++){const[o,s]=l[a],t=Array.from({length:s-o+1},(l,e)=>o+e),n=await T.create();(await n.copyPages(e,t)).forEach(l=>n.addPage(l));const i=await n.save(),p=new Blob([i],{type:"application/pdf"});$.saveAs(p,`split_${a+1}.pdf`)}}}catch(l){k.error(w("tools.pdfTool.split.errorMessage"))}finally{yl.value=!1}}},_l=a(null),Fl=a(null),jl=a("medium"),Il=l=>{const e=l.target;e.files&&e.files.length>0&&(Fl.value=e.files[0])},Nl=l=>{if(l.preventDefault(),l.dataTransfer?.files&&l.dataTransfer.files.length>0){const e=l.dataTransfer.files[0];"application/pdf"===e.type&&(Fl.value=e)}},ql=()=>{Fl.value=null,_l.value&&(_l.value.value="")},Ul=async()=>{if(Fl.value){yl.value=!0;try{const l=await Fl.value.arrayBuffer(),e=await T.load(l),a=await e.save({useObjectStreams:!0,addDefaultPage:!1}),o=new Blob([a],{type:"application/pdf"});$.saveAs(o,"compressed.pdf")}catch(l){k.error(w("tools.pdfTool.compress.errorMessage"))}finally{yl.value=!1}}};return(l,e)=>(h(),o("div",C,[s("div",B,[s("h1",null,t(l.$t("tools.pdfTool.title")),1),s("p",null,t(l.$t("tools.pdfTool.description")),1)]),s("div",M,[s("div",x,[(h(),o(i,null,p(gl,e=>s("button",{key:e.key,class:r(["tab-button",{active:ml.value===e.key}]),onClick:l=>ml.value=e.key},[(h(),c(d(e.icon),{class:"tab-icon"})),u(" "+t(l.$t(`tools.pdfTool.tabs.${e.key}`)),1)],10,D)),64))]),"merge"===ml.value?(h(),o("div",H,[s("div",A,[s("div",{class:"upload-area",onDrop:Tl,onDragover:e[1]||(e[1]=f(()=>{},["prevent"])),onDragenter:e[2]||(e[2]=f(()=>{},["prevent"]))},[s("input",{ref_key:"fileInput",ref:bl,type:"file",multiple:"",accept:".pdf",style:{display:"none"},onChange:kl},null,544),s("div",P,[e[13]||(e[13]=s("svg",{class:"upload-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),s("polyline",{points:"7,10 12,15 17,10"}),s("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)),s("h3",null,t(l.$t("tools.pdfTool.merge.uploadTitle")),1),s("p",null,t(l.$t("tools.pdfTool.merge.uploadDescription")),1),s("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=l=>bl.value?.click())},t(l.$t("common.labels.browse")),1)])],32),hl.value.length>0?(h(),o("div",V,[s("h4",null,t(l.$t("tools.pdfTool.merge.selectedFiles")),1),s("div",_,[(h(!0),o(i,null,p(hl.value,(l,a)=>(h(),o("div",{key:a,class:"file-item"},[s("div",F,[e[14]||(e[14]=s("svg",{class:"file-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})],-1)),s("div",j,[s("span",I,t(l.name),1),s("span",N,t($l(l.size)),1)])]),s("div",q,[s("button",{class:"btn btn-sm",disabled:0===a,onClick:l=>(l=>{if(l>0){const e=[...hl.value],a=e[l];e[l]=e[l-1],e[l-1]=a,hl.value=e}})(a)}," ↑ ",8,U),s("button",{class:"btn btn-sm",disabled:a===hl.value.length-1,onClick:l=>(l=>{if(l<hl.value.length-1){const e=[...hl.value],a=e[l];e[l]=e[l+1],e[l+1]=a,hl.value=e}})(a)}," ↓ ",8,z),s("button",{class:"btn btn-sm btn-danger",onClick:l=>(l=>{hl.value=hl.value.filter((e,a)=>a!==l)})(a)}," × ",8,L)])]))),128))]),s("div",E,[s("button",{class:"btn btn-primary",disabled:hl.value.length<2||yl.value,onClick:Cl},[yl.value?(h(),o("span",O)):n("",!0),u(" "+t(yl.value?l.$t("common.labels.processing"):l.$t("tools.pdfTool.merge.mergeButton")),1)],8,G),s("button",{class:"btn btn-secondary",onClick:wl},t(l.$t("common.labels.clear")),1)])])):n("",!0)])])):n("",!0),"split"===ml.value?(h(),o("div",R,[s("div",Z,[s("div",{class:"upload-area",onDrop:Al,onDragover:e[4]||(e[4]=f(()=>{},["prevent"])),onDragenter:e[5]||(e[5]=f(()=>{},["prevent"]))},[s("input",{ref_key:"splitFileInput",ref:Bl,type:"file",accept:".pdf",style:{display:"none"},onChange:Hl},null,544),s("div",J,[e[15]||(e[15]=s("svg",{class:"upload-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})],-1)),s("h3",null,t(l.$t("tools.pdfTool.split.uploadTitle")),1),s("p",null,t(l.$t("tools.pdfTool.split.uploadDescription")),1),s("button",{class:"btn btn-primary",onClick:e[3]||(e[3]=l=>Bl.value?.click())},t(l.$t("common.labels.browse")),1)])],32),Ml.value?(h(),o("div",K,[s("h4",null,t(l.$t("tools.pdfTool.split.options")),1),s("div",S,[s("label",Q,[m(s("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>xl.value=l),type:"radio",value:"pages"},null,512),[[y,xl.value]]),u(" "+t(l.$t("tools.pdfTool.split.byPages")),1)]),"pages"===xl.value?(h(),o("div",W,[m(s("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>Dl.value=l),type:"text",placeholder:l.$t("tools.pdfTool.split.pageRangesPlaceholder"),class:"form-input"},null,8,X),[[g,Dl.value]]),s("small",null,t(l.$t("tools.pdfTool.split.pageRangesHelp")),1)])):n("",!0)]),s("div",Y,[s("label",ll,[m(s("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>xl.value=l),type:"radio",value:"single"},null,512),[[y,xl.value]]),u(" "+t(l.$t("tools.pdfTool.split.singlePages")),1)])]),s("div",el,[s("button",{class:"btn btn-primary",disabled:yl.value,onClick:Vl},[yl.value?(h(),o("span",ol)):n("",!0),u(" "+t(yl.value?l.$t("common.labels.processing"):l.$t("tools.pdfTool.split.splitButton")),1)],8,al),s("button",{class:"btn btn-secondary",onClick:Pl},t(l.$t("common.labels.clear")),1)])])):n("",!0)])])):n("",!0),"compress"===ml.value?(h(),o("div",sl,[s("div",tl,[s("div",{class:"upload-area",onDrop:Nl,onDragover:e[10]||(e[10]=f(()=>{},["prevent"])),onDragenter:e[11]||(e[11]=f(()=>{},["prevent"]))},[s("input",{ref_key:"compressFileInput",ref:_l,type:"file",accept:".pdf",style:{display:"none"},onChange:Il},null,544),s("div",nl,[e[16]||(e[16]=s("svg",{class:"upload-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),s("polyline",{points:"17,8 12,3 7,8"}),s("line",{x1:"12",y1:"3",x2:"12",y2:"15"})],-1)),s("h3",null,t(l.$t("tools.pdfTool.compress.uploadTitle")),1),s("p",null,t(l.$t("tools.pdfTool.compress.uploadDescription")),1),s("button",{class:"btn btn-primary",onClick:e[9]||(e[9]=l=>_l.value?.click())},t(l.$t("common.labels.browse")),1)])],32),Fl.value?(h(),o("div",il,[s("h4",null,t(l.$t("tools.pdfTool.compress.options")),1),s("div",pl,[s("label",null,t(l.$t("tools.pdfTool.compress.quality")),1),m(s("select",{"onUpdate:modelValue":e[12]||(e[12]=l=>jl.value=l),class:"form-select"},[s("option",rl,t(l.$t("tools.pdfTool.compress.qualityLow")),1),s("option",cl,t(l.$t("tools.pdfTool.compress.qualityMedium")),1),s("option",ul,t(l.$t("tools.pdfTool.compress.qualityHigh")),1)],512),[[b,jl.value]])]),s("div",dl,[s("button",{class:"btn btn-primary",disabled:yl.value,onClick:Ul},[yl.value?(h(),o("span",fl)):n("",!0),u(" "+t(yl.value?l.$t("common.labels.processing"):l.$t("tools.pdfTool.compress.compressButton")),1)],8,vl),s("button",{class:"btn btn-secondary",onClick:ql},t(l.$t("common.labels.clear")),1)])])):n("",!0)])])):n("",!0)])]))}}),[["__scopeId","data-v-062230b9"]]);export{ml as default};
