import{a as e,r as t,o as a,w as o,e as n,f as l,t as r,y as s,M as i,q as u,I as c,F as v,g as d,s as h,n as g,J as p,j as f}from"./vendor-sPCxxDNi.js";import{_ as w}from"./index-BFyA9hmL.js";import"./qr-DE_AbQYC.js";const k={class:"signature-generator"},b={class:"tool-header"},x={class:"tool-description"},y={class:"generator-container"},m={class:"canvas-section"},C={class:"canvas-wrapper"},$={key:0,class:"canvas-placeholder"},G={class:"canvas-controls"},M=["disabled"],j=["disabled"],P={class:"settings-panel"},B={class:"setting-group"},R={class:"color-options"},T=["onClick"],L={class:"setting-group"},U={class:"setting-group"},I={class:"bg-options"},S=["onClick"],E={class:"export-panel"},H={class:"export-buttons"},V=w(e({__name:"SignatureGenerator",setup(e){const w=t(null);let V=null;const _=t(!1),D=t(!1),W=t("#000000"),J=t(3),q=t("transparent"),O=["#000000","#1f2937","#3b82f6","#ef4444","#22c55e","#8b5cf6"],F=["#ffffff","#f3f4f6","#fef3c7","#dbeafe"],N=t([]),X=t(-1),Y=t([]);function z(){V&&w.value&&("transparent"===q.value?V.clearRect(0,0,w.value.width,w.value.height):(V.fillStyle=q.value,V.fillRect(0,0,w.value.width,w.value.height)))}function A(e){const t=w.value;if(!t)return{x:0,y:0};const a=t.getBoundingClientRect();return{x:(e.clientX-a.left)*(t.width/a.width),y:(e.clientY-a.top)*(t.height/a.height)}}function K(e){_.value=!0,D.value=!0;const t=A(e);Y.value.push({...t,color:W.value,width:J.value,newPath:!0}),V&&(V.beginPath(),V.moveTo(t.x,t.y))}function Q(e){if(!_.value||!V)return;const t=A(e);Y.value.push({...t,color:W.value,width:J.value,newPath:!1}),V.strokeStyle=W.value,V.lineWidth=J.value,V.lineTo(t.x,t.y),V.stroke()}function Z(){_.value&&(_.value=!1,ae())}function ee(e){const t=e.touches[0];_.value=!0,D.value=!0;const a=A(t);Y.value.push({...a,color:W.value,width:J.value,newPath:!0}),V&&(V.beginPath(),V.moveTo(a.x,a.y))}function te(e){if(!_.value||!V)return;const t=A(e.touches[0]);Y.value.push({...t,color:W.value,width:J.value,newPath:!1}),V.strokeStyle=W.value,V.lineWidth=J.value,V.lineTo(t.x,t.y),V.stroke()}function ae(){if(!V||!w.value)return;const e=V.getImageData(0,0,w.value.width,w.value.height);X.value<N.value.length-1&&(N.value=N.value.slice(0,X.value+1)),N.value.push(e),X.value=N.value.length-1,N.value.length>50&&(N.value.shift(),X.value--)}function oe(){X.value>0&&V&&(X.value--,V.putImageData(N.value[X.value],0,0))}function ne(){X.value<N.value.length-1&&V&&(X.value++,V.putImageData(N.value[X.value],0,0))}function le(){V&&w.value&&(z(),Y.value=[],D.value=!1,ae())}function re(e){const t=w.value;if(!t)return;if("svg"===e)return void function(){const e=w.value;if(!e)return;let t=`<svg xmlns="http://www.w3.org/2000/svg" width="${e.width}" height="${e.height}">`;"transparent"!==q.value&&(t+=`<rect width="100%" height="100%" fill="${q.value}"/>`);let a="",o="",n=0;Y.value.forEach(e=>{e.newPath?(a&&(t+=`<path d="${a}" stroke="${o}" stroke-width="${n}" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`),a=`M ${e.x} ${e.y}`,o=e.color,n=e.width):a+=` L ${e.x} ${e.y}`}),a&&(t+=`<path d="${a}" stroke="${o}" stroke-width="${n}" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`);t+="</svg>";const l=new Blob([t],{type:"image/svg+xml"}),r=URL.createObjectURL(l),s=document.createElement("a");s.download="signature.svg",s.href=r,s.click(),URL.revokeObjectURL(r)}();const a=document.createElement("canvas");a.width=t.width,a.height=t.height;const o=a.getContext("2d");if(!o)return;"transparent"===q.value&&"jpeg"!==e||(o.fillStyle="transparent"===q.value?"#ffffff":q.value,o.fillRect(0,0,a.width,a.height)),o.drawImage(t,0,0);const n="jpeg"===e?"image/jpeg":"image/png",l=a.toDataURL(n,.95),r=document.createElement("a");r.download=`signature.${e}`,r.href=l,r.click()}async function se(){const e=w.value;if(e)try{const t=await new Promise(t=>{e.toBlob(e=>t(e),"image/png")});await navigator.clipboard.write([new ClipboardItem({"image/png":t})])}catch{const t=e.toDataURL("image/png");await navigator.clipboard.writeText(t)}}return a(()=>{!function(){const e=w.value;if(!e)return;if(e.width=e.offsetWidth,e.height=300,V=e.getContext("2d"),!V)return;V.lineCap="round",V.lineJoin="round",z(),ae()}()}),o(q,()=>{V&&w.value&&(z(),Y.value.forEach(e=>{V&&(e.newPath?(V.beginPath(),V.moveTo(e.x,e.y)):(V.strokeStyle=e.color,V.lineWidth=e.width,V.lineTo(e.x,e.y),V.stroke()))})),ae()}),(e,t)=>(f(),n("div",k,[l("div",b,[l("h1",null,r(e.$t("tools.signatureGenerator.title")),1),l("p",x,r(e.$t("tools.signatureGenerator.description")),1)]),l("div",y,[l("div",m,[l("div",C,[l("canvas",{ref_key:"canvasRef",ref:w,onMousedown:K,onMousemove:Q,onMouseup:Z,onMouseleave:Z,onTouchstart:i(ee,["prevent"]),onTouchmove:i(te,["prevent"]),onTouchend:Z},null,544),D.value?s("",!0):(f(),n("div",$,r(e.$t("tools.signatureGenerator.drawHere")),1))]),l("div",G,[l("button",{class:"control-btn",disabled:X.value<=0,onClick:oe},[t[6]||(t[6]=l("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M3 7v6h6"}),l("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})],-1)),u(" "+r(e.$t("tools.signatureGenerator.undo")),1)],8,M),l("button",{class:"control-btn",disabled:X.value>=N.value.length-1,onClick:ne},[t[7]||(t[7]=l("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M21 7v6h-6"}),l("path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"})],-1)),u(" "+r(e.$t("tools.signatureGenerator.redo")),1)],8,j),l("button",{class:"control-btn danger",onClick:le},[t[8]||(t[8]=l("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M3 6h18"}),l("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)),u(" "+r(e.$t("tools.signatureGenerator.clear")),1)])])]),l("div",P,[l("h3",null,r(e.$t("tools.signatureGenerator.settings")),1),l("div",B,[l("label",null,r(e.$t("tools.signatureGenerator.strokeColor")),1),l("div",R,[(f(),n(v,null,d(O,e=>l("button",{key:e,class:g(["color-btn",{active:W.value===e}]),style:h({backgroundColor:e}),onClick:t=>W.value=e},null,14,T)),64)),c(l("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>W.value=e),type:"color",class:"custom-color"},null,512),[[p,W.value]])])]),l("div",L,[l("label",null,r(e.$t("tools.signatureGenerator.strokeWidth"))+": "+r(J.value)+"px",1),c(l("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>J.value=e),type:"range",min:"1",max:"10",class:"range-input"},null,512),[[p,J.value,void 0,{number:!0}]])]),l("div",U,[l("label",null,r(e.$t("tools.signatureGenerator.backgroundColor")),1),l("div",I,[l("button",{class:g(["bg-btn transparent",{active:"transparent"===q.value}]),onClick:t[2]||(t[2]=e=>q.value="transparent")},t[9]||(t[9]=[l("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l("line",{x1:"3",y1:"3",x2:"21",y2:"21"})],-1)]),2),(f(),n(v,null,d(F,e=>l("button",{key:e,class:g(["bg-btn",{active:q.value===e}]),style:h({backgroundColor:e}),onClick:t=>q.value=e},null,14,S)),64))])])]),l("div",E,[l("h3",null,r(e.$t("tools.signatureGenerator.export")),1),l("div",H,[l("button",{class:"export-btn",onClick:t[3]||(t[3]=e=>re("png"))},t[10]||(t[10]=[l("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l("polyline",{points:"7,10 12,15 17,10"}),l("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),u(" PNG ",-1)])),l("button",{class:"export-btn",onClick:t[4]||(t[4]=e=>re("jpeg"))},t[11]||(t[11]=[l("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l("polyline",{points:"7,10 12,15 17,10"}),l("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),u(" JPEG ",-1)])),l("button",{class:"export-btn",onClick:t[5]||(t[5]=e=>re("svg"))},t[12]||(t[12]=[l("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l("polyline",{points:"7,10 12,15 17,10"}),l("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),u(" SVG ",-1)])),l("button",{class:"export-btn",onClick:se},[t[13]||(t[13]=l("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1)),u(" "+r(e.$t("tools.signatureGenerator.copy")),1)])])])])]))}}),[["__scopeId","data-v-2d7e5fe0"]]);export{V as default};
