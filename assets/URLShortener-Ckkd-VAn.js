import{a as e,u as l,r as t,c as a,o,e as s,f as r,t as n,y as u,I as i,J as c,N as v,F as h,g as d,j as p}from"./vendor-GAldOsJ5.js";import{b as y}from"./qr-DE_AbQYC.js";import{_ as m}from"./index-DcaCmn-e.js";const S={class:"tool-container"},b={class:"tool-header"},f={class:"tool-content"},g={class:"input-section"},$={class:"input-group"},k={class:"url-input-wrapper"},w=["placeholder"],C=["disabled"],x={key:0},U={key:1},q={key:0,class:"error-message"},I={class:"input-group"},A=["placeholder"],_={key:0,class:"error-message"},D={class:"input-group"},F={value:"0"},L={value:"1"},O={value:"7"},R={value:"30"},T={value:"365"},j={key:0,class:"result-section"},M={class:"result-card"},H={class:"url-result"},J={class:"url-display"},N=["value"],P={class:"url-info"},V={class:"info-item"},E={class:"info-label"},Q={class:"info-value"},z={class:"info-item"},W={class:"info-label"},Y={class:"info-value"},Z={class:"info-item"},B={class:"info-label"},G={class:"info-value"},K={key:0,class:"info-item"},X={class:"info-label"},ee={class:"info-value"},le={class:"action-buttons"},te={key:1,class:"qr-section"},ae={class:"qr-container"},oe={key:2,class:"history-section"},se={class:"history-list"},re={class:"history-info"},ne={class:"history-url"},ue={class:"history-short"},ie={class:"history-date"},ce={class:"history-actions"},ve=["onClick"],he=["onClick"],de=m(e({__name:"URLShortener",setup(e){const{t:m}=l(),de=t(""),pe=t(""),ye=t(0),me=t(""),Se=t(!1),be=t(!1),fe=t(!1),ge=t(""),$e=t(""),ke=t([]),we=t(),Ce=t(),xe=a(()=>{try{return new URL(de.value),!0}catch{return!1}}),Ue=a(()=>{if(!de.value||!me.value)return 0;const e=(de.value.length-me.value.length)/de.value.length*100;return Math.round(e)}),qe=a(()=>{if(0===ye.value)return null;const e=new Date;return e.setDate(e.getDate()+ye.value),e.toISOString()}),Ie=()=>{ge.value="",de.value&&!xe.value&&(ge.value=m("tools.urlShortener.invalidUrl"))},Ae=()=>{if($e.value="",pe.value){/^[a-zA-Z0-9-_]+$/.test(pe.value)||($e.value=m("tools.urlShortener.invalidAlias"))}},_e=async()=>{if(xe.value){Se.value=!0,await new Promise(e=>setTimeout(e,1e3));try{const e=pe.value||((e=6)=>{const l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="";for(let a=0;a<e;a++)t+=l.charAt(Math.floor(62*Math.random()));return t})(),l="https://short.ly/";me.value=l+e;const t={original:de.value,short:me.value,createdAt:(new Date).toISOString(),expiresAt:qe.value||void 0};ke.value.unshift(t),ke.value.length>10&&(ke.value=ke.value.slice(0,10)),je()}catch(e){}finally{Se.value=!1}}},De=async()=>{try{await navigator.clipboard.writeText(me.value),be.value=!0,setTimeout(()=>{be.value=!1},2e3)}catch(e){we.value&&(we.value.select(),document.execCommand("copy"),be.value=!0,setTimeout(()=>{be.value=!1},2e3))}},Fe=()=>{window.open(me.value,"_blank")},Le=async()=>{if(Ce.value)try{await y.toCanvas(Ce.value,me.value,{width:200,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}),fe.value=!0}catch(e){}},Oe=()=>{if(!Ce.value)return;const e=document.createElement("a");e.download="qr-code.png",e.href=Ce.value.toDataURL(),e.click()},Re=()=>{de.value="",pe.value="",ye.value=0,me.value="",fe.value=!1,ge.value="",$e.value=""},Te=()=>{ke.value=[],je()},je=()=>{localStorage.setItem("urlShortenerHistory",JSON.stringify(ke.value))},Me=e=>new Date(e).toLocaleString();return o(()=>{(()=>{const e=localStorage.getItem("urlShortenerHistory");if(e)try{ke.value=JSON.parse(e)}catch(l){}})()}),(e,l)=>(p(),s("div",S,[r("div",b,[r("h1",null,n(e.$t("tools.urlShortener.title")),1),r("p",null,n(e.$t("tools.urlShortener.description")),1)]),r("div",f,[r("div",g,[r("div",$,[r("label",null,n(e.$t("tools.urlShortener.originalUrl")),1),r("div",k,[i(r("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>de.value=e),type:"url",placeholder:e.$t("tools.urlShortener.urlPlaceholder"),class:"url-input",onInput:Ie},null,40,w),[[c,de.value]]),r("button",{disabled:!xe.value||Se.value,class:"shorten-btn",onClick:_e},[Se.value?(p(),s("span",x,n(e.$t("tools.urlShortener.shortening")),1)):(p(),s("span",U,n(e.$t("tools.urlShortener.shorten")),1))],8,C)]),ge.value?(p(),s("div",q,n(ge.value),1)):u("",!0)]),r("div",I,[r("label",null,n(e.$t("tools.urlShortener.customAlias"))+" ("+n(e.$t("common.optional"))+")",1),i(r("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>pe.value=e),type:"text",placeholder:e.$t("tools.urlShortener.aliasPlaceholder"),class:"alias-input",onInput:Ae},null,40,A),[[c,pe.value]]),$e.value?(p(),s("div",_,n($e.value),1)):u("",!0)]),r("div",D,[r("label",null,n(e.$t("tools.urlShortener.expiration")),1),i(r("select",{"onUpdate:modelValue":l[2]||(l[2]=e=>ye.value=e),class:"expiration-select"},[r("option",F,n(e.$t("tools.urlShortener.noExpiration")),1),r("option",L,n(e.$t("tools.urlShortener.oneDay")),1),r("option",O,n(e.$t("tools.urlShortener.oneWeek")),1),r("option",R,n(e.$t("tools.urlShortener.oneMonth")),1),r("option",T,n(e.$t("tools.urlShortener.oneYear")),1)],512),[[v,ye.value]])])]),me.value?(p(),s("div",j,[r("h3",null,n(e.$t("tools.urlShortener.result")),1),r("div",M,[r("div",H,[r("label",null,n(e.$t("tools.urlShortener.shortUrl")),1),r("div",J,[r("input",{ref_key:"resultInput",ref:we,value:me.value,readonly:"",class:"result-input"},null,8,N),r("button",{class:"copy-btn",onClick:De},n(be.value?e.$t("common.buttons.copied"):e.$t("common.buttons.copy")),1)])]),r("div",P,[r("div",V,[r("span",E,n(e.$t("tools.urlShortener.originalLength"))+":",1),r("span",Q,n(de.value.length)+" "+n(e.$t("tools.urlShortener.characters")),1)]),r("div",z,[r("span",W,n(e.$t("tools.urlShortener.shortLength"))+":",1),r("span",Y,n(me.value.length)+" "+n(e.$t("tools.urlShortener.characters")),1)]),r("div",Z,[r("span",B,n(e.$t("tools.urlShortener.reduction"))+":",1),r("span",G,n(Ue.value)+"%",1)]),qe.value?(p(),s("div",K,[r("span",X,n(e.$t("tools.urlShortener.expiresOn"))+":",1),r("span",ee,n(Me(qe.value)),1)])):u("",!0)]),r("div",le,[r("button",{class:"test-btn",onClick:Fe},n(e.$t("tools.urlShortener.testUrl")),1),r("button",{class:"qr-btn",onClick:Le},n(e.$t("tools.urlShortener.generateQR")),1),r("button",{class:"reset-btn",onClick:Re},n(e.$t("tools.urlShortener.createAnother")),1)])])])):u("",!0),fe.value?(p(),s("div",te,[r("h3",null,n(e.$t("tools.urlShortener.qrCode")),1),r("div",ae,[r("canvas",{ref_key:"qrCanvas",ref:Ce,class:"qr-canvas"},null,512),r("button",{class:"download-qr-btn",onClick:Oe},n(e.$t("tools.urlShortener.downloadQR")),1)])])):u("",!0),ke.value.length>0?(p(),s("div",oe,[r("h3",null,n(e.$t("tools.urlShortener.recentUrls")),1),r("div",se,[(p(!0),s(h,null,d(ke.value,(l,t)=>(p(),s("div",{key:t,class:"history-item"},[r("div",re,[r("div",ne,n(l.original),1),r("div",ue,n(l.short),1),r("div",ie,n(Me(l.createdAt)),1)]),r("div",ce,[r("button",{class:"copy-btn-small",onClick:e=>(async e=>{try{await navigator.clipboard.writeText(e)}catch(l){}})(l.short)},n(e.$t("common.buttons.copy")),9,ve),r("button",{class:"remove-btn",onClick:e=>(e=>{ke.value.splice(e,1),je()})(t)},n(e.$t("common.buttons.delete")),9,he)])]))),128))]),r("button",{class:"clear-history-btn",onClick:Te},n(e.$t("tools.urlShortener.clearHistory")),1)])):u("",!0)])]))}}),[["__scopeId","data-v-aee44435"]]);export{de as default};
