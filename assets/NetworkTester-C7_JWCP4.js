import{a as e,r as t,c as s,e as o,f as l,y as a,t as r,n,I as i,J as c,Q as u,F as p,g as d,N as v,k as m,s as w,j as T}from"./vendor-GAldOsJ5.js";import{_ as h}from"./index-seUOhGQe.js";import"./qr-DE_AbQYC.js";const k={class:"network-tester"},b={class:"tool-header"},f={class:"test-tabs"},y={key:0,class:"tab-content"},g={class:"test-input"},$={class:"input-wrapper"},A=["placeholder"],P=["disabled"],S={key:0,class:"ping-results"},M={class:"results-container"},E={class:"ping-time"},C={key:0,class:"ping-stats"},x={class:"stat-item"},D={class:"stat-label"},N={class:"stat-value"},R={class:"stat-item"},H={class:"stat-label"},I={class:"stat-value"},U={class:"stat-item"},j={class:"stat-label"},O={class:"stat-value"},V={key:1,class:"tab-content"},X={class:"test-input"},L={class:"input-wrapper"},_=["placeholder"],F=["disabled"],q={key:0,class:"dns-results"},B={class:"dns-records"},K={class:"record-type"},W={class:"record-value"},J={class:"record-ttl"},Q={key:2,class:"tab-content"},Y={class:"test-input"},z={class:"input-wrapper"},G=["placeholder"],Z=["placeholder"],ee=["disabled"],te={class:"port-presets"},se={class:"preset-buttons"},oe=["title","onClick"],le={key:0,class:"port-results"},ae={class:"port-list"},re={class:"port-info"},ne={class:"port-number"},ie={class:"port-service"},ce={key:3,class:"tab-content"},ue={class:"speed-test-container"},pe={class:"speed-test-controls"},de=["disabled"],ve={key:0,class:"speed-results"},me={class:"speed-metrics"},we={class:"speed-metric"},Te={class:"metric-info"},he={class:"metric-label"},ke={class:"metric-value"},be={class:"speed-metric"},fe={class:"metric-info"},ye={class:"metric-label"},ge={class:"metric-value"},$e={key:0,class:"speed-progress"},Ae={class:"progress-bar"},Pe={class:"progress-text"},Se={class:"network-info"},Me={class:"info-grid"},Ee={class:"info-item"},Ce={class:"info-item"},xe={class:"info-item"},De={class:"info-item"},Ne=h(e({__name:"NetworkTester",setup(e){const h=t("ping"),Ne=t("google.com"),Re=t(!1),He=t([]),Ie=t("google.com"),Ue=t("A"),je=t(!1),Oe=t([]),Ve=t("google.com"),Xe=t(80),Le=t(!1),_e=t([]),Fe=t(!1),qe=t({}),Be=t(0),Ke=t(""),We=[{port:21,service:"FTP",description:"File Transfer Protocol"},{port:22,service:"SSH",description:"Secure Shell"},{port:23,service:"Telnet",description:"Telnet Protocol"},{port:25,service:"SMTP",description:"Simple Mail Transfer Protocol"},{port:53,service:"DNS",description:"Domain Name System"},{port:80,service:"HTTP",description:"Hypertext Transfer Protocol"},{port:110,service:"POP3",description:"Post Office Protocol v3"},{port:143,service:"IMAP",description:"Internet Message Access Protocol"},{port:443,service:"HTTPS",description:"HTTP Secure"},{port:993,service:"IMAPS",description:"IMAP over SSL"},{port:995,service:"POP3S",description:"POP3 over SSL"}],Je=s(()=>{if(0===He.value.length)return null;const e=He.value.map(e=>e.time);return{avg:Math.round(e.reduce((e,t)=>e+t,0)/e.length),min:Math.min(...e),max:Math.max(...e)}}),Qe=async()=>{if(Ne.value.trim()&&!Re.value){Re.value=!0,He.value=[];for(let t=0;t<4;t++){const s=performance.now();try{const e=new AbortController,t=setTimeout(()=>e.abort(),5e3);let o=`https://${Ne.value}`;Ne.value.startsWith("http")||(o=`https://cors-anywhere.herokuapp.com/http://${Ne.value}`),await fetch(o,{method:"HEAD",mode:"no-cors",signal:e.signal}),clearTimeout(t);const l=performance.now(),a=Math.round(l-s);He.value.push({time:a,message:`Reply from ${Ne.value}`,status:"success"})}catch(e){const t=performance.now(),o=Math.round(t-s);He.value.push({time:o>5e3?5e3:o,message:e instanceof Error&&"AbortError"===e.name?"Request timeout":`Error: ${e instanceof Error?e.message:"Network error"}`,status:"error"})}t<3&&await new Promise(e=>setTimeout(e,1e3))}Re.value=!1}},Ye=async()=>{if(Ie.value.trim()&&!je.value){je.value=!0,Oe.value=[];try{const e=`https://dns.google/resolve?name=${encodeURIComponent(Ie.value)}&type=${Ue.value}`,t=await fetch(e,{headers:{Accept:"application/dns-json"}});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const s=await t.json();s.Answer&&s.Answer.length>0?Oe.value=s.Answer.map(e=>({type:ze(e.type),value:e.data,ttl:e.TTL||0})):s.Authority&&s.Authority.length>0?Oe.value=s.Authority.map(e=>({type:ze(e.type),value:e.data,ttl:e.TTL||0})):Oe.value=[{type:Ue.value,value:"No records found",ttl:0}]}catch(e){Oe.value=[{type:"ERROR",value:e instanceof Error?e.message:"DNS lookup failed",ttl:0}]}je.value=!1}},ze=e=>({1:"A",2:"NS",5:"CNAME",6:"SOA",15:"MX",16:"TXT",28:"AAAA",33:"SRV"}[e]||`TYPE${e}`),Ge=async()=>{Ve.value.trim()&&Xe.value&&!Le.value&&await Ze(Xe.value)},Ze=async e=>{if(Le.value)return;Le.value=!0;const t=We.find(t=>t.port===e)?.service||"Unknown";let s="closed";try{if(80===e||443===e){const t=`${443===e?"https":"http"}://${Ve.value}:${e}`,o=new AbortController,l=setTimeout(()=>o.abort(),3e3);try{await fetch(t,{method:"HEAD",mode:"no-cors",signal:o.signal}),clearTimeout(l),s="open"}catch(a){clearTimeout(l),a instanceof Error&&"AbortError"!==a.name&&(s="open")}}else try{const t=new WebSocket(`ws://${Ve.value}:${e}`);await new Promise((e,o)=>{const l=setTimeout(()=>{t.close(),o(new Error("timeout"))},3e3);t.onopen=()=>{clearTimeout(l),t.close(),s="open",e(!0)},t.onerror=()=>{clearTimeout(l),o(new Error("connection failed"))}})}catch(a){s="closed"}}catch(a){s="closed"}const o={port:e,service:t,status:s},l=_e.value.findIndex(t=>t.port===e);l>=0?_e.value[l]=o:_e.value.push(o),Le.value=!1},et=async()=>{if(!Fe.value){Fe.value=!0,Be.value=0,qe.value={};try{Ke.value="Testing download speed...";const e=await tt();qe.value.download=e,Be.value=50,Ke.value="Testing upload speed...";const t=await st();qe.value.upload=t,Be.value=100,Ke.value="Speed test completed"}catch(e){Ke.value="Speed test failed"}Fe.value=!1}},tt=async()=>{const e=[1,5,10];let t=0,s=0;for(const l of e)try{const e="https://httpbin.org/bytes/"+1024*l*1024,o=performance.now(),a=await fetch(e);if(!a.ok)throw new Error("Download failed");await a.blob();const r=performance.now();t+=8*l/((r-o)/1e3),s++}catch(o){}return s>0?Math.round(t/s):0},st=async()=>{const e=[1,2];let t=0,s=0;for(const l of e)try{const e=new Blob([new ArrayBuffer(1024*l*1024)]),o=new FormData;o.append("file",e,"test.bin");const a=performance.now(),r=await fetch("https://httpbin.org/post",{method:"POST",body:o});if(!r.ok)throw new Error("Upload failed");await r.json();const n=performance.now();t+=8*l/((n-a)/1e3),s++}catch(o){}return s>0?Math.round(t/s):0};return(e,t)=>(T(),o("div",k,[l("div",b,[l("h1",null,r(e.$t("tools.networkTester.title")),1),l("p",null,r(e.$t("tools.networkTester.description")),1)]),l("div",f,[l("button",{class:n([{active:"ping"===h.value},"tab-btn"]),onClick:t[0]||(t[0]=e=>h.value="ping")},r(e.$t("tools.networkTester.ping")),3),l("button",{class:n([{active:"dns"===h.value},"tab-btn"]),onClick:t[1]||(t[1]=e=>h.value="dns")},r(e.$t("tools.networkTester.dns")),3),l("button",{class:n([{active:"port"===h.value},"tab-btn"]),onClick:t[2]||(t[2]=e=>h.value="port")},r(e.$t("tools.networkTester.portScan")),3),l("button",{class:n([{active:"speed"===h.value},"tab-btn"]),onClick:t[3]||(t[3]=e=>h.value="speed")},r(e.$t("tools.networkTester.speedTest")),3)]),"ping"===h.value?(T(),o("div",y,[l("div",g,[l("label",null,r(e.$t("tools.networkTester.enterHost")),1),l("div",$,[i(l("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>Ne.value=e),type:"text",class:"host-input",placeholder:e.$t("tools.networkTester.hostPlaceholder"),onKeyup:u(Qe,["enter"])},null,40,A),[[c,Ne.value]]),l("button",{disabled:Re.value,class:"test-btn",onClick:Qe},r(Re.value?e.$t("tools.networkTester.testing"):e.$t("tools.networkTester.ping")),9,P)])]),He.value.length>0?(T(),o("div",S,[l("h3",null,r(e.$t("tools.networkTester.pingResults")),1),l("div",M,[(T(!0),o(p,null,d(He.value,(e,t)=>(T(),o("div",{key:t,class:"ping-result"},[l("span",E,r(e.time)+"ms",1),l("span",{class:n(["ping-status",e.status])},r(e.message),3)]))),128))]),Je.value?(T(),o("div",C,[l("div",x,[l("span",D,r(e.$t("tools.networkTester.avgTime"))+":",1),l("span",N,r(Je.value.avg)+"ms",1)]),l("div",R,[l("span",H,r(e.$t("tools.networkTester.minTime"))+":",1),l("span",I,r(Je.value.min)+"ms",1)]),l("div",U,[l("span",j,r(e.$t("tools.networkTester.maxTime"))+":",1),l("span",O,r(Je.value.max)+"ms",1)])])):a("",!0)])):a("",!0)])):a("",!0),"dns"===h.value?(T(),o("div",V,[l("div",X,[l("label",null,r(e.$t("tools.networkTester.enterDomain")),1),l("div",L,[i(l("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>Ie.value=e),type:"text",class:"host-input",placeholder:e.$t("tools.networkTester.domainPlaceholder"),onKeyup:u(Ye,["enter"])},null,40,_),[[c,Ie.value]]),i(l("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>Ue.value=e),class:"dns-type-select"},[...t[9]||(t[9]=[m('<option value="A" data-v-4530b695> A </option><option value="AAAA" data-v-4530b695> AAAA </option><option value="CNAME" data-v-4530b695> CNAME </option><option value="MX" data-v-4530b695> MX </option><option value="TXT" data-v-4530b695> TXT </option>',5)])],512),[[v,Ue.value]]),l("button",{disabled:je.value,class:"test-btn",onClick:Ye},r(je.value?e.$t("tools.networkTester.looking"):e.$t("tools.networkTester.lookup")),9,F)])]),Oe.value.length>0?(T(),o("div",q,[l("h3",null,r(e.$t("tools.networkTester.dnsResults")),1),l("div",B,[(T(!0),o(p,null,d(Oe.value,(e,t)=>(T(),o("div",{key:t,class:"dns-record"},[l("div",K,r(e.type),1),l("div",W,r(e.value),1),l("div",J," TTL: "+r(e.ttl)+"s ",1)]))),128))])])):a("",!0)])):a("",!0),"port"===h.value?(T(),o("div",Q,[l("div",Y,[l("label",null,r(e.$t("tools.networkTester.enterHostPort")),1),l("div",z,[i(l("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>Ve.value=e),type:"text",class:"host-input",placeholder:e.$t("tools.networkTester.hostPlaceholder")},null,8,G),[[c,Ve.value]]),i(l("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>Xe.value=e),type:"number",class:"port-input",placeholder:e.$t("tools.networkTester.port"),min:"1",max:"65535"},null,8,Z),[[c,Xe.value]]),l("button",{disabled:Le.value,class:"test-btn",onClick:Ge},r(Le.value?e.$t("tools.networkTester.scanning"):e.$t("tools.networkTester.scan")),9,ee)])]),l("div",te,[l("h4",null,r(e.$t("tools.networkTester.commonPorts")),1),l("div",se,[(T(),o(p,null,d(We,e=>l("button",{key:e.port,class:"preset-btn",title:e.description,onClick:t=>Ze(e.port)},r(e.port)+" ("+r(e.service)+") ",9,oe)),64))])]),_e.value.length>0?(T(),o("div",le,[l("h3",null,r(e.$t("tools.networkTester.portResults")),1),l("div",ae,[(T(!0),o(p,null,d(_e.value,(t,s)=>(T(),o("div",{key:s,class:"port-result"},[l("div",re,[l("span",ne,r(t.port),1),l("span",ie,r(t.service),1)]),l("div",{class:n(["port-status",t.status])},r(e.$t(`tools.networkTester.${t.status}`)),3)]))),128))])])):a("",!0)])):a("",!0),"speed"===h.value?(T(),o("div",ce,[l("div",ue,[l("div",pe,[l("button",{disabled:Fe.value,class:"test-btn speed-test-btn",onClick:et},r(Fe.value?e.$t("tools.networkTester.speedTesting"):e.$t("tools.networkTester.startSpeedTest")),9,de)]),qe.value.download||qe.value.upload?(T(),o("div",ve,[l("h3",null,r(e.$t("tools.networkTester.speedResults")),1),l("div",me,[l("div",we,[t[10]||(t[10]=l("div",{class:"metric-icon"}," ⬇️ ",-1)),l("div",Te,[l("div",he,r(e.$t("tools.networkTester.downloadSpeed")),1),l("div",ke,r(qe.value.download||"--")+" Mbps ",1)])]),l("div",be,[t[11]||(t[11]=l("div",{class:"metric-icon"}," ⬆️ ",-1)),l("div",fe,[l("div",ye,r(e.$t("tools.networkTester.uploadSpeed")),1),l("div",ge,r(qe.value.upload||"--")+" Mbps ",1)])])]),Fe.value?(T(),o("div",$e,[l("div",Ae,[l("div",{class:"progress-fill",style:w({width:Be.value+"%"})},null,4)]),l("div",Pe,r(Ke.value),1)])):a("",!0)])):a("",!0)])])):a("",!0),l("div",Se,[l("h3",null,r(e.$t("tools.networkTester.networkInfo")),1),l("div",Me,[l("div",Ee,[l("h4",null,r(e.$t("tools.networkTester.aboutPing")),1),l("p",null,r(e.$t("tools.networkTester.pingDescription")),1)]),l("div",Ce,[l("h4",null,r(e.$t("tools.networkTester.aboutDNS")),1),l("p",null,r(e.$t("tools.networkTester.dnsDescription")),1)]),l("div",xe,[l("h4",null,r(e.$t("tools.networkTester.aboutPorts")),1),l("p",null,r(e.$t("tools.networkTester.portsDescription")),1)]),l("div",De,[l("h4",null,r(e.$t("tools.networkTester.aboutSpeedTest")),1),l("p",null,r(e.$t("tools.networkTester.speedTestDescription")),1)])])])]))}}),[["__scopeId","data-v-4530b695"]]);export{Ne as default};
