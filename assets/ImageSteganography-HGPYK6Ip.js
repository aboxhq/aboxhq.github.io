import{a as e,u as a,r as t,e as l,f as s,t as o,y as n,I as c,J as i,j as r}from"./vendor-GAldOsJ5.js";import{_ as g}from"./index-DcaCmn-e.js";import"./qr-DE_AbQYC.js";const d={class:"image-steganography"},u={class:"tool-header"},m={class:"tool-title"},p={class:"tool-description"},h={class:"tool-content"},v={class:"steg-layout"},f={class:"steg-section card"},b={class:"section-title"},y={class:"form-group"},w={class:"form-label"},S={class:"file-input-wrapper"},I={key:0,class:"file-selected-label"},$={class:"form-group"},k={class:"form-label"},x=["placeholder"],C={class:"form-actions"},U=["disabled"],_={key:0,class:"result-section"},j=["src"],D={class:"steg-section card"},L={class:"section-title"},R={class:"form-group"},E={class:"form-label"},A={class:"file-input-wrapper"},F={key:0,class:"file-selected-label"},O={class:"form-actions"},T=["disabled"],V={key:0,class:"result-section"},q={class:"form-label"},J=g(e({__name:"ImageSteganography",setup(e){const{t:g}=a(),J=t(null),M=t(""),N=t(""),P=t(null),z=t(""),B=t(null),G=t(null),H=()=>{B.value?.click()},K=()=>{G.value?.click()},Q=e=>{const a=e.target.files?.[0];if(!a)return;const t=new Image;t.onload=()=>{J.value=t},t.src=URL.createObjectURL(a)},W=e=>{const a=e.target.files?.[0];if(!a)return;const t=new Image;t.onload=()=>{P.value=t},t.src=URL.createObjectURL(a)},X=()=>{if(!J.value||!M.value)return;const e=document.createElement("canvas"),a=e.getContext("2d");if(!a)return;e.width=J.value.width,e.height=J.value.height,a.drawImage(J.value,0,0);const t=a.getImageData(0,0,e.width,e.height),l=t.data,s=(new TextEncoder).encode(M.value),o=[];for(const n of s)o.push(...n.toString(2).padStart(8,"0").split("").map(Number));if(o.push(...Array(8).fill(0)),o.length>l.length)alert(g("tools.imageSteganography.noSpace"));else{for(let e=0;e<o.length;e++)l[e]=254&l[e]|o[e];a.putImageData(t,0,0),N.value=e.toDataURL()}},Y=()=>{if(!P.value)return;const e=document.createElement("canvas"),a=e.getContext("2d");if(!a)return;e.width=P.value.width,e.height=P.value.height,a.drawImage(P.value,0,0);const{data:t}=a.getImageData(0,0,e.width,e.height),l=[];let s=0,o=0;for(let r=0;r<t.length;r++)if(s=s<<1|1&t[r],o++,8===o){if(0===s)break;l.push(s),s=0,o=0}let n="";try{n=(new TextDecoder).decode(new Uint8Array(l))}catch(i){n=""}const c=n&&/[\w\u4e00-\u9fa5]/.test(n);z.value=c?n:g("tools.imageSteganography.noMessage")},Z=()=>{const e=document.createElement("a");e.href=N.value,e.download="steganography.png",e.click()};return(e,a)=>(r(),l("div",d,[s("div",u,[s("h1",m,o(e.$t("tools.imageSteganography.title")),1),s("p",p,o(e.$t("tools.imageSteganography.description")),1)]),s("div",h,[s("div",v,[s("div",f,[s("h2",b,o(e.$t("tools.imageSteganography.encode")),1),s("div",y,[s("label",w,o(e.$t("tools.imageSteganography.selectImage")),1),s("div",S,[s("input",{ref_key:"encodeFileInput",ref:B,type:"file",accept:"image/*",class:"form-input file-input-hidden",onChange:Q},null,544),s("button",{type:"button",class:"btn btn-secondary file-btn",onClick:H},o(e.$t("tools.imageSteganography.selectImage")),1),J.value?(r(),l("span",I,o(J.value?.src?e.$t("tools.imageSteganography.imageSelected"):""),1)):n("",!0)])]),s("div",$,[s("label",k,o(e.$t("common.labels.text")),1),c(s("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>M.value=e),placeholder:e.$t("tools.imageSteganography.messagePlaceholder"),class:"form-textarea",rows:"3"},null,8,x),[[i,M.value]])]),s("div",C,[s("button",{class:"btn btn-primary",disabled:!J.value||!M.value,onClick:X},o(e.$t("tools.imageSteganography.encode")),9,U)]),N.value?(r(),l("div",_,[s("img",{src:N.value,alt:"encoded",class:"preview-image"},null,8,j),s("button",{class:"btn btn-secondary",onClick:Z},o(e.$t("common.buttons.download")),1)])):n("",!0)]),a[2]||(a[2]=s("div",{class:"steg-divider"},null,-1)),s("div",D,[s("h2",L,o(e.$t("tools.imageSteganography.decode")),1),s("div",R,[s("label",E,o(e.$t("tools.imageSteganography.selectImage")),1),s("div",A,[s("input",{ref_key:"decodeFileInput",ref:G,type:"file",accept:"image/*",class:"form-input file-input-hidden",onChange:W},null,544),s("button",{type:"button",class:"btn btn-secondary file-btn",onClick:K},o(e.$t("tools.imageSteganography.selectImage")),1),P.value?(r(),l("span",F,o(P.value?.src?e.$t("tools.imageSteganography.imageSelected"):""),1)):n("",!0)])]),s("div",O,[s("button",{class:"btn btn-primary",disabled:!P.value,onClick:Y},o(e.$t("tools.imageSteganography.decode")),9,T)]),z.value?(r(),l("div",V,[s("label",q,o(e.$t("common.labels.result")),1),c(s("textarea",{"onUpdate:modelValue":a[1]||(a[1]=e=>z.value=e),class:"form-textarea",rows:"3",readonly:""},null,512),[[i,z.value]])])):n("",!0)])])])]))}}),[["__scopeId","data-v-c10fad14"]]);export{J as default};
