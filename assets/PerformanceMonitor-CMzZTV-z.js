import{a as e,u as t,r as o,L as i,c as a,o as s,b as n,e as r,f as l,t as c,n as m,s as d,F as p,g as v,j as u}from"./vendor-GAldOsJ5.js";import{F as f}from"./utils-CpTIjOSr.js";import{_ as M}from"./index-DcaCmn-e.js";import"./qr-DE_AbQYC.js";const S={class:"performance-monitor"},g={class:"tool-header"},b={class:"monitor-container"},h={class:"metrics-overview"},y={class:"metric-card"},T={class:"metric-content"},z={class:"metric-value"},$={class:"metric-label"},w={class:"metric-card"},C={class:"metric-content"},k={class:"metric-value"},H={class:"metric-label"},E={class:"metric-card"},J={class:"metric-content"},L={class:"metric-value"},P={class:"metric-label"},j={class:"metric-card"},x={class:"metric-content"},F={class:"metric-value"},B={class:"metric-label"},I={class:"metric-card"},q={class:"metric-content"},O={class:"metric-label"},U={class:"charts-section"},_={class:"chart-container"},A={class:"memory-chart"},D={class:"memory-bar"},G={class:"memory-info"},K={class:"chart-container"},N={class:"network-timeline"},R={class:"timing-label"},Q={class:"timing-visual"},V={class:"timing-value"},W={class:"real-time-metrics"},X={class:"metrics-grid"},Y={class:"real-time-metric"},Z={class:"metric-name"},ee={class:"metric-value"},te={class:"real-time-metric"},oe={class:"metric-name"},ie={class:"metric-value"},ae={class:"real-time-metric"},se={class:"metric-name"},ne={class:"metric-value"},re={class:"real-time-metric"},le={class:"metric-name"},ce={class:"metric-value"},me={class:"performance-tips"},de={class:"tips-list"},pe={class:"tip-icon"},ve={class:"tip-content"},ue={class:"tip-title"},fe={class:"tip-description"},Me={class:"resource-analysis"},Se={class:"resource-table"},ge={class:"table-header"},be={class:"header-cell"},he={class:"header-cell"},ye={class:"header-cell"},Te={class:"header-cell"},ze={class:"table-cell"},$e={class:"table-cell"},we={class:"table-cell"},Ce={class:"table-cell"},ke={class:"monitor-actions"},He=["disabled"],Ee=["disabled"],Je=M(e({__name:"PerformanceMonitor",setup(e){const{t:M}=t(),Je=o(!1),Le=o(0),Pe=o(0),je=o(0),xe=o("Unknown"),Fe=o(0),Be=i({loadTime:0,domContentLoaded:0,firstPaint:0,firstContentfulPaint:0}),Ie=i({usedJSHeapSize:0,totalJSHeapSize:0,jsHeapSizeLimit:0}),qe=o([]),Oe=o([]),Ue=a(()=>[{id:"1",title:M("tools.performanceMonitor.tips.optimizeImages.title"),description:M("tools.performanceMonitor.tips.optimizeImages.description"),icon:"ðŸ–¼ï¸",severity:"info"},{id:"2",title:M("tools.performanceMonitor.tips.minimizeJavaScript.title"),description:M("tools.performanceMonitor.tips.minimizeJavaScript.description"),icon:"ðŸ“¦",severity:"warning"},{id:"3",title:M("tools.performanceMonitor.tips.enableCompression.title"),description:M("tools.performanceMonitor.tips.enableCompression.description"),icon:"ðŸ—œï¸",severity:"info"}]);let _e=null,Ae=0,De=performance.now();const Ge=a(()=>0===Ie.totalJSHeapSize?0:Ie.usedJSHeapSize/Ie.totalJSHeapSize*100),Ke=()=>{const e=performance.memory;e&&(Ie.usedJSHeapSize=e.usedJSHeapSize,Ie.totalJSHeapSize=e.totalJSHeapSize,Ie.jsHeapSizeLimit=e.jsHeapSizeLimit)},Ne=()=>{const e=performance.now();Pe.value=e-De,De=e,Ae++,Ae%60==0&&(Le.value=Math.round(1e3/Pe.value)),Je.value&&requestAnimationFrame(Ne)},Re=()=>{Je.value=!0,requestAnimationFrame(Ne),_e=window.setInterval(()=>{Ke(),(()=>{const e=50*Math.min(Pe.value/16.67,2)+Ge.value/100*30;je.value=.8*je.value+.2*Math.min(e,100)})(),(()=>{let e=100;Be.loadTime>3e3?e-=30:Be.loadTime>1e3&&(e-=15),Be.firstContentfulPaint>2500?e-=25:Be.firstContentfulPaint>1500&&(e-=10),Ge.value>80?e-=20:Ge.value>60&&(e-=10),Le.value<30?e-=20:Le.value<50&&(e-=10),je.value>80?e-=15:je.value>60&&(e-=8),Fe.value=Math.max(0,e)})()},1e3)},Qe=()=>{Je.value=!1,_e&&(clearInterval(_e),_e=null)},Ve=()=>{const e={timestamp:(new Date).toISOString(),performanceMetrics:Be,memoryInfo:Ie,networkTimings:qe.value,resourceMetrics:Oe.value,realTimeMetrics:{fps:Le.value,frameTime:Pe.value,cpuUsage:je.value,connectionType:xe.value},performanceScore:Fe.value},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"});f.saveAs(t,`performance-report-${(new Date).toISOString().split("T")[0]}.json`)},We=()=>{Object.assign(Be,{loadTime:0,domContentLoaded:0,firstPaint:0,firstContentfulPaint:0}),Object.assign(Ie,{usedJSHeapSize:0,totalJSHeapSize:0,jsHeapSizeLimit:0}),qe.value=[],Oe.value=[],Le.value=0,Pe.value=0,je.value=0,Fe.value=0},Xe=e=>{if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KB","MB","GB"][t]};return s(()=>{(()=>{const e=performance.getEntriesByType("navigation")[0];e&&(Be.loadTime=Math.round(e.loadEventEnd-e.fetchStart),Be.domContentLoaded=Math.round(e.domContentLoadedEventEnd-e.fetchStart)),performance.getEntriesByType("paint").forEach(e=>{"first-paint"===e.name?Be.firstPaint=Math.round(e.startTime):"first-contentful-paint"===e.name&&(Be.firstContentfulPaint=Math.round(e.startTime))})})(),Ke(),(()=>{const e=performance.getEntriesByType("navigation")[0];if(e){const t=[{name:M("tools.performanceMonitor.networkTimings.dnsLookup"),duration:e.domainLookupEnd-e.domainLookupStart,color:"#ff6b6b"},{name:M("tools.performanceMonitor.networkTimings.tcpConnect"),duration:e.connectEnd-e.connectStart,color:"#4ecdc4"},{name:M("tools.performanceMonitor.networkTimings.request"),duration:e.responseStart-e.requestStart,color:"#45b7d1"},{name:M("tools.performanceMonitor.networkTimings.response"),duration:e.responseEnd-e.responseStart,color:"#96ceb4"},{name:M("tools.performanceMonitor.networkTimings.domProcessing"),duration:e.domContentLoadedEventEnd-e.responseEnd,color:"#feca57"}],o=Math.max(...t.map(e=>e.duration));qe.value=t.map(e=>({...e,duration:Math.round(e.duration),percentage:e.duration/o*100}))}})(),(()=>{const e=performance.getEntriesByType("resource");Oe.value=e.slice(0,10).map(e=>({name:e.name.split("/").pop()||e.name,type:e.initiatorType,size:e.transferSize||0,duration:e.responseEnd-e.requestStart}))})(),(()=>{const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;e&&(xe.value=e.effectiveType||"Unknown")})()}),n(()=>{Qe()}),(e,t)=>{return u(),r("div",S,[l("div",g,[l("h1",null,c(e.$t("tools.performanceMonitor.title")),1),l("p",null,c(e.$t("tools.performanceMonitor.description")),1)]),l("div",b,[l("div",h,[l("div",y,[t[0]||(t[0]=l("div",{class:"metric-icon"}," âš¡ ",-1)),l("div",T,[l("div",z,c(Be.loadTime)+"ms ",1),l("div",$,c(e.$t("tools.performanceMonitor.loadTime")),1)])]),l("div",w,[t[1]||(t[1]=l("div",{class:"metric-icon"}," ðŸŽ¯ ",-1)),l("div",C,[l("div",k,c(Be.domContentLoaded)+"ms ",1),l("div",H,c(e.$t("tools.performanceMonitor.domContentLoaded")),1)])]),l("div",E,[t[2]||(t[2]=l("div",{class:"metric-icon"}," ðŸ–¼ï¸ ",-1)),l("div",J,[l("div",L,c(Be.firstPaint)+"ms ",1),l("div",P,c(e.$t("tools.performanceMonitor.firstPaint")),1)])]),l("div",j,[t[3]||(t[3]=l("div",{class:"metric-icon"}," ðŸ“Š ",-1)),l("div",x,[l("div",F,c(Be.firstContentfulPaint)+"ms ",1),l("div",B,c(e.$t("tools.performanceMonitor.firstContentfulPaint")),1)])]),l("div",I,[t[4]||(t[4]=l("div",{class:"metric-icon"}," ðŸ† ",-1)),l("div",q,[l("div",{class:m(["metric-value",(o=Fe.value,o>=90?"score-excellent":o>=70?"score-good":o>=50?"score-fair":"score-poor")])},c(Fe.value.toFixed(0))+"/100 ",3),l("div",O,c(e.$t("tools.performanceMonitor.performanceScore")),1)])])]),l("div",U,[l("div",_,[l("h3",null,c(e.$t("tools.performanceMonitor.memoryUsage")),1),l("div",A,[l("div",D,[l("div",{class:"memory-used",style:d({width:`${Ge.value}%`})},null,4)]),l("div",G,[l("span",null,c(Xe(Ie.usedJSHeapSize))+" / "+c(Xe(Ie.totalJSHeapSize)),1),l("span",null,c(Ge.value.toFixed(1))+"%",1)])])]),l("div",K,[l("h3",null,c(e.$t("tools.performanceMonitor.networkTiming")),1),l("div",N,[(u(!0),r(p,null,v(qe.value,(e,t)=>(u(),r("div",{key:t,class:"timing-bar"},[l("div",R,c(e.name),1),l("div",Q,[l("div",{class:"timing-segment",style:d({width:`${e.percentage}%`,backgroundColor:e.color})},null,4),l("span",V,c(e.duration)+"ms",1)])]))),128))])])]),l("div",W,[l("h3",null,c(e.$t("tools.performanceMonitor.realTimeMetrics")),1),l("div",X,[l("div",Y,[l("div",Z,c(e.$t("tools.performanceMonitor.fps")),1),l("div",ee,c(Le.value),1)]),l("div",te,[l("div",oe,c(e.$t("tools.performanceMonitor.frameTime")),1),l("div",ie,c(Pe.value.toFixed(2))+"ms ",1)]),l("div",ae,[l("div",se,c(e.$t("tools.performanceMonitor.cpuUsage")),1),l("div",ne,c(je.value.toFixed(1))+"% ",1)]),l("div",re,[l("div",le,c(e.$t("tools.performanceMonitor.connectionType")),1),l("div",ce,c(xe.value),1)])])]),l("div",me,[l("h3",null,c(e.$t("tools.performanceMonitor.optimizationTips")),1),l("div",de,[(u(!0),r(p,null,v(Ue.value,e=>(u(),r("div",{key:e.id,class:m(["tip-item",e.severity])},[l("div",pe,c(e.icon),1),l("div",ve,[l("div",ue,c(e.title),1),l("div",fe,c(e.description),1)])],2))),128))])]),l("div",Me,[l("h3",null,c(e.$t("tools.performanceMonitor.resourceAnalysis")),1),l("div",Se,[l("div",ge,[l("div",be,c(e.$t("tools.performanceMonitor.resource")),1),l("div",he,c(e.$t("tools.performanceMonitor.type")),1),l("div",ye,c(e.$t("tools.performanceMonitor.size")),1),l("div",Te,c(e.$t("tools.performanceMonitor.loadTime")),1)]),(u(!0),r(p,null,v(Oe.value,e=>(u(),r("div",{key:e.name,class:"table-row"},[l("div",ze,c(e.name),1),l("div",$e,c(e.type),1),l("div",we,c(Xe(e.size)),1),l("div",Ce,c(e.duration.toFixed(2))+"ms ",1)]))),128))])])]),l("div",ke,[l("button",{disabled:Je.value,class:"start-btn",onClick:Re},c(e.$t("tools.performanceMonitor.startMonitoring")),9,He),l("button",{disabled:!Je.value,class:"stop-btn",onClick:Qe},c(e.$t("tools.performanceMonitor.stopMonitoring")),9,Ee),l("button",{class:"export-btn",onClick:Ve},c(e.$t("tools.performanceMonitor.exportReport")),1),l("button",{class:"clear-btn",onClick:We},c(e.$t("tools.performanceMonitor.clearData")),1)])]);var o}}}),[["__scopeId","data-v-7d63e4bf"]]);export{Je as default};
