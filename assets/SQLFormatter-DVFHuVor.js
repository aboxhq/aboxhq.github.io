import{a as e,r as t,L as a,e as o,f as l,t as s,I as n,J as r,q as i,K as c,N as p,F as u,g as d,j as m}from"./vendor-GAldOsJ5.js";import{F as E}from"./utils-CpTIjOSr.js";import{_ as N}from"./index-CE9ZUSgX.js";import"./qr-DE_AbQYC.js";const I={class:"sql-formatter"},v={class:"tool-header"},O={class:"formatter-container"},b={class:"input-panel"},R={class:"panel-header"},S={class:"panel-actions"},h=["placeholder"],T={class:"output-panel"},L={class:"panel-header"},F={class:"panel-actions"},f=["placeholder"],q={class:"formatter-options"},C={class:"options-grid"},U={class:"option-item"},g={class:"option-item"},A={class:"option-item"},$={class:"option-item"},J={class:"option-item"},k={class:"sql-examples"},x={class:"examples-grid"},y=["onClick"],B={class:"example-name"},w={class:"example-description"},D={class:"example-code"},M=N(e({__name:"SQLFormatter",setup(e){const N=t(""),M=t(""),H=a({uppercase:!0,addSemicolon:!0,breakBeforeAnd:!0,breakBeforeOr:!0,indentSize:2}),_=[{name:"Simple SELECT",description:"Basic SELECT statement",preview:"SELECT * FROM users WHERE...",sql:'select id,name,email from users where age > 18 and status = "active" order by name'},{name:"Complex JOIN",description:"Multiple table joins",preview:"SELECT u.name, p.title FROM...",sql:'select u.name,u.email,p.title,p.content from users u inner join posts p on u.id = p.user_id left join categories c on p.category_id = c.id where u.status = "active" and p.published = 1'},{name:"Subquery",description:"Query with subquery",preview:"SELECT * FROM users WHERE id IN...",sql:'select * from users where id in (select user_id from orders where total > 100) and created_at > "2023-01-01"'},{name:"INSERT Statement",description:"Data insertion",preview:"INSERT INTO users VALUES...",sql:'insert into users (name,email,age,status) values ("John Doe","john@example.com",30,"active"),("Jane Smith","jane@example.com",25,"pending")'}],j=["SELECT","FROM","WHERE","JOIN","INNER JOIN","LEFT JOIN","RIGHT JOIN","FULL JOIN","ON","AND","OR","ORDER BY","GROUP BY","HAVING","INSERT","INTO","VALUES","UPDATE","SET","DELETE","CREATE","TABLE","ALTER","DROP","INDEX","PRIMARY KEY","FOREIGN KEY","REFERENCES","NOT NULL","UNIQUE","DEFAULT","AUTO_INCREMENT","COUNT","SUM","AVG","MIN","MAX","DISTINCT","AS","CASE","WHEN","THEN","ELSE","END","IF","EXISTS","IN","BETWEEN","LIKE","IS","NULL","LIMIT","OFFSET"],V=()=>{if(N.value.trim())try{let e=N.value.trim();e=G(e),M.value=e}catch(e){M.value=`-- Error formatting SQL: ${e instanceof Error?e.message:"Unknown error"}\n${N.value}`}else M.value=""},G=e=>{let t=e;t=t.replace(/\s+/g," ").trim(),H.uppercase&&j.forEach(e=>{const a=new RegExp(`\\b${e}\\b`,"gi");t=t.replace(a,e.toUpperCase())});["SELECT","FROM","WHERE","JOIN","INNER JOIN","LEFT JOIN","RIGHT JOIN","FULL JOIN","ORDER BY","GROUP BY","HAVING","LIMIT"].forEach(e=>{const a=new RegExp(`\\b${e}\\b`,"gi");t=t.replace(a,`\n${H.uppercase?e.toUpperCase():e}`)}),H.breakBeforeAnd&&(t=t.replace(/\bAND\b/gi,`\n${" ".repeat(H.indentSize)}${H.uppercase?"AND":"and"}`)),H.breakBeforeOr&&(t=t.replace(/\bOR\b/gi,`\n${" ".repeat(H.indentSize)}${H.uppercase?"OR":"or"}`));const a=t.split("\n");let o=0;const l=a.map(e=>{const t=e.trim();if(!t)return"";t.match(/^(FROM|WHERE|ORDER BY|GROUP BY|HAVING|LIMIT)/i)?o=0:t.match(/^(AND|OR)/i)||t.match(/^(JOIN|INNER JOIN|LEFT JOIN|RIGHT JOIN|FULL JOIN)/i)&&(o=0);const a=" ".repeat(o*H.indentSize)+t;return t.match(/^(SELECT|FROM|WHERE|JOIN|INNER JOIN|LEFT JOIN|RIGHT JOIN|FULL JOIN)/i)&&(o=1),a});return t=l.join("\n"),t=t.replace(/\n\s*\n/g,"\n").trim(),H.addSemicolon&&!t.endsWith(";")&&(t+=";"),t},W=()=>{N.value='select u.id, u.name, u.email, p.title, p.content, c.name as category from users u inner join posts p on u.id = p.user_id left join categories c on p.category_id = c.id where u.status = "active" and p.published = 1 and u.created_at > "2023-01-01" order by u.name, p.created_at desc limit 10',V()},Y=()=>{N.value="",M.value=""},z=async()=>{try{await navigator.clipboard.writeText(M.value)}catch(e){}},P=()=>{const e=new Blob([M.value],{type:"text/sql;charset=utf-8"});E.saveAs(e,"formatted-query.sql")};return W(),(e,t)=>(m(),o("div",I,[l("div",v,[l("h1",null,s(e.$t("tools.sqlFormatter.title")),1),l("p",null,s(e.$t("tools.sqlFormatter.description")),1)]),l("div",O,[l("div",b,[l("div",R,[l("h3",null,s(e.$t("tools.sqlFormatter.inputSQL")),1),l("div",S,[l("button",{class:"action-btn",onClick:W},s(e.$t("tools.sqlFormatter.loadSample")),1),l("button",{class:"action-btn",onClick:Y},s(e.$t("common.buttons.clear")),1)])]),n(l("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>N.value=e),class:"sql-input",placeholder:e.$t("tools.sqlFormatter.placeholder"),onInput:V},null,40,h),[[r,N.value]])]),l("div",T,[l("div",L,[l("h3",null,s(e.$t("tools.sqlFormatter.formattedSQL")),1),l("div",F,[l("button",{class:"action-btn",onClick:z},s(e.$t("common.buttons.copy")),1),l("button",{class:"action-btn",onClick:P},s(e.$t("common.buttons.download")),1)])]),n(l("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>M.value=e),readonly:"",class:"sql-output",placeholder:e.$t("tools.sqlFormatter.outputPlaceholder")},null,8,f),[[r,M.value]])])]),l("div",q,[l("h3",null,s(e.$t("tools.sqlFormatter.options")),1),l("div",C,[l("label",U,[n(l("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>H.uppercase=e),type:"checkbox",onChange:V},null,544),[[c,H.uppercase]]),i(" "+s(e.$t("tools.sqlFormatter.uppercase")),1)]),l("label",g,[n(l("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>H.addSemicolon=e),type:"checkbox",onChange:V},null,544),[[c,H.addSemicolon]]),i(" "+s(e.$t("tools.sqlFormatter.addSemicolon")),1)]),l("label",A,[n(l("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>H.breakBeforeAnd=e),type:"checkbox",onChange:V},null,544),[[c,H.breakBeforeAnd]]),i(" "+s(e.$t("tools.sqlFormatter.breakBeforeAnd")),1)]),l("label",$,[n(l("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>H.breakBeforeOr=e),type:"checkbox",onChange:V},null,544),[[c,H.breakBeforeOr]]),i(" "+s(e.$t("tools.sqlFormatter.breakBeforeOr")),1)]),l("label",J,[l("span",null,s(e.$t("tools.sqlFormatter.indentSize"))+":",1),n(l("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>H.indentSize=e),class:"indent-select",onChange:V},[...t[7]||(t[7]=[l("option",{value:"2"},"2",-1),l("option",{value:"4"},"4",-1),l("option",{value:"8"},"8",-1)])],544),[[p,H.indentSize,void 0,{number:!0}]])])])]),l("div",k,[l("h3",null,s(e.$t("tools.sqlFormatter.examples")),1),l("div",x,[(m(),o(u,null,d(_,e=>l("div",{key:e.name,class:"example-item",onClick:t=>{return a=e.sql,N.value=a,void V();var a}},[l("div",B,s(e.name),1),l("div",w,s(e.description),1),l("pre",D,s(e.preview),1)],8,y)),64))])])]))}}),[["__scopeId","data-v-a515a4c9"]]);export{M as default};
