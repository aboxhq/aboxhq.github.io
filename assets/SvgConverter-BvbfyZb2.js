import{a as e,u as l,r as a,c as t,w as o,e as n,f as s,t as u,y as r,M as v,n as i,I as c,J as p,q as d,K as g,j as m}from"./vendor-GAldOsJ5.js";import{s as b}from"./toast-1tq4b8lR.js";import{_ as f}from"./index-DRn0ptk9.js";import"./qr-DE_AbQYC.js";const h={class:"svg-converter"},y={class:"tool-header"},C={class:"converter-container"},x={key:0,class:"upload-content"},w={class:"upload-text"},k={class:"upload-hint"},$={key:1,class:"preview-content"},U=["innerHTML"],j={key:0,class:"options-section"},L={class:"options-grid"},R={class:"option-group"},F={class:"format-buttons"},S={class:"option-group"},V={class:"option-group"},O=["placeholder"],_={class:"option-group"},B=["placeholder"],E={key:0,class:"option-group"},I={class:"option-group"},M={class:"color-input-group"},P={class:"transparent-label"},T=["disabled"],q={class:"output-info"},A={class:"action-buttons"},D=["disabled"],H={key:0},G={key:1},J=f(e({__name:"SvgConverter",setup(e){const{t:f}=l(),J=a(),z=a(!1),K=a(""),N=a(""),W=a(!1),Q=a("png"),X=a(2),Y=a(null),Z=a(null),ee=a(90),le=a("#ffffff"),ae=a(!0),te=a(100),oe=a(100),ne=t(()=>Y.value?Y.value:te.value*X.value),se=t(()=>Z.value?Z.value:oe.value*X.value);function ue(){z.value=!0}function re(){z.value=!1}function ve(e){z.value=!1;const l=e.dataTransfer?.files[0];l&&"image/svg+xml"===l.type&&ce(l)}function ie(e){const l=e.target.files?.[0];l&&ce(l)}function ce(e){N.value=e.name.replace(/\.svg$/i,"");const l=new FileReader;l.onload=e=>{const l=e.target?.result;K.value=l,function(e){const l=(new DOMParser).parseFromString(e,"image/svg+xml"),a=l.querySelector("svg");if(a){let e=parseFloat(a.getAttribute("width")||"0"),l=parseFloat(a.getAttribute("height")||"0");if(!e||!l){const t=a.getAttribute("viewBox");if(t){const a=t.split(/\s+|,/);a.length>=4&&(e=parseFloat(a[2]),l=parseFloat(a[3]))}}te.value=e||100,oe.value=l||100}}(l)},l.readAsText(e)}function pe(){K.value="",N.value="",Y.value=null,Z.value=null,J.value&&(J.value.value="")}async function de(){if(K.value){W.value=!0;try{const e=document.createElement("canvas"),l=e.getContext("2d");if(!l)throw new Error("Canvas not supported");e.width=ne.value,e.height=se.value,ae.value&&"jpeg"!==Q.value||(l.fillStyle=le.value,l.fillRect(0,0,e.width,e.height));const a=new Image,t=new Blob([K.value],{type:"image/svg+xml;charset=utf-8"}),o=URL.createObjectURL(t);await new Promise((t,n)=>{a.onload=()=>{l.drawImage(a,0,0,e.width,e.height),URL.revokeObjectURL(o),t()},a.onerror=()=>{URL.revokeObjectURL(o),n(new Error("Failed to load SVG"))},a.src=o});const n="png"===Q.value?"image/png":"jpeg"===Q.value?"image/jpeg":"image/webp",s="png"===Q.value?void 0:ee.value/100;e.toBlob(e=>{if(e){const l=URL.createObjectURL(e),a=document.createElement("a");a.href=l,a.download=`${N.value||"converted"}.${Q.value}`,a.click(),URL.revokeObjectURL(l),b.success(f("tools.svgConverter.success"))}},n,s)}catch(e){b.error(f("tools.svgConverter.error"))}finally{W.value=!1}}}return o(Q,e=>{"jpeg"===e&&(ae.value=!1)}),(e,l)=>(m(),n("div",h,[s("div",y,[s("h1",null,u(e.$t("tools.svgConverter.title")),1),s("p",null,u(e.$t("tools.svgConverter.description")),1)]),s("div",C,[s("div",{class:i(["upload-area",{"drag-over":z.value,"has-file":K.value}]),onDrop:v(ve,["prevent"]),onDragover:v(ue,["prevent"]),onDragleave:v(re,["prevent"]),onClick:l[0]||(l[0]=e=>!K.value&&J.value?.click())},[s("input",{ref_key:"fileInput",ref:J,type:"file",accept:".svg,image/svg+xml",class:"file-input",onChange:ie},null,544),K.value?(m(),n("div",$,[s("div",{class:"svg-preview",innerHTML:K.value},null,8,U),s("button",{class:"clear-btn",onClick:v(pe,["stop"])},[...l[13]||(l[13]=[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])])):(m(),n("div",x,[l[12]||(l[12]=s("svg",{class:"upload-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),s("polyline",{points:"17 8 12 3 7 8"}),s("line",{x1:"12",y1:"3",x2:"12",y2:"15"})],-1)),s("p",w,u(e.$t("tools.svgConverter.uploadText")),1),s("p",k,u(e.$t("tools.svgConverter.uploadHint")),1)]))],34),K.value?(m(),n("div",j,[s("h3",null,u(e.$t("tools.svgConverter.options")),1),s("div",L,[s("div",R,[s("label",null,u(e.$t("tools.svgConverter.format")),1),s("div",F,[s("button",{class:i({active:"png"===Q.value}),onClick:l[1]||(l[1]=e=>Q.value="png")},"PNG",2),s("button",{class:i({active:"jpeg"===Q.value}),onClick:l[2]||(l[2]=e=>Q.value="jpeg")},"JPEG",2),s("button",{class:i({active:"webp"===Q.value}),onClick:l[3]||(l[3]=e=>Q.value="webp")},"WebP",2)])]),s("div",S,[s("label",null,u(e.$t("tools.svgConverter.scale"))+": "+u(X.value)+"x",1),c(s("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>X.value=e),type:"range",min:"1",max:"8",step:"1",class:"slider"},null,512),[[p,X.value,void 0,{number:!0}]])]),s("div",V,[s("label",null,u(e.$t("tools.svgConverter.width")),1),c(s("input",{"onUpdate:modelValue":l[5]||(l[5]=e=>Y.value=e),type:"number",min:"1",max:"8192",placeholder:String(te.value),class:"number-input"},null,8,O),[[p,Y.value,void 0,{number:!0}]])]),s("div",_,[s("label",null,u(e.$t("tools.svgConverter.height")),1),c(s("input",{"onUpdate:modelValue":l[6]||(l[6]=e=>Z.value=e),type:"number",min:"1",max:"8192",placeholder:String(oe.value),class:"number-input"},null,8,B),[[p,Z.value,void 0,{number:!0}]])]),"png"!==Q.value?(m(),n("div",E,[s("label",null,u(e.$t("tools.svgConverter.quality"))+": "+u(ee.value)+"%",1),c(s("input",{"onUpdate:modelValue":l[7]||(l[7]=e=>ee.value=e),type:"range",min:"10",max:"100",step:"5",class:"slider"},null,512),[[p,ee.value,void 0,{number:!0}]])])):r("",!0),s("div",I,[s("label",null,u(e.$t("tools.svgConverter.backgroundColor")),1),s("div",M,[c(s("input",{"onUpdate:modelValue":l[8]||(l[8]=e=>le.value=e),type:"color",class:"color-input"},null,512),[[p,le.value]]),c(s("input",{"onUpdate:modelValue":l[9]||(l[9]=e=>le.value=e),type:"text",class:"color-text"},null,512),[[p,le.value]]),s("label",P,[c(s("input",{"onUpdate:modelValue":l[10]||(l[10]=e=>ae.value=e),type:"checkbox",disabled:"jpeg"===Q.value},null,8,T),[[g,ae.value]]),d(" "+u(e.$t("tools.svgConverter.transparent")),1)])])])]),s("div",q,[s("span",null,u(e.$t("tools.svgConverter.outputSize"))+": "+u(ne.value)+" x "+u(se.value)+" px",1)]),s("div",A,[s("button",{class:"primary-btn",disabled:W.value,onClick:de},[W.value?(m(),n("span",H,u(e.$t("tools.svgConverter.converting")),1)):(m(),n("span",G,u(e.$t("tools.svgConverter.download"))+" "+u(Q.value.toUpperCase()),1))],8,D),s("button",{class:"secondary-btn",onClick:l[11]||(l[11]=e=>J.value?.click())},u(e.$t("tools.svgConverter.changeFile")),1)])])):r("",!0)])]))}}),[["__scopeId","data-v-ce81ded4"]]);export{J as default};
