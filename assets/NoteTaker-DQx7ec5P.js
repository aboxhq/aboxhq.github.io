import{a as e,u as t,r as o,c as l,o as a,e as n,f as s,t as r,I as i,J as c,y as u,F as d,g as v,n as p,M as k,S as g,j as m}from"./vendor-GAldOsJ5.js";import{F as b}from"./utils-CpTIjOSr.js";import{s as $}from"./toast-bUE0oB92.js";import{_ as h}from"./index-vCRZDDw7.js";import"./qr-DE_AbQYC.js";const T={class:"note-taker"},w={class:"tool-header"},f={class:"notes-container"},S={class:"notes-sidebar"},y={class:"sidebar-header"},C={class:"search-box"},x=["placeholder"],I={class:"notes-list"},A=["onClick"],D={class:"note-preview"},O={class:"note-title"},j={class:"note-excerpt"},N={class:"note-meta"},L={class:"note-date"},_={class:"note-words"},J={class:"note-actions"},M=["onClick"],q={key:0,class:"empty-notes"},B={class:"sidebar-footer"},F={class:"notes-stats"},H={class:"export-actions"},R={key:0,class:"note-editor"},U={class:"editor-header"},V=["placeholder"],E={class:"editor-actions"},W={class:"editor-content"},Q={key:0,class:"editor-pane"},z={class:"editor-toolbar"},G=["placeholder"],K={key:1,class:"preview-pane"},P=["innerHTML"],X={class:"editor-footer"},Y={class:"note-info"},Z={key:1,class:"no-note-selected"},ee={class:"welcome-content"},te=h(e({__name:"NoteTaker",setup(e){const{t:h}=t(),te=o([]),oe=o(null),le=o(""),ae=o(!1),ne=o(),se=o(),re=l(()=>{if(!le.value)return te.value;const e=le.value.toLowerCase();return te.value.filter(t=>t.title.toLowerCase().includes(e)||t.content.toLowerCase().includes(e))}),ie=l(()=>te.value.reduce((e,t)=>e+ke(t.content),0)),ce=l(()=>oe.value?me(oe.value.content):""),ue=()=>{const e={id:Date.now().toString(),title:"",content:"",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};te.value.unshift(e),oe.value=e,ae.value=!1,be(),g(()=>{const e=document.querySelector(".title-input");e?.focus()})},de=()=>{oe.value&&(oe.value.updatedAt=(new Date).toISOString(),be())},ve=()=>{ae.value=!ae.value},pe=(e,t)=>{if(!ne.value||!oe.value)return;const o=ne.value,l=o.selectionStart,a=o.selectionEnd,n=oe.value.content.substring(l,a),s=e+n+t;oe.value.content=oe.value.content.substring(0,l)+s+oe.value.content.substring(a),g(()=>{const t=l+e.length+n.length;o.setSelectionRange(t,t),o.focus()}),de()},ke=e=>e.trim()?e.trim().split(/\s+/).length:0,ge=e=>{const t=new Date(e),o=(new Date).getTime()-t.getTime(),l=Math.floor(o/864e5);return 0===l?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):1===l?h("tools.noteTaker.yesterday"):l<7?`${l} ${h("tools.noteTaker.daysAgo")}`:t.toLocaleDateString()},me=e=>{let t=e;return t=t.replace(/^### (.*$)/gim,"<h3>$1</h3>"),t=t.replace(/^## (.*$)/gim,"<h2>$1</h2>"),t=t.replace(/^# (.*$)/gim,"<h1>$1</h1>"),t=t.replace(/\*\*(.*)\*\*/gim,"<strong>$1</strong>"),t=t.replace(/\*(.*)\*/gim,"<em>$1</em>"),t=t.replace(/`(.*?)`/gim,"<code>$1</code>"),t=t.replace(/\[([^\]]+)\]\(([^)]+)\)/gim,'<a href="$2" target="_blank">$1</a>'),t=t.replace(/^\- (.*$)/gim,"<li>$1</li>"),t=t.replace(/(<li>.*<\/li>)/s,"<ul>$1</ul>"),t=t.replace(/^> (.*$)/gim,"<blockquote>$1</blockquote>"),t=t.replace(/\n/gim,"<br>"),t},be=()=>{localStorage.setItem("notes",JSON.stringify(te.value))},$e=()=>{const e={notes:te.value,exportedAt:(new Date).toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"});b.saveAs(t,`notes-${(new Date).toISOString().split("T")[0]}.json`)},he=()=>{if(!oe.value)return;const e=oe.value.title||"untitled-note",t=oe.value.content,o=new Blob([t],{type:"text/markdown"});b.saveAs(o,`${e}.md`)},Te=()=>{se.value?.click()},we=e=>{const t=e.target,o=t.files?.[0];if(!o)return;const l=new FileReader;l.onload=e=>{try{const t=e.target?.result;if("application/json"===o.type){const e=JSON.parse(t);e.notes&&Array.isArray(e.notes)&&(te.value=e.notes,oe.value=te.value[0]||null,be())}else{const e={id:Date.now().toString(),title:o.name.replace(/\.[^/.]+$/,""),content:t,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};te.value.unshift(e),oe.value=e,be()}}catch(t){$.error(h("tools.noteTaker.importError"))}},l.readAsText(o)};return a(()=>{(()=>{const e=localStorage.getItem("notes");e&&(te.value=JSON.parse(e),te.value.length>0&&(oe.value=te.value[0]))})()}),(e,t)=>(m(),n("div",T,[s("div",w,[s("h1",null,r(e.$t("tools.noteTaker.title")),1),s("p",null,r(e.$t("tools.noteTaker.description")),1)]),s("div",f,[s("div",S,[s("div",y,[s("button",{class:"new-note-btn",onClick:ue},r(e.$t("tools.noteTaker.newNote")),1),s("div",C,[i(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>le.value=e),type:"text",placeholder:e.$t("tools.noteTaker.searchNotes"),class:"search-input"},null,8,x),[[c,le.value]])])]),s("div",I,[(m(!0),n(d,null,v(re.value,t=>{return m(),n("div",{key:t.id,class:p(["note-item",{active:oe.value?.id===t.id}]),onClick:e=>(e=>{oe.value=e,ae.value=!1})(t)},[s("div",D,[s("h4",O,r(t.title||e.$t("tools.noteTaker.untitled")),1),s("p",j,r((o=t.content,o.replace(/[#*`>\-\[\]]/g,"").substring(0,100)+(o.length>100?"...":""))),1),s("div",N,[s("span",L,r(ge(t.updatedAt)),1),s("span",_,r(ke(t.content))+" "+r(e.$t("tools.noteTaker.words")),1)])]),s("div",J,[s("button",{class:"delete-btn",onClick:k(e=>{return o=t.id,void(confirm(h("tools.noteTaker.deleteConfirm"))&&(te.value=te.value.filter(e=>e.id!==o),oe.value?.id===o&&(oe.value=te.value[0]||null),be()));var o},["stop"])}," üóëÔ∏è ",8,M)])],10,A);var o}),128)),0===re.value.length?(m(),n("div",q,[t[10]||(t[10]=s("div",{class:"empty-icon"}," üìù ",-1)),s("p",null,r(le.value?e.$t("tools.noteTaker.noSearchResults"):e.$t("tools.noteTaker.noNotes")),1)])):u("",!0)]),s("div",B,[s("div",F,[s("span",null,r(te.value.length)+" "+r(e.$t("tools.noteTaker.totalNotes")),1),s("span",null,r(ie.value)+" "+r(e.$t("tools.noteTaker.totalWords")),1)]),s("div",H,[s("button",{class:"export-btn",onClick:$e},r(e.$t("tools.noteTaker.export")),1),s("button",{class:"import-btn",onClick:Te},r(e.$t("tools.noteTaker.import")),1)])])]),oe.value?(m(),n("div",R,[s("div",U,[i(s("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>oe.value.title=e),type:"text",placeholder:e.$t("tools.noteTaker.noteTitle"),class:"title-input",onInput:de},null,40,V),[[c,oe.value.title]]),s("div",E,[s("button",{class:p(["preview-btn",{active:ae.value}]),onClick:ve},r(ae.value?e.$t("tools.noteTaker.edit"):e.$t("tools.noteTaker.preview")),3),s("button",{class:"download-btn",onClick:he},r(e.$t("tools.noteTaker.download")),1)])]),s("div",W,[ae.value?u("",!0):(m(),n("div",Q,[s("div",z,[s("button",{class:"toolbar-btn",title:"Bold",onClick:t[2]||(t[2]=e=>pe("**","**"))},[...t[11]||(t[11]=[s("strong",null,"B",-1)])]),s("button",{class:"toolbar-btn",title:"Italic",onClick:t[3]||(t[3]=e=>pe("*","*"))},[...t[12]||(t[12]=[s("em",null,"I",-1)])]),s("button",{class:"toolbar-btn",title:"Code",onClick:t[4]||(t[4]=e=>pe("`","`"))}," </> "),s("button",{class:"toolbar-btn",title:"Heading",onClick:t[5]||(t[5]=e=>pe("# ",""))}," H1 "),s("button",{class:"toolbar-btn",title:"List",onClick:t[6]||(t[6]=e=>pe("- ",""))}," ‚Ä¢ "),s("button",{class:"toolbar-btn",title:"Link",onClick:t[7]||(t[7]=e=>pe("[","](url)"))}," üîó "),s("button",{class:"toolbar-btn",title:"Quote",onClick:t[8]||(t[8]=e=>pe("> ",""))},' " ')]),i(s("textarea",{ref_key:"textareaRef",ref:ne,"onUpdate:modelValue":t[9]||(t[9]=e=>oe.value.content=e),class:"note-textarea",placeholder:e.$t("tools.noteTaker.startWriting"),onInput:de},null,40,G),[[c,oe.value.content]])])),ae.value?(m(),n("div",K,[s("div",{class:"markdown-preview",innerHTML:ce.value},null,8,P)])):u("",!0)]),s("div",X,[s("div",Y,[s("span",null,r(e.$t("tools.noteTaker.created"))+": "+r(ge(oe.value.createdAt)),1),s("span",null,r(e.$t("tools.noteTaker.updated"))+": "+r(ge(oe.value.updatedAt)),1),s("span",null,r(ke(oe.value.content))+" "+r(e.$t("tools.noteTaker.words")),1),s("span",null,r(oe.value.content.length)+" "+r(e.$t("tools.noteTaker.characters")),1)])])])):(m(),n("div",Z,[s("div",ee,[t[13]||(t[13]=s("div",{class:"welcome-icon"}," üìù ",-1)),s("h3",null,r(e.$t("tools.noteTaker.welcome")),1),s("p",null,r(e.$t("tools.noteTaker.welcomeMessage")),1),s("button",{class:"create-first-note-btn",onClick:ue},r(e.$t("tools.noteTaker.createFirstNote")),1)])]))]),s("input",{ref_key:"importInput",ref:se,type:"file",accept:".json,.md,.txt",style:{display:"none"},onChange:we},null,544)]))}}),[["__scopeId","data-v-83293e4c"]]);export{te as default};
