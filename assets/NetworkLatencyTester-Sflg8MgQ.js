import{a as e,u as t,r as s,c as l,o as a,e as o,f as r,t as n,y as c,I as u,J as i,Q as v,N as m,F as d,g as p,n as y,s as w,j as k}from"./vendor-GAldOsJ5.js";import{s as g}from"./toast-1tq4b8lR.js";import{_ as h}from"./index-DRn0ptk9.js";import"./qr-DE_AbQYC.js";const T={class:"tool-container"},L={class:"tool-header"},b={class:"tool-content"},$={class:"config-section"},f={class:"config-grid"},U={class:"config-group"},C={class:"url-input-group"},S=["placeholder"],x={class:"config-group"},I={value:"5"},R={value:"10"},j={value:"20"},O={value:"50"},M={class:"config-group"},_={class:"config-group"},B={class:"predefined-section"},D={class:"url-grid"},V=["onClick"],E={class:"site-icon"},N={class:"site-name"},J={class:"site-url"},P={key:0,class:"custom-urls-section"},z={class:"custom-url-list"},A=["onClick"],F={class:"url-text"},G=["onClick"],q={class:"controls-section"},H={class:"control-buttons"},K=["disabled"],Q=["disabled"],W=["disabled"],Y={key:0,class:"warning"},X={key:1,class:"progress-section"},Z={class:"progress-info"},ee={class:"progress-stats"},te={class:"progress-bar"},se={class:"progress-percentage"},le={key:2,class:"results-section"},ae={class:"summary-section"},oe={class:"summary-grid"},re={class:"summary-card"},ne={class:"summary-label"},ce={class:"summary-value"},ue={class:"summary-card"},ie={class:"summary-label"},ve={class:"summary-value"},me={class:"summary-card"},de={class:"summary-label"},pe={class:"summary-value"},ye={class:"summary-card"},we={class:"summary-label"},ke={class:"summary-value"},ge={class:"summary-card"},he={class:"summary-label"},Te={class:"summary-value"},Le={class:"detailed-results"},be={class:"results-controls"},$e={value:"timestamp"},fe={value:"url"},Ue={value:"latency"},Ce={value:"status"},Se={value:"all"},xe={value:"success"},Ie={value:"error"},Re={class:"results-table"},je={class:"table-header"},Oe={class:"col-time"},Me={class:"col-url"},_e={class:"col-latency"},Be={class:"col-status"},De={class:"table-body"},Ve={class:"col-time"},Ee=["title"],Ne={class:"col-latency"},Je={key:0},Pe={key:1},ze={class:"col-status"},Ae=["title"],Fe={class:"chart-section"},Ge={class:"chart-container"},qe={class:"chart-area"},He={class:"chart-y-axis"},Ke={class:"chart-plot"},Qe=["title"],We={class:"chart-lines",viewBox:"0 0 100 100",preserveAspectRatio:"none"},Ye=["points"],Xe=h(e({__name:"NetworkLatencyTester",setup(e){const{t:h}=t(),Xe=s(""),Ze=s([]),et=s([]),tt=s(10),st=s(1e3),lt=s(1e4),at=s(!1),ot=s(0),rt=s(0),nt=s(""),ct=s([]),ut=s("timestamp"),it=s("all"),vt=[{name:"Google",url:"https://www.google.com",icon:"ðŸ”"},{name:"GitHub",url:"https://github.com",icon:"ðŸ™"},{name:"Stack Overflow",url:"https://stackoverflow.com",icon:"ðŸ“š"},{name:"YouTube",url:"https://www.youtube.com",icon:"ðŸ“º"},{name:"Twitter",url:"https://twitter.com",icon:"ðŸ¦"},{name:"Facebook",url:"https://www.facebook.com",icon:"ðŸ“˜"},{name:"Amazon",url:"https://www.amazon.com",icon:"ðŸ“¦"},{name:"Netflix",url:"https://www.netflix.com",icon:"ðŸŽ¬"},{name:"Wikipedia",url:"https://www.wikipedia.org",icon:"ðŸ“–"},{name:"Reddit",url:"https://www.reddit.com",icon:"ðŸ¤–"},{name:"LinkedIn",url:"https://www.linkedin.com",icon:"ðŸ’¼"},{name:"Instagram",url:"https://www.instagram.com",icon:"ðŸ“·"}],mt=l(()=>0===rt.value?0:ot.value/rt.value*100),dt=l(()=>ct.value.length),pt=l(()=>ct.value.filter(e=>"success"===e.status)),yt=l(()=>0===dt.value?0:Math.round(pt.value.length/dt.value*100)),wt=l(()=>{const e=pt.value;if(0===e.length)return 0;const t=e.reduce((e,t)=>e+t.latency,0);return Math.round(t/e.length)}),kt=l(()=>{const e=pt.value;return 0===e.length?0:Math.min(...e.map(e=>e.latency))}),gt=l(()=>{const e=pt.value;return 0===e.length?0:Math.max(...e.map(e=>e.latency))}),ht=l(()=>{let e=ct.value;return"success"===it.value?e=e.filter(e=>"success"===e.status):"error"===it.value&&(e=e.filter(e=>"error"===e.status)),e.sort((e,t)=>{switch(ut.value){case"url":return e.url.localeCompare(t.url);case"latency":return"error"===e.status&&"error"===t.status?0:"error"===e.status?1:"error"===t.status?-1:e.latency-t.latency;case"status":return e.status.localeCompare(t.status);default:return t.timestamp-e.timestamp}})}),Tt=l(()=>pt.value.slice(-50)),Lt=l(()=>{if(kt.value===gt.value)return[kt.value];const e=gt.value-kt.value,t=Math.ceil(e/5),s=[];for(let l=kt.value;l<=gt.value;l+=t)s.push(l);return s}),bt=l(()=>{if(Tt.value.length<2)return"";return Tt.value.map((e,t)=>`${t/(Tt.value.length-1)*100},${100-(e.latency-kt.value)/(gt.value-kt.value)*100}`).join(" ")}),$t=()=>{const e=Xe.value.trim();if(e&&!Ze.value.includes(e))try{new URL(e),Ze.value.push(e),Xe.value="",Rt()}catch(t){g.error(h("tools.networkLatencyTester.invalidUrl"))}},ft=async()=>{if(0!==et.value.length){at.value=!0,ot.value=0,rt.value=et.value.length*parseInt(String(tt.value));for(let e=0;e<parseInt(String(tt.value))&&at.value;e++)for(const t of et.value){if(!at.value)break;ot.value++,nt.value=t,await Ct(t),(e<parseInt(String(tt.value))-1||t!==et.value[et.value.length-1])&&await new Promise(e=>setTimeout(e,parseInt(String(st.value))))}at.value=!1,nt.value=""}},Ut=()=>{at.value=!1,nt.value=""},Ct=async e=>{const t=performance.now(),s=Date.now().toString()+Math.random().toString(36).substr(2,9);try{const l=new Image,a=setTimeout(()=>{throw new Error("Timeout")},parseInt(String(lt.value)));await new Promise((t,s)=>{l.onload=()=>{clearTimeout(a),t(null)},l.onerror=()=>{clearTimeout(a),t(null)};const o=e+(e.includes("?")?"&":"?")+"_t="+Date.now();l.src=o});const o=performance.now(),r=Math.round(o-t);ct.value.push({id:s,url:e,timestamp:Date.now(),latency:r,status:"success"})}catch(l){ct.value.push({id:s,url:e,timestamp:Date.now(),latency:0,status:"error",error:l instanceof Error?l.message:"Unknown error"})}},St=()=>{ct.value=[]},xt=e=>new Date(e).toLocaleTimeString(),It=()=>{const e=ht.value.map(e=>({Time:xt(e.timestamp),URL:e.url,Latency:"success"===e.status?`${e.latency}ms`:"Error",Status:e.status,Error:e.error||""})),t=[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).map(e=>`"${e}"`).join(","))].join("\n"),s=new Blob([t],{type:"text/csv"}),l=URL.createObjectURL(s),a=document.createElement("a");a.href=l,a.download=`network-latency-test-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(l)},Rt=()=>{localStorage.setItem("networkLatencyTester_customUrls",JSON.stringify(Ze.value))};return a(()=>{(()=>{const e=localStorage.getItem("networkLatencyTester_customUrls");if(e)try{Ze.value=JSON.parse(e)}catch(t){}})()}),(e,t)=>(k(),o("div",T,[r("div",L,[r("h1",null,n(e.$t("tools.networkLatencyTester.title")),1),r("p",null,n(e.$t("tools.networkLatencyTester.description")),1)]),r("div",b,[r("div",$,[r("h3",null,n(e.$t("tools.networkLatencyTester.testConfiguration")),1),r("div",f,[r("div",U,[r("label",null,n(e.$t("tools.networkLatencyTester.targetUrl")),1),r("div",C,[u(r("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>Xe.value=e),type:"url",placeholder:e.$t("tools.networkLatencyTester.enterUrl"),class:"url-input",onKeyup:v($t,["enter"])},null,40,S),[[i,Xe.value]]),r("button",{class:"add-url-btn",onClick:$t},n(e.$t("common.buttons.add")),1)])]),r("div",x,[r("label",null,n(e.$t("tools.networkLatencyTester.testCount")),1),u(r("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>tt.value=e),class:"config-select"},[r("option",I," 5 "+n(e.$t("tools.networkLatencyTester.tests")),1),r("option",R," 10 "+n(e.$t("tools.networkLatencyTester.tests")),1),r("option",j," 20 "+n(e.$t("tools.networkLatencyTester.tests")),1),r("option",O," 50 "+n(e.$t("tools.networkLatencyTester.tests")),1)],512),[[m,tt.value]])]),r("div",M,[r("label",null,n(e.$t("tools.networkLatencyTester.testInterval")),1),u(r("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>st.value=e),class:"config-select"},[...t[6]||(t[6]=[r("option",{value:"100"}," 100ms ",-1),r("option",{value:"500"}," 500ms ",-1),r("option",{value:"1000"}," 1s ",-1),r("option",{value:"2000"}," 2s ",-1)])],512),[[m,st.value]])]),r("div",_,[r("label",null,n(e.$t("tools.networkLatencyTester.timeout")),1),u(r("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>lt.value=e),class:"config-select"},[...t[7]||(t[7]=[r("option",{value:"5000"}," 5s ",-1),r("option",{value:"10000"}," 10s ",-1),r("option",{value:"15000"}," 15s ",-1),r("option",{value:"30000"}," 30s ",-1)])],512),[[m,lt.value]])])])]),r("div",B,[r("h3",null,n(e.$t("tools.networkLatencyTester.popularSites")),1),r("div",D,[(k(),o(d,null,p(vt,e=>r("button",{key:e.name,class:y(["site-btn",{active:et.value.includes(e.url)}]),onClick:t=>(e=>{const t=et.value.indexOf(e.url);t>-1?et.value.splice(t,1):et.value.push(e.url)})(e)},[r("span",E,n(e.icon),1),r("span",N,n(e.name),1),r("span",J,n(e.url),1)],10,V)),64))])]),Ze.value.length>0?(k(),o("div",P,[r("h3",null,n(e.$t("tools.networkLatencyTester.customUrls")),1),r("div",z,[(k(!0),o(d,null,p(Ze.value,(e,t)=>(k(),o("div",{key:t,class:"custom-url-item"},[r("button",{class:y(["custom-url-btn",{active:et.value.includes(e)}]),onClick:t=>(e=>{const t=et.value.indexOf(e);t>-1?et.value.splice(t,1):et.value.push(e)})(e)},[r("span",F,n(e),1)],10,A),r("button",{class:"remove-url-btn",onClick:e=>(e=>{const t=Ze.value[e];Ze.value.splice(e,1),et.value=et.value.filter(e=>e!==t),Rt()})(t)}," âœ• ",8,G)]))),128))])])):c("",!0),r("div",q,[r("div",H,[r("button",{disabled:at.value||0===et.value.length,class:"start-btn",onClick:ft},n(at.value?e.$t("tools.networkLatencyTester.testing"):e.$t("tools.networkLatencyTester.startTest")),9,K),r("button",{disabled:!at.value,class:"stop-btn",onClick:Ut},n(e.$t("tools.networkLatencyTester.stopTest")),9,Q),r("button",{disabled:at.value||0===ct.value.length,class:"clear-btn",onClick:St},n(e.$t("tools.networkLatencyTester.clearResults")),9,W)]),0===et.value.length?(k(),o("div",Y,n(e.$t("tools.networkLatencyTester.selectUrls")),1)):c("",!0)]),at.value?(k(),o("div",X,[r("h3",null,n(e.$t("tools.networkLatencyTester.testProgress")),1),r("div",Z,[r("div",ee,[r("span",null,n(e.$t("tools.networkLatencyTester.currentTest"))+": "+n(ot.value)+" / "+n(rt.value),1),r("span",null,n(e.$t("tools.networkLatencyTester.currentUrl"))+": "+n(nt.value),1)]),r("div",te,[r("div",{class:"progress-fill",style:w({width:mt.value+"%"})},null,4)]),r("div",se,n(Math.round(mt.value))+"% ",1)])])):c("",!0),ct.value.length>0?(k(),o("div",le,[r("h3",null,n(e.$t("tools.networkLatencyTester.testResults")),1),r("div",ae,[r("h4",null,n(e.$t("tools.networkLatencyTester.summary")),1),r("div",oe,[r("div",re,[r("div",ne,n(e.$t("tools.networkLatencyTester.totalTests")),1),r("div",ce,n(dt.value),1)]),r("div",ue,[r("div",ie,n(e.$t("tools.networkLatencyTester.successRate")),1),r("div",ve,n(yt.value)+"% ",1)]),r("div",me,[r("div",de,n(e.$t("tools.networkLatencyTester.avgLatency")),1),r("div",pe,n(wt.value)+"ms ",1)]),r("div",ye,[r("div",we,n(e.$t("tools.networkLatencyTester.minLatency")),1),r("div",ke,n(kt.value)+"ms ",1)]),r("div",ge,[r("div",he,n(e.$t("tools.networkLatencyTester.maxLatency")),1),r("div",Te,n(gt.value)+"ms ",1)])])]),r("div",Le,[r("h4",null,n(e.$t("tools.networkLatencyTester.detailedResults")),1),r("div",be,[u(r("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>ut.value=e),class:"sort-select"},[r("option",$e,n(e.$t("tools.networkLatencyTester.sortByTime")),1),r("option",fe,n(e.$t("tools.networkLatencyTester.sortByUrl")),1),r("option",Ue,n(e.$t("tools.networkLatencyTester.sortByLatency")),1),r("option",Ce,n(e.$t("tools.networkLatencyTester.sortByStatus")),1)],512),[[m,ut.value]]),u(r("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>it.value=e),class:"filter-select"},[r("option",Se,n(e.$t("tools.networkLatencyTester.allResults")),1),r("option",xe,n(e.$t("tools.networkLatencyTester.successOnly")),1),r("option",Ie,n(e.$t("tools.networkLatencyTester.errorsOnly")),1)],512),[[m,it.value]]),r("button",{class:"export-btn",onClick:It},n(e.$t("tools.networkLatencyTester.exportResults")),1)]),r("div",Re,[r("div",je,[r("div",Oe,n(e.$t("tools.networkLatencyTester.time")),1),r("div",Me,n(e.$t("tools.networkLatencyTester.url")),1),r("div",_e,n(e.$t("tools.networkLatencyTester.latency")),1),r("div",Be,n(e.$t("tools.networkLatencyTester.status")),1)]),r("div",De,[(k(!0),o(d,null,p(ht.value,t=>(k(),o("div",{key:t.id,class:y(["table-row",t.status])},[r("div",Ve,n(xt(t.timestamp)),1),r("div",{class:"col-url",title:t.url},n(t.url),9,Ee),r("div",Ne,["success"===t.status?(k(),o("span",Je,n(t.latency)+"ms",1)):(k(),o("span",Pe,"-"))]),r("div",ze,[r("span",{class:y(["status-badge",t.status])},n("success"===t.status?e.$t("common.messages.success"):e.$t("common.messages.error")),3),t.error?(k(),o("span",{key:0,class:"error-message",title:t.error},n(t.error),9,Ae)):c("",!0)])],2))),128))])])]),r("div",Fe,[r("h4",null,n(e.$t("tools.networkLatencyTester.latencyChart")),1),r("div",Ge,[r("div",qe,[r("div",He,[(k(!0),o(d,null,p(Lt.value,e=>(k(),o("div",{key:e,class:"y-tick"},n(e)+"ms ",1))),128))]),r("div",Ke,[(k(!0),o(d,null,p(Tt.value,(e,t)=>(k(),o("div",{key:t,class:y(["chart-point",{error:"error"===e.status}]),style:w({left:t/(Tt.value.length-1)*100+"%",bottom:(e.latency-kt.value)/(gt.value-kt.value)*100+"%"}),title:`${e.url}: ${e.latency}ms`},null,14,Qe))),128)),(k(),o("svg",We,[r("polyline",{points:bt.value,fill:"none",stroke:"var(--color-primary)","stroke-width":"0.5"},null,8,Ye)]))])])])])])):c("",!0)])]))}}),[["__scopeId","data-v-f47828a0"]]);export{Xe as default};
