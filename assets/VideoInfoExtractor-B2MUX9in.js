import{a as o,u as e,r as a,e as t,f as l,t as s,y as i,M as n,n as r,F as v,g as c,j as d}from"./vendor-GAldOsJ5.js";import{F as u}from"./utils-CpTIjOSr.js";import{_ as f}from"./index-CE9ZUSgX.js";import"./qr-DE_AbQYC.js";const m={class:"video-info-extractor"},p={class:"tool-header"},h={class:"extractor-container"},$={class:"upload-section"},x={class:"drop-content"},I={key:0,class:"video-preview-section"},g={class:"video-container"},E={class:"video-controls"},y={class:"control-group"},b=["disabled"],w=["disabled"],C={key:1,class:"info-section"},M={class:"info-grid"},k={class:"info-category"},A={class:"info-items"},S={class:"info-item"},L={class:"info-label"},F={class:"info-value"},R={class:"info-item"},D={class:"info-label"},V={class:"info-value"},z={class:"info-item"},B={class:"info-label"},N={class:"info-value"},T={class:"info-item"},U={class:"info-label"},j={class:"info-value"},P={class:"info-category"},q={class:"info-items"},O={class:"info-item"},_={class:"info-label"},H={class:"info-value"},W={class:"info-item"},G={class:"info-label"},K={class:"info-value"},J={class:"info-item"},Q={class:"info-label"},Y={class:"info-value"},X={class:"info-item"},Z={class:"info-label"},oo={class:"info-value"},eo={class:"info-item"},ao={class:"info-label"},to={class:"info-value"},lo={class:"info-category"},so={class:"info-items"},io={class:"info-item"},no={class:"info-label"},ro={class:"info-value"},vo={class:"info-item"},co={class:"info-label"},uo={class:"info-value"},fo={class:"info-item"},mo={class:"info-label"},po={class:"info-value"},ho={class:"info-item"},$o={class:"info-label"},xo={class:"info-value"},Io={class:"info-category"},go={class:"info-items"},Eo={class:"info-item"},yo={class:"info-label"},bo={class:"info-value"},wo={class:"info-item"},Co={class:"info-label"},Mo={class:"info-value"},ko={class:"info-item"},Ao={class:"info-label"},So={class:"info-value"},Lo={class:"info-item"},Fo={class:"info-label"},Ro={class:"info-value"},Do={key:2,class:"frames-section"},Vo={class:"frames-grid"},zo={class:"frame-preview"},Bo=["src","alt"],No={class:"frame-overlay"},To=["onClick"],Uo={class:"frame-info"},jo={class:"frame-time"},Po={class:"frame-size"},qo={class:"frames-actions"},Oo={key:3,class:"analysis-section"},_o={class:"analysis-grid"},Ho={class:"analysis-item"},Wo={class:"analysis-content"},Go={class:"analysis-title"},Ko={class:"analysis-value"},Jo={class:"analysis-description"},Qo={class:"analysis-item"},Yo={class:"analysis-content"},Xo={class:"analysis-title"},Zo={class:"analysis-value"},oe={class:"analysis-description"},ee={class:"analysis-item"},ae={class:"analysis-content"},te={class:"analysis-title"},le={class:"analysis-value"},se={class:"analysis-description"},ie={class:"analysis-item"},ne={class:"analysis-content"},re={class:"analysis-title"},ve={class:"analysis-value"},ce={class:"analysis-description"},de={class:"export-section"},ue={class:"export-buttons"},fe=["disabled"],me=["disabled"],pe=["disabled"],he=f(o({__name:"VideoInfoExtractor",setup(o){const{t:f}=e(),he=a(!1),$e=a(null),xe=a(null),Ie=a(null),ge=a([]),Ee=a(null),ye=a(!1),be=a(!1),we=a(0),Ce=a(),Me=o=>{o.preventDefault(),he.value=!1;const e=Array.from(o.dataTransfer?.files||[]).find(o=>o.type.startsWith("video/"));e&&Se(e)},ke=o=>{const e=o.target,a=Array.from(e.files||[]);a.length>0&&Se(a[0])},Ae=()=>{Ce.value?.click()},Se=o=>{$e.value=o,ge.value=[],Ee.value=null,xe.value&&(xe.value.src=URL.createObjectURL(o))},Le=()=>{if(!xe.value)return;const o=xe.value;Ie.value={duration:o.duration,width:o.videoWidth,height:o.videoHeight,hasAudio:o.mozHasAudio||Boolean(o.webkitAudioDecodedByteCount)||Boolean(o.audioTracks?.length),frameRate:Fe(),bitrate:Re()},De()},Fe=()=>30,Re=()=>{if(!$e.value||!Ie.value)return 0;const o=8*$e.value.size,e=Ie.value.duration;return Math.round(o/e)},De=()=>{if(!$e.value||!Ie.value)return;const o=$e.value.type.toLowerCase();o.includes("mp4")?(Ie.value.videoCodec="H.264",Ie.value.audioCodec="AAC"):o.includes("webm")?(Ie.value.videoCodec="VP8/VP9",Ie.value.audioCodec="Vorbis/Opus"):o.includes("ogg")&&(Ie.value.videoCodec="Theora",Ie.value.audioCodec="Vorbis"),Ie.value.colorDepth="8-bit"},Ve=()=>{xe.value&&(we.value=xe.value.currentTime)},ze=()=>{if(!xe.value)return;const o=xe.value,e=document.createElement("canvas"),a=e.getContext("2d");if(!a)return;e.width=o.videoWidth,e.height=o.videoHeight,a.drawImage(o,0,0,e.width,e.height);const t=e.toDataURL("image/png");ge.value.push({dataUrl:t,timestamp:o.currentTime,width:e.width,height:e.height})},Be=async()=>{if(!xe.value||!Ie.value)return;ye.value=!0;const o=xe.value,e=Ie.value.duration;try{for(let a=0;a<10;a++){const t=e/10*a;o.currentTime=t,await new Promise(e=>{const a=()=>{o.removeEventListener("seeked",a),e(void 0)};o.addEventListener("seeked",a)}),await new Promise(o=>setTimeout(o,100)),ze()}}catch(a){}finally{ye.value=!1}},Ne=async()=>{if(xe.value&&0!==ge.value.length||await Be(),0!==ge.value.length){be.value=!0;try{const o=await Te();Ee.value=o}catch(o){}finally{be.value=!1}}},Te=async()=>{let o=0,e=0,a=0;for(const i of ge.value){const a=document.createElement("canvas"),t=a.getContext("2d");if(!t)continue;const l=new Image;await new Promise(o=>{l.onload=o,l.src=i.dataUrl}),a.width=l.width,a.height=l.height,t.drawImage(l,0,0);const s=t.getImageData(0,0,a.width,a.height).data;let n=0;for(let o=0;o<s.length;o+=4){n+=(s[o]+s[o+1]+s[o+2])/3}n=n/(s.length/4)/255*100,o+=n;let r=0;for(let o=0;o<s.length;o+=4){const e=s[o],a=s[o+1],t=s[o+2];r+=(Math.max(e,a,t)-Math.min(e,a,t))/255}r=r/(s.length/4)*100,e+=r}const t=o/ge.value.length,l=e/ge.value.length;if(Ie.value){const o=Ie.value.width*Ie.value.height;if(a=o>=2073600?90:o>=921600?75:o>=409920?60:40,Ie.value.bitrate){a+=Math.min(Ie.value.bitrate/5e6*20,20)}}const s=100*Math.random();return{qualityScore:Math.round(Math.min(a,100)),colorfulness:Math.round(l),brightness:Math.round(t),motionLevel:Math.round(s)}},Ue=o=>{const e=document.createElement("a");e.download=`frame-${ea(o.timestamp).replace(":","-")}.png`,e.href=o.dataUrl,e.click()},je=()=>{ge.value.forEach((o,e)=>{setTimeout(()=>{Ue(o)},100*e)})},Pe=()=>{ge.value=[]},qe=(o,e)=>{const a=(o,e)=>0===e?o:a(e,o%e),t=a(o,e);return`${o/t}:${e/t}`},Oe=()=>{if(!Ie.value)return"N/A";const o=Ie.value.frameRate||30,e=Math.round(Ie.value.duration*o);return ta(e)},_e=()=>{if(!Ie.value||!$e.value)return"N/A";const o=Ie.value.width*Ie.value.height,e=Ie.value.frameRate||30;return`${(o*(Ie.value.duration*e)*3/$e.value.size).toFixed(1)}:1`},He=()=>{if(!$e.value||!Ie.value)return"N/A";const o=$e.value.size/Ie.value.duration;return Ze(o)+"/s"},We=o=>o>=80?"Excellent":o>=60?"Good":o>=40?"Fair":"Poor",Ge=o=>o>=70?"Very Colorful":o>=40?"Moderately Colorful":"Low Color Variation",Ke=o=>o>=70?"Bright":o>=30?"Well Balanced":"Dark",Je=o=>o>=70?"High Motion":o>=30?"Moderate Motion":"Low Motion",Qe=()=>{if(!Ie.value||!$e.value)return;const o={file:{name:$e.value.name,size:$e.value.size,type:$e.value.type,lastModified:$e.value.lastModified},video:Ie.value,analysis:Ee.value,frames:ge.value.length,exportedAt:(new Date).toISOString()},e=new Blob([JSON.stringify(o,null,2)],{type:"application/json"});u.saveAs(e,`${$e.value.name}-info.json`)},Ye=()=>{if(!Ie.value||!$e.value)return;const o=[["Property","Value"],["File Name",$e.value.name],["File Size",Ze($e.value.size)],["Duration",oa(Ie.value.duration)],["Dimensions",`${Ie.value.width} √ó ${Ie.value.height}`],["Aspect Ratio",qe(Ie.value.width,Ie.value.height)],["Frame Rate",`${Ie.value.frameRate||"N/A"} fps`],["Bitrate",aa(Ie.value.bitrate)],["Has Audio",Ie.value.hasAudio?"Yes":"No"],["Video Codec",Ie.value.videoCodec||"Unknown"],["Audio Codec",Ie.value.audioCodec||"Unknown"]];Ee.value&&o.push(["Quality Score",`${Ee.value.qualityScore}/100`],["Colorfulness",`${Ee.value.colorfulness}%`],["Brightness",`${Ee.value.brightness}%`],["Motion Level",`${Ee.value.motionLevel}%`]);const e=o.map(o=>o.join(",")).join("\n"),a=new Blob([e],{type:"text/csv"});u.saveAs(a,`${$e.value.name}-info.csv`)},Xe=()=>{if(!Ie.value||!$e.value)return;const o=`\n${f("tools.videoInfoExtractor.reportTitle")}\n========================\n\n${f("tools.videoInfoExtractor.fileInformation")}:\n- ${f("tools.videoInfoExtractor.fileName")}: ${$e.value.name}\n- ${f("tools.videoInfoExtractor.fileSize")}: ${Ze($e.value.size)}\n- ${f("tools.videoInfoExtractor.fileType")}: ${$e.value.type}\n- ${f("tools.videoInfoExtractor.lastModified")}: ${la($e.value.lastModified)}\n\n${f("tools.videoInfoExtractor.videoProperties")}:\n- ${f("tools.videoInfoExtractor.duration")}: ${oa(Ie.value.duration)}\n- ${f("tools.videoInfoExtractor.dimensions")}: ${Ie.value.width} √ó ${Ie.value.height}\n- ${f("tools.videoInfoExtractor.aspectRatio")}: ${qe(Ie.value.width,Ie.value.height)}\n- ${f("tools.videoInfoExtractor.frameRate")}: ${Ie.value.frameRate||f("tools.videoInfoExtractor.notAvailable")} fps\n- ${f("tools.videoInfoExtractor.bitrate")}: ${aa(Ie.value.bitrate)}\n- ${f("tools.videoInfoExtractor.hasAudio")}: ${Ie.value.hasAudio?f("common.yes"):f("common.no")}\n\n${f("tools.videoInfoExtractor.technicalDetails")}:\n- ${f("tools.videoInfoExtractor.videoCodec")}: ${Ie.value.videoCodec||f("tools.videoInfoExtractor.unknown")}\n- ${f("tools.videoInfoExtractor.audioCodec")}: ${Ie.value.audioCodec||f("tools.videoInfoExtractor.unknown")}\n- ${f("tools.videoInfoExtractor.totalFrames")}: ${Oe()}\n- ${f("tools.videoInfoExtractor.pixelCount")}: ${ta(Ie.value.width*Ie.value.height)}\n- ${f("tools.videoInfoExtractor.compressionRatio")}: ${_e()}\n\n${Ee.value?`\n${f("tools.videoInfoExtractor.analysisResults")}:\n- ${f("tools.videoInfoExtractor.qualityScore")}: ${Ee.value.qualityScore}/100 (${We(Ee.value.qualityScore)})\n- ${f("tools.videoInfoExtractor.colorfulness")}: ${Ee.value.colorfulness}% (${Ge(Ee.value.colorfulness)})\n- ${f("tools.videoInfoExtractor.brightness")}: ${Ee.value.brightness}% (${Ke(Ee.value.brightness)})\n- ${f("tools.videoInfoExtractor.motionLevel")}: ${Ee.value.motionLevel}% (${Je(Ee.value.motionLevel)})\n`:""}\n\n${f("tools.videoInfoExtractor.reportGenerated")}: ${(new Date).toLocaleString()}\n  `.trim(),e=new Blob([o],{type:"text/plain"});u.saveAs(e,`${$e.value.name}-report.txt`)},Ze=o=>{if(0===o)return"0 B";const e=Math.floor(Math.log(o)/Math.log(1024));return parseFloat((o/Math.pow(1024,e)).toFixed(1))+" "+["B","KB","MB","GB","TB"][e]},oa=o=>{const e=Math.floor(o/3600),a=Math.floor(o%3600/60),t=Math.floor(o%60);return e>0?`${e}:${a.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`:`${a}:${t.toString().padStart(2,"0")}`},ea=o=>`${Math.floor(o/60)}:${Math.floor(o%60).toString().padStart(2,"0")}`,aa=o=>o?o>=1e6?`${(o/1e6).toFixed(1)} Mbps`:o>=1e3?`${(o/1e3).toFixed(1)} Kbps`:`${o} bps`:"N/A",ta=o=>o.toLocaleString(),la=o=>new Date(o).toLocaleString();return(o,e)=>(d(),t("div",m,[l("div",p,[l("h1",null,s(o.$t("tools.videoInfoExtractor.title")),1),l("p",null,s(o.$t("tools.videoInfoExtractor.description")),1)]),l("div",h,[l("div",$,[l("div",{class:r(["drop-zone",{"drag-over":he.value}]),onDrop:Me,onDragover:e[0]||(e[0]=n(()=>{},["prevent"])),onDragenter:e[1]||(e[1]=n(()=>{},["prevent"]))},[l("div",x,[e[2]||(e[2]=l("div",{class:"drop-icon"}," üé¨ ",-1)),l("h3",null,s(o.$t("tools.videoInfoExtractor.dragDropVideo")),1),l("p",null,s(o.$t("tools.videoInfoExtractor.supportedFormats"))+": MP4, AVI, MOV, WMV, FLV, MKV",1),l("button",{class:"select-btn",onClick:Ae},s(o.$t("tools.videoInfoExtractor.selectFile")),1),l("input",{ref_key:"fileInput",ref:Ce,type:"file",accept:"video/*",style:{display:"none"},onChange:ke},null,544)])],34)]),$e.value?(d(),t("div",I,[l("div",g,[l("video",{ref_key:"videoElement",ref:xe,controls:"",class:"video-player",onLoadedmetadata:Le,onTimeupdate:Ve},s(o.$t("tools.videoInfoExtractor.videoNotSupported")),545)]),l("div",E,[l("div",y,[l("button",{class:"control-btn",onClick:ze}," üì∏ "+s(o.$t("tools.videoInfoExtractor.captureFrame")),1),l("button",{disabled:ye.value,class:"control-btn",onClick:Be}," üéûÔ∏è "+s(ye.value?o.$t("tools.videoInfoExtractor.extracting"):o.$t("tools.videoInfoExtractor.extractFrames")),9,b),l("button",{disabled:be.value,class:"control-btn",onClick:Ne}," üîç "+s(be.value?o.$t("tools.videoInfoExtractor.analyzing"):o.$t("tools.videoInfoExtractor.analyzeVideo")),9,w)])])])):i("",!0),Ie.value?(d(),t("div",C,[l("h3",null,s(o.$t("tools.videoInfoExtractor.videoInformation")),1),l("div",M,[l("div",k,[l("h4",null,s(o.$t("tools.videoInfoExtractor.basicInfo")),1),l("div",A,[l("div",S,[l("span",L,s(o.$t("tools.videoInfoExtractor.fileName"))+":",1),l("span",F,s($e.value?.name),1)]),l("div",R,[l("span",D,s(o.$t("tools.videoInfoExtractor.fileSize"))+":",1),l("span",V,s($e.value?Ze($e.value.size):""),1)]),l("div",z,[l("span",B,s(o.$t("tools.videoInfoExtractor.mimeType"))+":",1),l("span",N,s($e.value?.type),1)]),l("div",T,[l("span",U,s(o.$t("tools.videoInfoExtractor.lastModified"))+":",1),l("span",j,s($e.value?la($e.value.lastModified):""),1)])])]),l("div",P,[l("h4",null,s(o.$t("tools.videoInfoExtractor.videoProperties")),1),l("div",q,[l("div",O,[l("span",_,s(o.$t("tools.videoInfoExtractor.duration"))+":",1),l("span",H,s(oa(Ie.value.duration)),1)]),l("div",W,[l("span",G,s(o.$t("tools.videoInfoExtractor.dimensions"))+":",1),l("span",K,s(Ie.value.width)+" √ó "+s(Ie.value.height),1)]),l("div",J,[l("span",Q,s(o.$t("tools.videoInfoExtractor.aspectRatio"))+":",1),l("span",Y,s(qe(Ie.value.width,Ie.value.height)),1)]),l("div",X,[l("span",Z,s(o.$t("tools.videoInfoExtractor.frameRate"))+":",1),l("span",oo,s(Ie.value.frameRate||"N/A")+" fps",1)]),l("div",eo,[l("span",ao,s(o.$t("tools.videoInfoExtractor.bitrate"))+":",1),l("span",to,s(aa(Ie.value.bitrate)),1)])])]),l("div",lo,[l("h4",null,s(o.$t("tools.videoInfoExtractor.technicalDetails")),1),l("div",so,[l("div",io,[l("span",no,s(o.$t("tools.videoInfoExtractor.videoCodec"))+":",1),l("span",ro,s(Ie.value.videoCodec||"Unknown"),1)]),l("div",vo,[l("span",co,s(o.$t("tools.videoInfoExtractor.audioCodec"))+":",1),l("span",uo,s(Ie.value.audioCodec||"Unknown"),1)]),l("div",fo,[l("span",mo,s(o.$t("tools.videoInfoExtractor.colorDepth"))+":",1),l("span",po,s(Ie.value.colorDepth||"Unknown"),1)]),l("div",ho,[l("span",$o,s(o.$t("tools.videoInfoExtractor.hasAudio"))+":",1),l("span",xo,s(Ie.value.hasAudio?o.$t("tools.videoInfoExtractor.yes"):o.$t("tools.videoInfoExtractor.no")),1)])])]),l("div",Io,[l("h4",null,s(o.$t("tools.videoInfoExtractor.calculatedInfo")),1),l("div",go,[l("div",Eo,[l("span",yo,s(o.$t("tools.videoInfoExtractor.totalFrames"))+":",1),l("span",bo,s(Oe()),1)]),l("div",wo,[l("span",Co,s(o.$t("tools.videoInfoExtractor.pixelCount"))+":",1),l("span",Mo,s(ta(Ie.value.width*Ie.value.height)),1)]),l("div",ko,[l("span",Ao,s(o.$t("tools.videoInfoExtractor.dataRate"))+":",1),l("span",So,s(He()),1)]),l("div",Lo,[l("span",Fo,s(o.$t("tools.videoInfoExtractor.compressionRatio"))+":",1),l("span",Ro,s(_e()),1)])])])])])):i("",!0),ge.value.length>0?(d(),t("div",Do,[l("h3",null,s(o.$t("tools.videoInfoExtractor.capturedFrames"))+" ("+s(ge.value.length)+")",1),l("div",Vo,[(d(!0),t(v,null,c(ge.value,(e,a)=>(d(),t("div",{key:a,class:"frame-item"},[l("div",zo,[l("img",{src:e.dataUrl,alt:`Frame ${a+1}`,class:"frame-image"},null,8,Bo),l("div",No,[l("button",{class:"frame-action",onClick:o=>Ue(e)}," üíæ "+s(o.$t("tools.videoInfoExtractor.download")),9,To)])]),l("div",Uo,[l("div",jo,s(ea(e.timestamp)),1),l("div",Po,s(e.width)+" √ó "+s(e.height),1)])]))),128))]),l("div",qo,[l("button",{class:"action-btn",onClick:je}," üì¶ "+s(o.$t("tools.videoInfoExtractor.downloadAll")),1),l("button",{class:"action-btn",onClick:Pe}," üóëÔ∏è "+s(o.$t("tools.videoInfoExtractor.clearFrames")),1)])])):i("",!0),Ee.value?(d(),t("div",Oo,[l("h3",null,s(o.$t("tools.videoInfoExtractor.videoAnalysis")),1),l("div",_o,[l("div",Ho,[e[3]||(e[3]=l("div",{class:"analysis-icon"}," üìä ",-1)),l("div",Wo,[l("div",Go,s(o.$t("tools.videoInfoExtractor.qualityScore")),1),l("div",Ko,s(Ee.value.qualityScore)+"/100 ",1),l("div",Jo,s(We(Ee.value.qualityScore)),1)])]),l("div",Qo,[e[4]||(e[4]=l("div",{class:"analysis-icon"}," üé® ",-1)),l("div",Yo,[l("div",Xo,s(o.$t("tools.videoInfoExtractor.colorfulness")),1),l("div",Zo,s(Ee.value.colorfulness)+"% ",1),l("div",oe,s(Ge(Ee.value.colorfulness)),1)])]),l("div",ee,[e[5]||(e[5]=l("div",{class:"analysis-icon"}," üîÜ ",-1)),l("div",ae,[l("div",te,s(o.$t("tools.videoInfoExtractor.brightness")),1),l("div",le,s(Ee.value.brightness)+"% ",1),l("div",se,s(Ke(Ee.value.brightness)),1)])]),l("div",ie,[e[6]||(e[6]=l("div",{class:"analysis-icon"}," ‚ö° ",-1)),l("div",ne,[l("div",re,s(o.$t("tools.videoInfoExtractor.motionLevel")),1),l("div",ve,s(Ee.value.motionLevel)+"% ",1),l("div",ce,s(Je(Ee.value.motionLevel)),1)])])])])):i("",!0),l("div",de,[l("h3",null,s(o.$t("tools.videoInfoExtractor.exportOptions")),1),l("div",ue,[l("button",{disabled:!Ie.value,class:"export-btn",onClick:Qe}," üìÑ "+s(o.$t("tools.videoInfoExtractor.exportJSON")),9,fe),l("button",{disabled:!Ie.value,class:"export-btn",onClick:Ye}," üìä "+s(o.$t("tools.videoInfoExtractor.exportCSV")),9,me),l("button",{disabled:!Ie.value,class:"export-btn",onClick:Xe}," üìã "+s(o.$t("tools.videoInfoExtractor.generateReport")),9,pe)])])])]))}}),[["__scopeId","data-v-5ccdfa09"]]);export{he as default};
