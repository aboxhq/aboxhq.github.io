import{a as e,r as t,c as l,e as n,f as a,y as s,t as o,I as i,q as u,K as d,J as r,F as c,g as p,n as f,j as v}from"./vendor-GAldOsJ5.js";import{F as h}from"./utils-CpTIjOSr.js";import{_ as m}from"./index-CE9ZUSgX.js";import"./qr-DE_AbQYC.js";const g={class:"text-diff"},b={class:"tool-header"},$={class:"diff-options"},x={class:"option-item"},y={class:"option-item"},D={class:"option-item"},N={class:"diff-container"},C={class:"input-panel"},k={class:"panel-header"},w=["placeholder"],T={class:"input-panel"},j={class:"panel-header"},W=["placeholder"],L={key:0,class:"diff-result"},U={class:"result-header"},V={class:"diff-stats"},_={class:"stat-item added"},I={class:"stat-item removed"},q={class:"stat-item unchanged"},F={class:"diff-output"},H={class:"line-number"},M={class:"line-content"},P={key:1,class:"diff-actions"},A=m(e({__name:"TextDiff",setup(e){const m=t(""),A=t(""),B=t([]),J=t({ignoreWhitespace:!1,ignoreCase:!1,wordLevel:!1}),K=l(()=>({added:B.value.filter(e=>"added"===e.type).length,removed:B.value.filter(e=>"removed"===e.type).length,unchanged:B.value.filter(e=>"unchanged"===e.type).length})),z=e=>{let t=e;return J.value.ignoreCase&&(t=t.toLowerCase()),J.value.ignoreWhitespace&&(t=t.replace(/\s+/g," ").trim()),t},E=()=>{if(!m.value&&!A.value)return void(B.value=[]);const e=z(m.value),t=z(A.value);J.value.wordLevel?O(e,t):G(e,t)},G=(e,t)=>{const l=e.split("\n"),n=t.split("\n"),a=[];let s=0,o=0;for(;s<l.length||o<n.length;){const e=l[s],t=n[o];if(s>=l.length)a.push({type:"added",content:t,lineNumber:`+${o+1}`}),o++;else if(o>=n.length)a.push({type:"removed",content:e,lineNumber:`-${s+1}`}),s++;else if(e===t)a.push({type:"unchanged",content:e,lineNumber:`${s+1}`}),s++,o++;else{let i=!1;for(let t=o+1;t<Math.min(o+5,n.length);t++)if(e===n[t]){for(;o<t;)a.push({type:"added",content:n[o],lineNumber:`+${o+1}`}),o++;i=!0;break}if(!i)for(let e=s+1;e<Math.min(s+5,l.length);e++)if(t===l[e]){for(;s<e;)a.push({type:"removed",content:l[s],lineNumber:`-${s+1}`}),s++;i=!0;break}i||(a.push({type:"removed",content:e,lineNumber:`-${s+1}`}),a.push({type:"added",content:t,lineNumber:`+${o+1}`}),s++,o++)}}B.value=a},O=(e,t)=>{const l=e.split(/\s+/),n=t.split(/\s+/),a=[];let s=0,o=0;for(;s<l.length||o<n.length;){const e=l[s],t=n[o];s>=l.length?(a.push({type:"added",content:t,lineNumber:`+${o+1}`}),o++):o>=n.length?(a.push({type:"removed",content:e,lineNumber:`-${s+1}`}),s++):e===t?(a.push({type:"unchanged",content:e,lineNumber:`${s+1}`}),s++,o++):(a.push({type:"removed",content:e,lineNumber:`-${s+1}`}),a.push({type:"added",content:t,lineNumber:`+${o+1}`}),s++,o++)}B.value=a},Q=()=>{m.value="",E()},R=()=>{A.value="",E()},S=async()=>{const e=B.value.map(e=>`${e.lineNumber} ${e.content}`).join("\n");try{await navigator.clipboard.writeText(e)}catch(t){}},X=()=>{const e=B.value.map(e=>`${e.lineNumber} ${e.content}`).join("\n"),t=new Blob([e],{type:"text/plain;charset=utf-8"});h.saveAs(t,"text-diff.txt")};return m.value="Hello World\nThis is line 2\nThis is line 3\nThis line will be removed",A.value="Hello World\nThis is line 2 modified\nThis is line 3\nThis is a new line",E(),(e,t)=>(v(),n("div",g,[a("div",b,[a("h1",null,o(e.$t("tools.textDiff.title")),1),a("p",null,o(e.$t("tools.textDiff.description")),1)]),a("div",$,[a("label",x,[i(a("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>J.value.ignoreWhitespace=e),type:"checkbox",onChange:E},null,544),[[d,J.value.ignoreWhitespace]]),u(" "+o(e.$t("tools.textDiff.ignoreWhitespace")),1)]),a("label",y,[i(a("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>J.value.ignoreCase=e),type:"checkbox",onChange:E},null,544),[[d,J.value.ignoreCase]]),u(" "+o(e.$t("tools.textDiff.ignoreCase")),1)]),a("label",D,[i(a("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>J.value.wordLevel=e),type:"checkbox",onChange:E},null,544),[[d,J.value.wordLevel]]),u(" "+o(e.$t("tools.textDiff.wordLevel")),1)])]),a("div",N,[a("div",C,[a("div",k,[a("h3",null,o(e.$t("tools.textDiff.originalText")),1),a("button",{class:"clear-btn",onClick:Q},o(e.$t("common.buttons.clear")),1)]),i(a("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>m.value=e),class:"text-input",placeholder:e.$t("tools.textDiff.originalPlaceholder"),onInput:E},null,40,w),[[r,m.value]])]),a("div",T,[a("div",j,[a("h3",null,o(e.$t("tools.textDiff.modifiedText")),1),a("button",{class:"clear-btn",onClick:R},o(e.$t("common.buttons.clear")),1)]),i(a("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>A.value=e),class:"text-input",placeholder:e.$t("tools.textDiff.modifiedPlaceholder"),onInput:E},null,40,W),[[r,A.value]])])]),B.value.length>0?(v(),n("div",L,[a("div",U,[a("h3",null,o(e.$t("tools.textDiff.result")),1),a("div",V,[a("span",_,"+"+o(K.value.added),1),a("span",I,"-"+o(K.value.removed),1),a("span",q,"=="+o(K.value.unchanged),1)])]),a("div",F,[(v(!0),n(c,null,p(B.value,(e,t)=>(v(),n("div",{key:t,class:f(["diff-line",e.type])},[a("span",H,o(e.lineNumber),1),a("span",M,o(e.content),1)],2))),128))])])):s("",!0),B.value.length>0?(v(),n("div",P,[a("button",{class:"action-btn",onClick:S},o(e.$t("tools.textDiff.copyDiff")),1),a("button",{class:"action-btn",onClick:X},o(e.$t("tools.textDiff.downloadDiff")),1)])):s("",!0)]))}}),[["__scopeId","data-v-053b7e4f"]]);export{A as default};
