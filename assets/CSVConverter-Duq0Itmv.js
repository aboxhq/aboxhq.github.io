import{a as t,r as e,L as o,c as l,e as a,f as n,y as s,t as c,n as r,I as v,J as i,N as u,q as p,K as d,j as m}from"./vendor-sPCxxDNi.js";import{F as h}from"./utils-CpTIjOSr.js";import{_ as b}from"./index-BFyA9hmL.js";import"./qr-DE_AbQYC.js";const C={class:"csv-converter"},$={class:"tool-header"},y={class:"converter-tabs"},f={key:0,class:"tab-content"},j={class:"converter-container"},g={class:"input-panel"},E={class:"panel-header"},x={class:"panel-actions"},k=["placeholder"],w={class:"csv-options"},S={class:"option-item"},U={value:","},A={value:";"},V={value:"\\t"},I={value:"|"},J={class:"option-item"},O={class:"option-item"},B={class:"output-panel"},N={class:"panel-header"},W={class:"panel-actions"},H=["placeholder"],T={key:0,class:"output-stats"},_={class:"stat"},M={class:"stat"},P={class:"stat"},z={key:1,class:"tab-content"},D={class:"converter-container"},F={class:"input-panel"},K={class:"panel-header"},L={class:"panel-actions"},q=["placeholder"],X={class:"output-panel"},Y={class:"panel-header"},G={class:"panel-actions"},Z=["placeholder"],Q={key:2,class:"tab-content"},R={class:"converter-container"},tt={class:"input-panel"},et={class:"panel-header"},ot={class:"panel-actions"},lt=["placeholder"],at={class:"xml-options"},nt={class:"option-item"},st={class:"option-item"},ct={class:"output-panel"},rt={class:"panel-header"},vt={class:"panel-actions"},it=["placeholder"],ut={class:"converter-info"},pt={class:"format-grid"},dt={class:"format-item"},mt={class:"format-item"},ht={class:"format-item"},bt=b(t({__name:"CSVConverter",setup(t){const b=e("csv-to-json"),bt=e(""),Ct=e(""),$t=e(""),yt=e(""),ft=e(""),jt=o({delimiter:",",hasHeader:!0,trimWhitespace:!0}),gt=o({rootElement:"data",rowElement:"row"}),Et=l(()=>{if(!$t.value)return null;try{const t=JSON.parse($t.value),e=Array.isArray(t)?t.length:1,o=Array.isArray(t)&&t.length>0?Object.keys(t[0]).length:0,l=new Blob([$t.value]).size;return{rows:e,columns:o,size:At(l)}}catch{return null}}),xt=(t,e,o,l)=>{const a=t.trim().split("\n");if(0===a.length)return[];const n=[];let s=[];return a.forEach((t,a)=>{const c=t.split(e).map(t=>{let e=t.trim();return e.startsWith('"')&&e.endsWith('"')&&(e=e.slice(1,-1)),l?e.trim():e});if(0===a&&o)s=c;else if(o){const t={};s.forEach((e,o)=>{t[e]=c[o]||""}),n.push(t)}else n.push(c)}),n},kt=()=>{if(bt.value.trim())try{const t=xt(bt.value,jt.delimiter,jt.hasHeader,jt.trimWhitespace);$t.value=JSON.stringify(t,null,2)}catch(t){$t.value=`Error: ${t instanceof Error?t.message:"Invalid CSV format"}`}else $t.value=""},wt=()=>{if(Ct.value.trim())try{const t=JSON.parse(Ct.value);if(!Array.isArray(t))return void(yt.value="Error: JSON must be an array of objects");if(0===t.length)return void(yt.value="");const e=new Set;t.forEach(t=>{"object"==typeof t&&null!==t&&Object.keys(t).forEach(t=>e.add(t))});const o=Array.from(e),l=[o.join(",")];t.forEach(t=>{const e=o.map(e=>{const o=t[e]||"",l=String(o);return l.includes(",")||l.includes('"')||l.includes("\n")?`"${l.replace(/"/g,'""')}"`:l});l.push(e.join(","))}),yt.value=l.join("\n")}catch(t){yt.value=`Error: ${t instanceof Error?t.message:"Invalid JSON format"}`}else yt.value=""},St=()=>{if(bt.value.trim())try{const t=xt(bt.value,jt.delimiter,jt.hasHeader,jt.trimWhitespace);let e=`<?xml version="1.0" encoding="UTF-8"?>\n<${gt.rootElement}>\n`;t.forEach(t=>{e+=`  <${gt.rowElement}>\n`,jt.hasHeader&&"object"==typeof t?Object.entries(t).forEach(([t,o])=>{const l=t.replace(/[^a-zA-Z0-9_]/g,"_");e+=`    <${l}>${Ut(String(o))}</${l}>\n`}):Array.isArray(t)&&t.forEach((t,o)=>{e+=`    <column${o+1}>${Ut(String(t))}</column${o+1}>\n`}),e+=`  </${gt.rowElement}>\n`}),e+=`</${gt.rootElement}>`,ft.value=e}catch(t){ft.value=`Error: ${t instanceof Error?t.message:"Invalid CSV format"}`}else ft.value=""},Ut=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),At=t=>{if(0===t)return"0 B";const e=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,e)).toFixed(1))+" "+["B","KB","MB","GB"][e]},Vt=()=>{bt.value="name,age,city,country\nJohn Doe,30,New York,USA\nJane Smith,25,London,UK\nBob Johnson,35,Toronto,Canada\nAlice Brown,28,Sydney,Australia","csv-to-json"===b.value?kt():"csv-to-xml"===b.value&&St()},It=()=>{Ct.value='[\n  {\n    "name": "John Doe",\n    "age": 30,\n    "city": "New York",\n    "country": "USA"\n  },\n  {\n    "name": "Jane Smith",\n    "age": 25,\n    "city": "London",\n    "country": "UK"\n  },\n  {\n    "name": "Bob Johnson",\n    "age": 35,\n    "city": "Toronto",\n    "country": "Canada"\n  }\n]',wt()},Jt=()=>{bt.value="",Ct.value="",$t.value="",yt.value="",ft.value=""},Ot=async()=>{let t="";"csv-to-json"===b.value?t=$t.value:"json-to-csv"===b.value?t=yt.value:"csv-to-xml"===b.value&&(t=ft.value);try{await navigator.clipboard.writeText(t)}catch(e){}},Bt=()=>{let t="",e="",o="";"csv-to-json"===b.value?(t=$t.value,e="converted-data.json",o="application/json"):"json-to-csv"===b.value?(t=yt.value,e="converted-data.csv",o="text/csv"):"csv-to-xml"===b.value&&(t=ft.value,e="converted-data.xml",o="application/xml");const l=new Blob([t],{type:`${o};charset=utf-8`});h.saveAs(l,e)};return Vt(),(t,e)=>(m(),a("div",C,[n("div",$,[n("h1",null,c(t.$t("tools.csvConverter.title")),1),n("p",null,c(t.$t("tools.csvConverter.description")),1)]),n("div",y,[n("button",{class:r([{active:"csv-to-json"===b.value},"tab-btn"]),onClick:e[0]||(e[0]=t=>b.value="csv-to-json")},c(t.$t("tools.csvConverter.csvToJson")),3),n("button",{class:r([{active:"json-to-csv"===b.value},"tab-btn"]),onClick:e[1]||(e[1]=t=>b.value="json-to-csv")},c(t.$t("tools.csvConverter.jsonToCsv")),3),n("button",{class:r([{active:"csv-to-xml"===b.value},"tab-btn"]),onClick:e[2]||(e[2]=t=>b.value="csv-to-xml")},c(t.$t("tools.csvConverter.csvToXml")),3)]),"csv-to-json"===b.value?(m(),a("div",f,[n("div",j,[n("div",g,[n("div",E,[n("h3",null,c(t.$t("tools.csvConverter.csvInput")),1),n("div",x,[n("button",{class:"action-btn",onClick:Vt},c(t.$t("tools.csvConverter.loadSample")),1),n("button",{class:"action-btn",onClick:Jt},c(t.$t("common.buttons.clear")),1)])]),v(n("textarea",{"onUpdate:modelValue":e[3]||(e[3]=t=>bt.value=t),class:"data-input",placeholder:t.$t("tools.csvConverter.csvPlaceholder"),onInput:kt},null,40,k),[[i,bt.value]]),n("div",w,[n("label",S,[n("span",null,c(t.$t("tools.csvConverter.delimiter"))+":",1),v(n("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>jt.delimiter=t),class:"option-select",onChange:kt},[n("option",U,c(t.$t("tools.csvConverter.comma")),1),n("option",A,c(t.$t("tools.csvConverter.semicolon")),1),n("option",V,c(t.$t("tools.csvConverter.tab")),1),n("option",I,c(t.$t("tools.csvConverter.pipe")),1)],544),[[u,jt.delimiter]])]),n("label",J,[v(n("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>jt.hasHeader=t),type:"checkbox",onChange:kt},null,544),[[d,jt.hasHeader]]),p(" "+c(t.$t("tools.csvConverter.hasHeader")),1)]),n("label",O,[v(n("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>jt.trimWhitespace=t),type:"checkbox",onChange:kt},null,544),[[d,jt.trimWhitespace]]),p(" "+c(t.$t("tools.csvConverter.trimWhitespace")),1)])])]),n("div",B,[n("div",N,[n("h3",null,c(t.$t("tools.csvConverter.jsonOutput")),1),n("div",W,[n("button",{class:"action-btn",onClick:Ot},c(t.$t("common.buttons.copy")),1),n("button",{class:"action-btn",onClick:Bt},c(t.$t("common.buttons.download")),1)])]),v(n("textarea",{"onUpdate:modelValue":e[7]||(e[7]=t=>$t.value=t),readonly:"",class:"data-output",placeholder:t.$t("tools.csvConverter.jsonPlaceholder")},null,8,H),[[i,$t.value]]),Et.value?(m(),a("div",T,[n("span",_,c(t.$t("tools.csvConverter.rows"))+": "+c(Et.value.rows),1),n("span",M,c(t.$t("tools.csvConverter.columns"))+": "+c(Et.value.columns),1),n("span",P,c(t.$t("tools.csvConverter.size"))+": "+c(Et.value.size),1)])):s("",!0)])])])):s("",!0),"json-to-csv"===b.value?(m(),a("div",z,[n("div",D,[n("div",F,[n("div",K,[n("h3",null,c(t.$t("tools.csvConverter.jsonInput")),1),n("div",L,[n("button",{class:"action-btn",onClick:It},c(t.$t("tools.csvConverter.loadSample")),1),n("button",{class:"action-btn",onClick:Jt},c(t.$t("common.buttons.clear")),1)])]),v(n("textarea",{"onUpdate:modelValue":e[8]||(e[8]=t=>Ct.value=t),class:"data-input",placeholder:t.$t("tools.csvConverter.jsonInputPlaceholder"),onInput:wt},null,40,q),[[i,Ct.value]])]),n("div",X,[n("div",Y,[n("h3",null,c(t.$t("tools.csvConverter.csvOutput")),1),n("div",G,[n("button",{class:"action-btn",onClick:Ot},c(t.$t("common.buttons.copy")),1),n("button",{class:"action-btn",onClick:Bt},c(t.$t("common.buttons.download")),1)])]),v(n("textarea",{"onUpdate:modelValue":e[9]||(e[9]=t=>yt.value=t),readonly:"",class:"data-output",placeholder:t.$t("tools.csvConverter.csvOutputPlaceholder")},null,8,Z),[[i,yt.value]])])])])):s("",!0),"csv-to-xml"===b.value?(m(),a("div",Q,[n("div",R,[n("div",tt,[n("div",et,[n("h3",null,c(t.$t("tools.csvConverter.csvInput")),1),n("div",ot,[n("button",{class:"action-btn",onClick:Vt},c(t.$t("tools.csvConverter.loadSample")),1),n("button",{class:"action-btn",onClick:Jt},c(t.$t("common.clear")),1)])]),v(n("textarea",{"onUpdate:modelValue":e[10]||(e[10]=t=>bt.value=t),class:"data-input",placeholder:t.$t("tools.csvConverter.csvPlaceholder"),onInput:St},null,40,lt),[[i,bt.value]]),n("div",at,[n("label",nt,[n("span",null,c(t.$t("tools.csvConverter.rootElement"))+":",1),v(n("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>gt.rootElement=t),class:"option-input",onInput:St},null,544),[[i,gt.rootElement]])]),n("label",st,[n("span",null,c(t.$t("tools.csvConverter.rowElement"))+":",1),v(n("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>gt.rowElement=t),class:"option-input",onInput:St},null,544),[[i,gt.rowElement]])])])]),n("div",ct,[n("div",rt,[n("h3",null,c(t.$t("tools.csvConverter.xmlOutput")),1),n("div",vt,[n("button",{class:"action-btn",onClick:Ot},c(t.$t("common.buttons.copy")),1),n("button",{class:"action-btn",onClick:Bt},c(t.$t("common.buttons.download")),1)])]),v(n("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>ft.value=t),readonly:"",class:"data-output",placeholder:t.$t("tools.csvConverter.xmlPlaceholder")},null,8,it),[[i,ft.value]])])])])):s("",!0),n("div",ut,[n("h3",null,c(t.$t("tools.csvConverter.supportedFormats")),1),n("div",pt,[n("div",dt,[e[14]||(e[14]=n("h4",null,"CSV",-1)),n("p",null,c(t.$t("tools.csvConverter.csvDescription")),1)]),n("div",mt,[e[15]||(e[15]=n("h4",null,"JSON",-1)),n("p",null,c(t.$t("tools.csvConverter.jsonDescription")),1)]),n("div",ht,[e[16]||(e[16]=n("h4",null,"XML",-1)),n("p",null,c(t.$t("tools.csvConverter.xmlDescription")),1)])])])]))}}),[["__scopeId","data-v-d25461a5"]]);export{bt as default};
