import{a as e,u as t,r as l,c as a,o as s,w as i,e as n,f as r,t as o,I as u,J as d,F as c,g as v,n as m,q as p,s as g,x as y,G as w,y as h,K as b,N as k,H as R,j as f}from"./vendor-GAldOsJ5.js";import{s as x}from"./toast-bUE0oB92.js";import{_ as $}from"./index-vCRZDDw7.js";import"./qr-DE_AbQYC.js";const C={class:"tool-container"},N={class:"tool-header"},I={class:"tool-content"},D={class:"goal-section"},S={class:"goal-input"},T={class:"input-with-unit"},B={class:"goal-presets"},M=["onClick"],q={class:"preset-label"},U={class:"progress-section"},V={class:"progress-circle-container"},j={class:"progress-circle"},E={viewBox:"0 0 120 120",class:"progress-svg"},_={class:"progress-content"},G={class:"progress-amount"},H={class:"progress-percentage"},W={class:"progress-stats"},z={class:"stat-item"},J={class:"stat-value"},L={class:"stat-label"},P={class:"stat-item"},O={class:"stat-value"},F={class:"stat-label"},K={class:"stat-item"},A={class:"stat-value"},Q={class:"stat-label"},X={class:"add-water-section"},Y={class:"quick-add-buttons"},Z=["onClick"],ee={class:"custom-amount"},te={class:"custom-input"},le=["placeholder"],ae=["disabled"],se={class:"history-section"},ie={key:0,class:"empty-history"},ne={key:1,class:"history-list"},re={class:"entry-time"},oe={class:"entry-amount"},ue=["onClick"],de={class:"history-actions"},ce={class:"reminder-section"},ve={class:"reminder-toggle"},me={class:"toggle-label"},pe={key:0,class:"reminder-settings"},ge={class:"setting-group"},ye={value:"30"},we={value:"60"},he={value:"90"},be={value:"120"},ke={class:"setting-group"},Re={class:"setting-group"},fe={class:"tips-section"},xe={class:"tips-grid"},$e=$(e({__name:"WaterReminder",setup(e){const{t:$}=t(),$e=()=>R("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[R("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})]),Ce=l(2e3),Ne=l(0),Ie=l(250),De=l(!1),Se=l(60),Te=l("08:00"),Be=l("22:00"),Me=l([]);let qe=null;const Ue=[{key:"light",value:1500},{key:"normal",value:2e3},{key:"active",value:2500},{key:"intense",value:3e3}],Ve=[100,200,250,300,500],je=[{key:"morning",icon:()=>R("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[R("circle",{cx:"12",cy:"12",r:"5"}),R("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),R("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),R("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),R("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),R("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),R("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),R("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),R("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})])},{key:"regular",icon:()=>R("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[R("circle",{cx:"12",cy:"12",r:"10"}),R("polyline",{points:"12,6 12,12 16,14"})])},{key:"exercise",icon:()=>R("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[R("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})])},{key:"quality",icon:()=>R("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[R("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})])}],Ee=a(()=>Math.min(Math.round(Ne.value/Ce.value*100),100)),_e=a(()=>Math.max(Ce.value-Ne.value,0)),Ge=a(()=>Me.value.length),He=a(()=>{const e=2*Math.PI*50;return e-Ee.value/100*e}),We=e=>{e&&e>0&&(Ne.value+=e,Me.value.push({time:new Date,amount:e}),Ie.value=250,Qe(),Ne.value>=Ce.value&&Ae())},ze=()=>{Ne.value=0,Me.value=[],Qe()},Je=()=>{De.value?(Pe(),Oe()):Fe(),Qe()},Le=()=>{De.value&&(Fe(),Oe()),Qe()},Pe=async()=>{if("Notification"in window){"granted"!==await Notification.requestPermission()&&(De.value=!1,x.warning($("tools.waterReminder.reminder.permissionDenied")))}},Oe=()=>{if(!De.value)return;const e=60*Se.value*1e3;qe=window.setInterval(()=>{const e=new Date,t=60*e.getHours()+e.getMinutes(),[l,a]=Te.value.split(":").map(Number),[s,i]=Be.value.split(":").map(Number);t>=60*l+a&&t<=60*s+i&&Ke()},e)},Fe=()=>{qe&&(clearInterval(qe),qe=null)},Ke=()=>{"Notification"in window&&"granted"===Notification.permission&&new Notification($("tools.waterReminder.reminder.notificationTitle"),{body:$("tools.waterReminder.reminder.notificationBody"),icon:"/water-icon.png"})},Ae=()=>{"Notification"in window&&"granted"===Notification.permission&&new Notification($("tools.waterReminder.progress.goalReached"),{body:$("tools.waterReminder.progress.congratulations"),icon:"/water-icon.png"})},Qe=()=>{const e={dailyGoal:Ce.value,currentIntake:Ne.value,todayHistory:Me.value,reminderEnabled:De.value,reminderInterval:Se.value,reminderStartTime:Te.value,reminderEndTime:Be.value,date:(new Date).toDateString()};localStorage.setItem("waterReminder",JSON.stringify(e))};return s(()=>{(()=>{const e=localStorage.getItem("waterReminder");if(e){const t=JSON.parse(e),l=(new Date).toDateString();t.date===l&&(Ce.value=t.dailyGoal||2e3,Ne.value=t.currentIntake||0,Me.value=(t.todayHistory||[]).map(e=>({...e,time:new Date(e.time)}))),De.value=t.reminderEnabled||!1,Se.value=t.reminderInterval||60,Te.value=t.reminderStartTime||"08:00",Be.value=t.reminderEndTime||"22:00"}})(),De.value&&Oe()}),i([Ce,De,Se,Te,Be],()=>{Qe()}),(e,t)=>(f(),n("div",C,[r("div",N,[r("h1",null,o(e.$t("tools.waterReminder.title")),1),r("p",null,o(e.$t("tools.waterReminder.description")),1)]),r("div",I,[r("div",D,[r("h3",null,o(e.$t("tools.waterReminder.goal.title")),1),r("div",S,[r("label",null,o(e.$t("tools.waterReminder.goal.dailyGoal")),1),r("div",T,[u(r("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>Ce.value=e),type:"number",class:"form-input",min:"500",max:"5000",step:"100"},null,512),[[d,Ce.value,void 0,{number:!0}]]),t[7]||(t[7]=r("span",{class:"unit"},"ml",-1))])]),r("div",B,[(f(),n(c,null,v(Ue,t=>r("button",{key:t.value,class:m(["preset-button",{active:Ce.value===t.value}]),onClick:e=>{return l=t.value,Ce.value=l,void Qe();var l}},[p(o(t.value)+"ml ",1),r("span",q,o(e.$t(`tools.waterReminder.goal.presets.${t.key}`)),1)],10,M)),64))])]),r("div",U,[r("h3",null,o(e.$t("tools.waterReminder.progress.title")),1),r("div",V,[r("div",j,[(f(),n("svg",E,[t[8]||(t[8]=r("circle",{cx:"60",cy:"60",r:"50",class:"progress-bg"},null,-1)),r("circle",{cx:"60",cy:"60",r:"50",class:"progress-fill",style:g({strokeDashoffset:He.value})},null,4)])),r("div",_,[r("div",G,o(Ne.value),1),t[9]||(t[9]=r("div",{class:"progress-unit"}," ml ",-1)),r("div",H,o(Ee.value)+"% ",1)])])]),r("div",W,[r("div",z,[r("span",J,o(Ne.value),1),r("span",L,o(e.$t("tools.waterReminder.progress.consumed")),1)]),r("div",P,[r("span",O,o(_e.value),1),r("span",F,o(e.$t("tools.waterReminder.progress.remaining")),1)]),r("div",K,[r("span",A,o(Ge.value),1),r("span",Q,o(e.$t("tools.waterReminder.progress.glasses")),1)])])]),r("div",X,[r("h3",null,o(e.$t("tools.waterReminder.addWater.title")),1),r("div",Y,[(f(),n(c,null,v(Ve,e=>r("button",{key:e,class:"quick-add-btn",onClick:t=>We(e)},[(f(),y(w($e),{class:"water-icon"})),p(" "+o(e)+"ml ",1)],8,Z)),64))]),r("div",ee,[r("div",te,[u(r("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>Ie.value=e),type:"number",placeholder:e.$t("tools.waterReminder.addWater.customPlaceholder"),class:"form-input",min:"1",max:"1000"},null,8,le),[[d,Ie.value,void 0,{number:!0}]]),r("button",{class:"btn btn-primary",disabled:!Ie.value,onClick:t[2]||(t[2]=e=>We(Ie.value))},o(e.$t("tools.waterReminder.addWater.addButton")),9,ae)])])]),r("div",se,[r("h3",null,o(e.$t("tools.waterReminder.history.title")),1),0===Me.value.length?(f(),n("div",ie,[r("p",null,o(e.$t("tools.waterReminder.history.noEntries")),1)])):(f(),n("div",ne,[(f(!0),n(c,null,v(Me.value,(e,t)=>{return f(),n("div",{key:t,class:"history-entry"},[r("div",re,o((l=e.time,l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))),1),r("div",oe,o(e.amount)+"ml ",1),r("button",{class:"remove-btn",onClick:e=>(e=>{const t=Me.value[e];Ne.value-=t.amount,Me.value.splice(e,1),Qe()})(t)}," Ã— ",8,ue)]);var l}),128))])),r("div",de,[r("button",{class:"btn btn-secondary",onClick:ze},o(e.$t("tools.waterReminder.history.clearToday")),1)])]),r("div",ce,[r("h3",null,o(e.$t("tools.waterReminder.reminder.title")),1),r("div",ve,[r("label",me,[u(r("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>De.value=e),type:"checkbox",onChange:Je},null,544),[[b,De.value]]),t[10]||(t[10]=r("span",{class:"toggle-slider"},null,-1)),p(" "+o(e.$t("tools.waterReminder.reminder.enableReminders")),1)])]),De.value?(f(),n("div",pe,[r("div",ge,[r("label",null,o(e.$t("tools.waterReminder.reminder.interval")),1),u(r("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>Se.value=e),class:"form-select",onChange:Le},[r("option",ye,o(e.$t("tools.waterReminder.reminder.intervals.30min")),1),r("option",we,o(e.$t("tools.waterReminder.reminder.intervals.1hour")),1),r("option",he,o(e.$t("tools.waterReminder.reminder.intervals.90min")),1),r("option",be,o(e.$t("tools.waterReminder.reminder.intervals.2hours")),1)],544),[[k,Se.value]])]),r("div",ke,[r("label",null,o(e.$t("tools.waterReminder.reminder.startTime")),1),u(r("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>Te.value=e),type:"time",class:"form-input",onChange:Le},null,544),[[d,Te.value]])]),r("div",Re,[r("label",null,o(e.$t("tools.waterReminder.reminder.endTime")),1),u(r("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>Be.value=e),type:"time",class:"form-input",onChange:Le},null,544),[[d,Be.value]])])])):h("",!0)]),r("div",fe,[r("h3",null,o(e.$t("tools.waterReminder.tips.title")),1),r("div",xe,[(f(),n(c,null,v(je,(t,l)=>r("div",{key:l,class:"tip-card"},[(f(),y(w(t.icon),{class:"tip-icon"})),r("h4",null,o(e.$t(`tools.waterReminder.tips.items.${t.key}.title`)),1),r("p",null,o(e.$t(`tools.waterReminder.tips.items.${t.key}.description`)),1)])),64))])])])]))}}),[["__scopeId","data-v-866affc1"]]);export{$e as default};
