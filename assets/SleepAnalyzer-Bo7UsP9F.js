import{a as e,u as l,r as s,c as t,H as a,o,e as n,f as i,t as r,y as c,F as u,g as y,n as p,x as v,q as d,G as g,I as h,J as m,N as k,K as f,s as x,j as z}from"./vendor-GAldOsJ5.js";import{s as A}from"./toast-bUE0oB92.js";import{_ as $}from"./index-vCRZDDw7.js";import"./qr-DE_AbQYC.js";const b={class:"tool-container"},w={class:"tool-header"},q={class:"tool-content"},M={class:"tabs"},C=["onClick"],S={key:0,class:"tab-content"},B={class:"log-section"},T={class:"sleep-form"},D={class:"form-grid"},L={class:"input-group"},I={class:"input-group"},V={class:"input-group"},U={value:"1"},j={value:"2"},O={value:"3"},_={value:"4"},H={class:"input-group"},F={value:"1"},J={value:"2"},N={value:"3"},Q={value:"4"},P={class:"factors-section"},G={class:"factors-grid"},K=["value"],E={class:"notes-section"},R=["placeholder"],W={class:"form-actions"},X={key:0,class:"recent-logs"},Y={class:"logs-list"},Z={class:"log-date"},ee={class:"log-duration"},le={class:"log-quality"},se={class:"quality-stars"},te=["onClick"],ae={key:1,class:"tab-content"},oe={class:"analysis-section"},ne={key:0,class:"empty-state"},ie={key:1,class:"analysis-content"},re={class:"stats-grid"},ce={class:"stat-card"},ue={class:"stat-icon"},ye={class:"stat-content"},pe={class:"stat-value"},ve={class:"stat-label"},de={class:"stat-card"},ge={class:"stat-icon"},he={class:"stat-content"},me={class:"stat-value"},ke={class:"stat-label"},fe={class:"stat-card"},xe={class:"stat-icon"},ze={class:"stat-content"},Ae={class:"stat-value"},$e={class:"stat-label"},be={class:"stat-card"},we={class:"stat-icon"},qe={class:"stat-content"},Me={class:"stat-value"},Ce={class:"stat-label"},Se={class:"chart-section"},Be={class:"sleep-chart"},Te={class:"bar-label"},De={class:"insights-section"},Le={class:"insights-list"},Ie={class:"insight-content"},Ve={key:2,class:"tab-content"},Ue={class:"tips-section"},je={class:"tips-categories"},Oe={class:"tips-grid"},_e=$(e({__name:"SleepAnalyzer",setup(e){const{t:$}=l(),_e=()=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12,6 12,12 16,14"})]),He=()=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[a("polygon",{points:"12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"})]),Fe=()=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[a("polyline",{points:"23,6 13.5,15.5 8.5,10.5 1,18"}),a("polyline",{points:"17,6 23,6 23,12"})]),Je=()=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[a("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),a("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),a("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),a("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]),Ne=()=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]),Qe=()=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[a("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),a("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),a("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]),Pe=()=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[a("polyline",{points:"20,6 9,17 4,12"})]),Ge=[{key:"log",icon:()=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[a("path",{d:"M2 4v16"}),a("path",{d:"M2 8h18a2 2 0 0 1 2 2v10"}),a("path",{d:"M2 17h20"}),a("path",{d:"M6 8V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4"})])},{key:"analysis",icon:()=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[a("polyline",{points:"22,12 18,12 15,21 9,3 6,12 2,12"})])},{key:"tips",icon:()=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[a("path",{d:"M9 21h6"}),a("path",{d:"M12 17c-3.31 0-6-2.69-6-6 0-3.31 2.69-6 6-6s6 2.69 6 6c0 3.31-2.69 6-6 6z"}),a("path",{d:"M12 1v2"}),a("path",{d:"M22 12h-2"}),a("path",{d:"M4 12H2"}),a("path",{d:"M20.49 4.64l-1.42 1.42"}),a("path",{d:"M4.93 4.93l1.42 1.42"})])}],Ke=s("log"),Ee=s({bedtime:"",wakeTime:"",quality:3,mood:3,factors:[],notes:""}),Re=s([]),We=["caffeine","alcohol","exercise","stress","screen","meal","noise","temperature"],Xe=t(()=>Re.value.slice(-7).reverse()),Ye=t(()=>Re.value.slice(-7)),Ze=t(()=>{if(0===Re.value.length)return"0h 0m";const e=Re.value.reduce((e,l)=>e+l.duration,0)/Re.value.length,l=Math.floor(e);return`${l}h ${Math.round(60*(e-l))}m`}),el=t(()=>{if(0===Re.value.length)return"0.0";return(Re.value.reduce((e,l)=>e+l.quality,0)/Re.value.length).toFixed(1)}),ll=t(()=>{if(Re.value.length<3)return $("tools.sleepAnalyzer.analysis.trends.insufficient");const e=Re.value.slice(-3),l=Re.value.slice(-6,-3);if(0===l.length)return $("tools.sleepAnalyzer.analysis.trends.insufficient");const s=e.reduce((e,l)=>e+l.quality,0)/e.length,t=l.reduce((e,l)=>e+l.quality,0)/l.length;return $(s>t+.3?"tools.sleepAnalyzer.analysis.trends.improving":s<t-.3?"tools.sleepAnalyzer.analysis.trends.declining":"tools.sleepAnalyzer.analysis.trends.stable")}),sl=t(()=>{if(Re.value.length<7)return 0;const e=Re.value.slice(-7),l=e.reduce((e,l)=>e+l.duration,0)/e.length,s=e.reduce((e,s)=>e+Math.pow(s.duration-l,2),0)/e.length,t=Math.sqrt(s),a=Math.max(0,100-20*t);return Math.round(a)}),tl=t(()=>{const e=[];if(0===Re.value.length)return e;const l=Re.value.slice(-7),s=l.reduce((e,l)=>e+l.duration,0)/l.length,t=l.reduce((e,l)=>e+l.quality,0)/l.length;return s<6?e.push({type:"warning",icon:Qe,message:$("tools.sleepAnalyzer.analysis.insights.shortSleep")}):s>9&&e.push({type:"info",icon:Ne,message:$("tools.sleepAnalyzer.analysis.insights.longSleep")}),t>=3.5?e.push({type:"success",icon:Pe,message:$("tools.sleepAnalyzer.analysis.insights.goodQuality")}):t<2.5&&e.push({type:"warning",icon:Qe,message:$("tools.sleepAnalyzer.analysis.insights.poorQuality")}),sl.value>=80?e.push({type:"success",icon:Pe,message:$("tools.sleepAnalyzer.analysis.insights.consistent")}):sl.value<60&&e.push({type:"info",icon:Ne,message:$("tools.sleepAnalyzer.analysis.insights.inconsistent")}),e}),al=[{key:"environment",icon:()=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[a("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})]),tips:["temperature","darkness","quiet","comfort"]},{key:"routine",icon:_e,tips:["schedule","ritual","relaxation","consistency"]},{key:"lifestyle",icon:()=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[a("circle",{cx:"12",cy:"12",r:"5"}),a("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),a("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),a("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),a("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),a("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),a("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),a("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),a("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]),tips:["exercise","diet","caffeine","screen"]},{key:"health",icon:()=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[a("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})]),tips:["stress","meditation","breathing","position"]}],ol=()=>{if(!Ee.value.bedtime||!Ee.value.wakeTime)return void A.warning($("tools.sleepAnalyzer.log.missingFields"));const e=new Date(Ee.value.bedtime),l=new Date(Ee.value.wakeTime);let s=(l.getTime()-e.getTime())/36e5;s<0&&(s+=24);const t={date:l.toISOString().split("T")[0],bedtime:Ee.value.bedtime,wakeTime:Ee.value.wakeTime,duration:s,quality:Ee.value.quality,mood:Ee.value.mood,factors:[...Ee.value.factors],notes:Ee.value.notes};Re.value.push(t),il(),Ee.value={bedtime:"",wakeTime:"",quality:3,mood:3,factors:[],notes:""},A.success($("tools.sleepAnalyzer.log.saved"))},nl=e=>{const l=Math.floor(e);return`${l}h ${Math.round(60*(e-l))}m`},il=()=>{localStorage.setItem("sleepAnalyzer",JSON.stringify(Re.value))};return o(()=>{(()=>{const e=localStorage.getItem("sleepAnalyzer");e&&(Re.value=JSON.parse(e))})();const e=new Date,l=new Date(e);l.setHours(22,0,0,0);const s=new Date(e);s.setDate(s.getDate()+1),s.setHours(7,0,0,0),Ee.value.bedtime=l.toISOString().slice(0,16),Ee.value.wakeTime=s.toISOString().slice(0,16)}),(e,l)=>(z(),n("div",b,[i("div",w,[i("h1",null,r(e.$t("tools.sleepAnalyzer.title")),1),i("p",null,r(e.$t("tools.sleepAnalyzer.description")),1)]),i("div",q,[i("div",M,[(z(),n(u,null,y(Ge,l=>i("button",{key:l.key,class:p(["tab-button",{active:Ke.value===l.key}]),onClick:e=>Ke.value=l.key},[(z(),v(g(l.icon),{class:"tab-icon"})),d(" "+r(e.$t(`tools.sleepAnalyzer.tabs.${l.key}`)),1)],10,C)),64))]),"log"===Ke.value?(z(),n("div",S,[i("div",B,[i("h3",null,r(e.$t("tools.sleepAnalyzer.log.title")),1),i("p",null,r(e.$t("tools.sleepAnalyzer.log.description")),1),i("div",T,[i("div",D,[i("div",L,[i("label",null,r(e.$t("tools.sleepAnalyzer.log.bedtime")),1),h(i("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>Ee.value.bedtime=e),type:"datetime-local",class:"form-input"},null,512),[[m,Ee.value.bedtime]])]),i("div",I,[i("label",null,r(e.$t("tools.sleepAnalyzer.log.wakeTime")),1),h(i("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>Ee.value.wakeTime=e),type:"datetime-local",class:"form-input"},null,512),[[m,Ee.value.wakeTime]])]),i("div",V,[i("label",null,r(e.$t("tools.sleepAnalyzer.log.quality")),1),h(i("select",{"onUpdate:modelValue":l[2]||(l[2]=e=>Ee.value.quality=e),class:"form-select"},[i("option",U,r(e.$t("tools.sleepAnalyzer.log.qualities.poor")),1),i("option",j,r(e.$t("tools.sleepAnalyzer.log.qualities.fair")),1),i("option",O,r(e.$t("tools.sleepAnalyzer.log.qualities.good")),1),i("option",_,r(e.$t("tools.sleepAnalyzer.log.qualities.excellent")),1)],512),[[k,Ee.value.quality]])]),i("div",H,[i("label",null,r(e.$t("tools.sleepAnalyzer.log.mood")),1),h(i("select",{"onUpdate:modelValue":l[3]||(l[3]=e=>Ee.value.mood=e),class:"form-select"},[i("option",F,r(e.$t("tools.sleepAnalyzer.log.moods.tired")),1),i("option",J,r(e.$t("tools.sleepAnalyzer.log.moods.okay")),1),i("option",N,r(e.$t("tools.sleepAnalyzer.log.moods.good")),1),i("option",Q,r(e.$t("tools.sleepAnalyzer.log.moods.energetic")),1)],512),[[k,Ee.value.mood]])])]),i("div",P,[i("h4",null,r(e.$t("tools.sleepAnalyzer.log.factors")),1),i("div",G,[(z(),n(u,null,y(We,s=>i("label",{key:s,class:"factor-checkbox"},[h(i("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>Ee.value.factors=e),type:"checkbox",value:s},null,8,K),[[f,Ee.value.factors]]),d(" "+r(e.$t(`tools.sleepAnalyzer.log.factorsList.${s}`)),1)])),64))])]),i("div",E,[i("label",null,r(e.$t("tools.sleepAnalyzer.log.notes")),1),h(i("textarea",{"onUpdate:modelValue":l[5]||(l[5]=e=>Ee.value.notes=e),placeholder:e.$t("tools.sleepAnalyzer.log.notesPlaceholder"),class:"form-textarea",rows:"3"},null,8,R),[[m,Ee.value.notes]])]),i("div",W,[i("button",{class:"btn btn-primary btn-lg",onClick:ol},r(e.$t("tools.sleepAnalyzer.log.saveButton")),1)])]),Re.value.length>0?(z(),n("div",X,[i("h4",null,r(e.$t("tools.sleepAnalyzer.log.recentLogs")),1),i("div",Y,[(z(!0),n(u,null,y(Xe.value,(e,l)=>{return z(),n("div",{key:l,class:"log-entry"},[i("div",Z,r((s=e.date,new Date(s).toLocaleDateString())),1),i("div",ee,r(nl(e.duration)),1),i("div",le,[i("div",se,[(z(),n(u,null,y(4,l=>i("span",{key:l,class:p(["star",{filled:l<=e.quality}])},"★",2)),64))])]),i("button",{class:"remove-btn",onClick:e=>(e=>{const l=Re.value.length-1-e;Re.value.splice(l,1),il()})(l)}," × ",8,te)]);var s}),128))])])):c("",!0)])])):c("",!0),"analysis"===Ke.value?(z(),n("div",ae,[i("div",oe,[i("h3",null,r(e.$t("tools.sleepAnalyzer.analysis.title")),1),i("p",null,r(e.$t("tools.sleepAnalyzer.analysis.description")),1),0===Re.value.length?(z(),n("div",ne,[i("p",null,r(e.$t("tools.sleepAnalyzer.analysis.noData")),1),i("button",{class:"btn btn-primary",onClick:l[6]||(l[6]=e=>Ke.value="log")},r(e.$t("tools.sleepAnalyzer.analysis.startLogging")),1)])):(z(),n("div",ie,[i("div",re,[i("div",ce,[i("div",ue,[(z(),v(g(_e)))]),i("div",ye,[i("div",pe,r(Ze.value),1),i("div",ve,r(e.$t("tools.sleepAnalyzer.analysis.averageDuration")),1)])]),i("div",de,[i("div",ge,[(z(),v(g(He)))]),i("div",he,[i("div",me,r(el.value)+"/4 ",1),i("div",ke,r(e.$t("tools.sleepAnalyzer.analysis.averageQuality")),1)])]),i("div",fe,[i("div",xe,[(z(),v(g(Fe)))]),i("div",ze,[i("div",Ae,r(ll.value),1),i("div",$e,r(e.$t("tools.sleepAnalyzer.analysis.trend")),1)])]),i("div",be,[i("div",we,[(z(),v(g(Je)))]),i("div",qe,[i("div",Me,r(sl.value)+"% ",1),i("div",Ce,r(e.$t("tools.sleepAnalyzer.analysis.consistency")),1)])])]),i("div",Se,[i("h4",null,r(e.$t("tools.sleepAnalyzer.analysis.sleepPattern")),1),i("div",Be,[(z(!0),n(u,null,y(Ye.value,(e,l)=>{return z(),n("div",{key:l,class:"chart-bar"},[i("div",{class:p(["bar",`quality-${e.quality}`]),style:x({height:e.duration/12*100+"%"})},null,6),i("div",Te,r((s=e.date,new Date(s).toLocaleDateString([],{month:"short",day:"numeric"}))),1)]);var s}),128))])]),i("div",De,[i("h4",null,r(e.$t("tools.sleepAnalyzer.analysis.insights")),1),i("div",Le,[(z(!0),n(u,null,y(tl.value,l=>(z(),n("div",{key:l.type,class:p(["insight-card",l.type])},[(z(),v(g(l.icon),{class:"insight-icon"})),i("div",Ie,[i("h5",null,r(e.$t(`tools.sleepAnalyzer.analysis.insightTypes.${l.type}`)),1),i("p",null,r(l.message),1)])],2))),128))])])]))])])):c("",!0),"tips"===Ke.value?(z(),n("div",Ve,[i("div",Ue,[i("h3",null,r(e.$t("tools.sleepAnalyzer.tips.title")),1),i("p",null,r(e.$t("tools.sleepAnalyzer.tips.description")),1),i("div",je,[(z(),n(u,null,y(al,l=>i("div",{key:l.key,class:"tip-category"},[i("h4",null,r(e.$t(`tools.sleepAnalyzer.tips.categories.${l.key}.title`)),1),i("div",Oe,[(z(!0),n(u,null,y(l.tips,s=>(z(),n("div",{key:s,class:"tip-card"},[(z(),v(g(l.icon),{class:"tip-icon"})),i("h5",null,r(e.$t(`tools.sleepAnalyzer.tips.categories.${l.key}.tips.${s}.title`)),1),i("p",null,r(e.$t(`tools.sleepAnalyzer.tips.categories.${l.key}.tips.${s}.description`)),1)]))),128))])])),64))])])])):c("",!0)])]))}}),[["__scopeId","data-v-28e3cb12"]]);export{_e as default};
